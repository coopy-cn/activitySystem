/*!
 * FaiUI.js
 * hdFai UI for faisco
 * URL:http://www.faisco.com
 * @Time 2012-07-24
 * 
 */
(function(L){var n=0;L.widget("ui.faiTable",{options:{before:function(){},toolBar:[],tableColumn:{showCheckbox:false,checkboxList:[],colClass:"defaultWidth",rowClass:"defaultWidth",hovreTipsOpts:null,columns:[],hiddenKeyList:[],useWeight:false},bottom:{show:false,showTotal:false,showAllTotal:false,showPageJump:false,showExtTotal:false,showPage:false,showPageNumSelect:false},ajax:{type:"post",url:"",data:""},primaryKey:"_index",dataList:[],noDataMsg:"没有数据",tableRowsClass:{},sortData:{sortable:false,showSortBtn:false,showColumnKey:"_sort",unSortList:[],sortBack:function(){}},ajaxPage:{synch:false,type:"post",url:"",after:function(){},regroup:null,cache:[],faiTableData:{sortKey:"",sortAs:"",searchMatcher:[]}},page:{startPage:1,showCountList:[],showCount:0},itemHover:false,tmp:{result:[],maxPage:0,newAddDataList:[],rmDataList:[],editDataList:[],maxPrimaryKey:0,searchMatcher:[]},after:function(){},expand:false,expandCookie:"",colShowCookie:"",},_create:function(){var af=this;var ad=af.options;var ag=af.element;ad._uid=n++;if(ad.before){ad.before()}var ac=G(ad);L.each(ad.tableColumn.columns,function(an,ao){var ap=ao.key;if(ac[ap]!=null){ao.isShow=ac[ap]}});var ah=[];ah.push('<div class="faiTableWrap">');if(ad.toolBar.length>0){ah.push('<div class="top">');L.each(ad.toolBar,function(an,ao){if(ao.show){var ap="";if(typeof ao.extClass!="undefined"){ap+=ao.extClass}var aq="";if(typeof ao.content!="undefined"){aq+=ao.content}ah.push('<div class="toolBar '+ap+'">'+aq+"</div>")}});ah.push("</div>")}ah.push('<div class="center">');ah.push('<table class="faiTable" cellpadding="0" cellspacing="0">');ah.push("<thead>");ah.push("<tr>");if(ad.tableColumn.showCheckbox){ah.push('<th class="checkBoxWidth textCenter sep"><input id="checkboxItem_all" class="checkbox all" type="checkbox" name="checkboxItem_all"><label for="checkboxItem_all"></label></th>')}var ak=false;var ai="";var ae="";var aj=ad.expand;var al=false;if(ad.tableColumn.columns.length>0){L.each(ad.tableColumn.columns,function(ay,at){var ax=at.onsort;var ao=at.sortAs;var aw=at.expand;var an=at.onDropDownList;if(typeof an=="function"){at.onDropDownList=an=an(ad)}if(typeof aw=="undefined"){aw=aj}var aB="";if(typeof at.key!="undefined"){aB=' data-key="'+at.key+'"'}var az="";var aq="";var aC=ad.tableColumn.columns.length;if(aC!=(ay+1)){aq=" sep"}var av="";var ap="";var aA="";if(ax){av=" sort pointer"}if(an&&an.length>0){al=true;ap=" dropDown pointer"}if(at.key==="_showColumnSelect"){aA=" colOption pointer"}if(!ak&&ao=="asc"){ak=true;ai="asc";ae=at.key;if(ax){av+=" asc"}}if(!ak&&ao=="desc"){ak=true;ai="desc";ae=at.key;if(ax){av+=" desc"}}var ar=at.colClass;if(ad.sortData.showSortBtn&&at.key==ad.sortData.showColumnKey){av="";if(typeof ar!="undefined"){ar="sortWidth "+ar}else{ar="sortWidth"}}if(typeof ar!="undefined"){az=' class="'+ar+aq+av+ap+aA}else{if(ad.tableColumn.colClass){az=' class="'+ad.tableColumn.colClass+aq+av+ap+aA}}if(at.isShow===false){az+=" hide"}if(!at.name&&at.key=="_showColumnSelect"){at.name='<span class="icon icon-setting"></span>'}var au="";if(aw){az+=' expand "';au="<th"+aB+az+'><div class="expandRightLine-box"><div class="expandRightLine"></div></div><div class="padding title">'+at.name+"</div></th>"}else{az+=' "';au+="<th"+aB+az+'><div class="padding">'+at.name+"</div></th>"}ah.push(au)})}else{ah.push("<th>&nbsp;</th>")}ah.push("</tr>");ah.push("</thead>");ah.push("<tbody>");ah.push("</tbody>");ah.push("<tfoot></tfoot>");ah.push("</table>");ah.push("</div>");if(ad.bottom.show){ah.push('<div class="bottom">');ah.push('<div class="total">');if(ad.bottom.showTotal){}if(ad.bottom.showAllTotal){ah.push('<span class="allTotal"></span>')}if(ad.bottom.showExtTotal){ah.push('<span class="extTotal"></span>')}if(ad.bottom.showPageNumSelect){ah.push('<div class="dropDownBox">');ah.push('<div class="dropDownArea"></div>');ah.push('<div class="faiTable_poupBox optionsBox hide"></div>');ah.push("</div>")}ah.push("</div>");ah.push('<div class="pageBox">');if(ad.bottom.showPage){ah.push('<div class="page">');ah.push("</div>")}if(ad.bottom.showPageJump){ah.push('<span class="pageJump"> <input maxlength="3" class="jumpInput" type="text"/> <div class="jumpSubmit pointer">跳转</div></span>')}}ah.push("</div>");ag.append(ah.join(""));if(ad.tableColumn.showCheckbox){B(ag,ad);if(ad.tableColumn.showCheckbox=="memory"){if(L.type(ad.tableColumn.checkboxList)!="array"){ad.tableColumn.checkboxList=[]}ad.tableColumn.checkboxList=hdFai.HdList(ad.tableColumn.checkboxList,true)}}if(ad.tableColumn.useWeight){Z(ag,ad)}if(typeof ad.ajaxPage.url!="undefined"&&ad.ajaxPage.url!=""){ad._openAjaxPage=true;if(ak){ad.ajaxPage.faiTableData.sortKey=ae;ad.ajaxPage.faiTableData.sortAs=ai}ad.dataList=[];M(ag,ad)}else{if(typeof ad.ajax.url!="undefined"&&ad.ajax.url!=""){ad.dataList=[];F(ag,ad,ak,ai,ae)}else{if(ak&&ai&&ae){ad.dataList.sort(function(ao,an){return hdFai.compareObjNew(ao,an,ai,ae)})}T(ag,ad)}}if(ad.bottom.showPageNumSelect){D(ag,ad)}r(ag,ad);if(al){O(ag,ad)}A(ag,ad);a(ag,ad);o(ag,ad);aa(ag,ad);if(ad.after){ad.after()}L("body").on("click.hideDropDown",function(){var an=ag.find(".faiTable_poupBox");if(an.is(":visible")){an.hide();an.parent().removeClass("open")}});var am=hdFai.watch.$create();L(window).on("scroll",function(){if(!ag.is(":visible")){return}var an=ag.find(".center>table>thead");am(L(window).scrollTop()-an.offset().top>0,function(at,ar){var aq,ao,ap;if(at===ar){return}aq=an.find(".scrollFixedTr");if(aq.length==0){return}ao=aq.find("th");if(at){ap=[];ao.each(function(au,aw){var av=L(this);av.data("_lastWidth",aw.style.width);if(av.css("box-sizing")=="border-box"){ap.push(av.outerWidth())}else{ap.push(av.width())}});ao.each(function(au,av){L(this).css("width",ap[au])})}else{aq.find("th").each(function(au,aw){var av=L(this);av.css("width",av.data("_lastWidth"));av.removeData("_lastWidth")})}aq.toggleClass("headTrFixed",at);an.find(".trClone").removeClass("headTrFixed").toggle(at)})})},sortDataList:function(ah){var ag=this.options;var aj=this.element;var af=ag.dataList;var ac=aj.find("div.center>table>tbody>tr");var ai=aj.find("div.center>table>tbody");L.each(ah,function(ak,al){L.each(af,function(an,ao){if(al===ao.id){var am=ao._index;L.each(ac,function(ap,ar){var aq=parseInt(L(ar).attr("_index"));if(am===aq){ai.append(ar);return false}});return false}})});ac=aj.find("div.center>table>tbody>tr");for(var ae=ac.length-1;ae>=0;ae--){var ad=L(ac[ae]).find("div.checkedBtn");if(ad.length>0){ai.prepend(ac[ae])}}U(aj);S(aj);w(aj,ag)},returnDataList:function(ag,ae){var ad=this.options;if(ad._openAjaxPage&&ae){x(L.toJSON({showCount:0}),ad,ae);return}var ac=ad.dataList;var af=J(ac,ad);if(ag){return ac}return af},returnDataCount:function(){return this.options.ajaxPage.totalCount},returnRmDataList:function(){var ad=this.options;var ac=ad.tmp.rmDataList;var ae=J(ac,ad);return ae},returnChoiceDataList:function(ah){var ag=this;var af=ag.element;var ae=ag.options;var ac=[];if(ae.tableColumn.showCheckbox=="memory"){ae.tableColumn.checkboxList.forEach(function(ai){ac.push(ag.getPrimaryKeyData(ai,ah))})}else{var ad=af.find("div.center>table>tbody>tr>td.checkBoxWidth input[type='checkbox']:checked").parents("tr");ad.each(function(aj,ak){var ai=L(this).attr(ae.primaryKey);ac.push(ag.getPrimaryKeyData(ai,ah))})}return ac},rmChoices:function(){var ae=this.element;var ad=this.options;var ac=[];if(ad.tableColumn.showCheckbox=="memory"){ac=ac.concat(ad.tableColumn.checkboxList.list)}else{ac=ae.find("div.center>table>tbody>tr>td.checkBoxWidth input[type='checkbox']:checked").parents("tr").map(function(af,ag){return L(ag).attr(ad.primaryKey)})}if(ac.length==0){return true}this.rmPrimaryKeyData(ac);return true},rmChoicesList:function(ac){this.rmPrimaryKeyData(ac);return true},addData:function(ai,ad,ah){var ag=this.element;var af=this.options;var ae=af.dataList;var ac=af.tmp.newAddDataList;af.tmp.maxPrimaryKey++;ai[af.primaryKey]=af.tmp.maxPrimaryKey;if(ah){ae.splice(ah,0,ai)}else{if(!ad){ae.push(ai)}else{ae.splice(0,0,ai)}}ac.push(ai);T(ag,af);return true},returnNewAddDataList:function(){var ad=this.options;var ac=ad.tmp.newAddDataList;var ae=J(ac,ad);return ae},hiddenColumns:function(ad){var ac=this.options;var ae=this.element;ac.tableColumn.hiddenKeyList=ad;R(ae,ac)},searchString:function(ac,aj,ak){var ad=typeof ac!=="object";if(!ad){ak=aj;aj=ac}var ag=this;var af=ag.options;var ah=ag.element;var ae=af.tmp.searchMatcher;var ai=function(an){ad&&(an.name=ac);if(af._openAjaxPage&&an.cmd=="callBack"){console.warn("开启后端分页不支持callBack搜索");return}if(!ak&&"uid" in an){for(var al=0;al<ae.length;al++){var am=ae[al];if(am.uid==an.uid){ae.splice(al--,1);continue}}}ae.push(an)};if(L.isArray(aj)){if(ak===undefined){ak=true}aj.forEach(ai)}else{ai(aj)}af.page.startPage=1;if(af._openAjaxPage){return M(ah,af)}T(ah,af)},updateSearchByName:function(ad,ac,ae){this.rmSearchByName(ad);this.searchString(ad,ac,ae)},rmSearchObj:function(ac){return g(this,ac)},rmSearchByName:function(ac){return g(this,ac,true)},getSearchObj:function(af){var ai=this;var ae=ai.options;var ac=[];var ah=ae.tmp.searchMatcher;if(typeof af==="undefined"){return ah}for(var ad=0;ad<ah.length;ad++){var ag=ah[ad];if(ag.uid==af){ac.push(ag)}}return ac},searchStringObject:function(ad,ae){var ac=typeof ad!=="object";var ae=L.map(ac?ae:ad,function(af,ag){var ah={};ag.cmd&&(ah.cmd=ag.obj);ag.type&&(ah.type=ag.type);ag.key&&(ah.searchKeyList=[ag.key]);ag.val&&(ah.searchString=ag.val);return ah});ac?this.searchString(ad,ae):this.searchString(ae)},getPrimaryKeyId:function(ad){var ae=this.options;var ac=L(ad).parents("tr").attr(ae.primaryKey);return parseInt(ac)},getPrimaryKeyData:function(ac,ah){var af=this.options;var ad=af.dataList;var ag=false;var ae={};L.each(ad,function(ai,aj){if(aj[af.primaryKey]==ac){ag=true;ae=aj;return false}});if(ag){if(ah){return ae}else{return J(ae,af)}}},rmPrimaryKeyData:function(ai){var aj=this.element;var ag=this.options;var af=ag.dataList;var ad=ag.tmp.rmDataList;var ac=ag.tmp.newAddDataList;var ah=ag.tmp.result;var ae=ag.tmp.editDataList;if(!L.isArray(ai)){ai=[ai]}L.each(ai,function(al,ak){L.each(af,function(am,an){if(an[ag.primaryKey]==ak){ad.push(an);af.splice(am,1);return false}});L.each(ac,function(am,an){if(an[ag.primaryKey]==ak){ac.splice(am,1);return false}});L.each(ah,function(am,an){if(an[ag.primaryKey]==ak){ah.splice(am,1);return false}});L.each(ae,function(am,an){if(an[ag.primaryKey]==ak){ae.splice(am,1);return false}});if(ag.tableColumn.showCheckbox=="memory"){ag.tableColumn.checkboxList.not(ak)}});T(aj,ag);return true},editData:function(ak,ag,ae){var ai=this.element;var af=this.options;var aj=af.dataList;var ac=af.tmp.editDataList;var ad=af.tmp.newAddDataList;var ah=false;L.each(aj,function(al,an){if(an[af.primaryKey]==ak){L.extend(true,an,ag);ah=true;var am=false;L.each(ad,function(ao,ap){if(ap[af.primaryKey]==ak){am=true;return false}});if(!am){L.each(ac,function(ao,ap){if(ap[af.primaryKey]==ak){ac.splice(ao,1);return false}});ac.push(an)}return false}});if(!ae&&ah){T(ai,af);return true}else{return false}},returnEditDataList:function(){var ad=this.options;var ac=ad.tmp.editDataList;var ae=J(ac,ad);return ae},addClassToRow:function(ac){},unSortListAdd:function(ac){var af=this;var ad=af.options;var ae=ad.sortData.unSortList;if(L.inArray(ac,ae)==-1){ad.sortData.unSortList.push(ac)}},unSortListRm:function(ac){var af=this;var ad=af.options;var ae=ad.sortData.unSortList;L.each(ae,function(ag,ah){if(ah==ac){ad.sortData.unSortList.splice(ag,1);return false}})},editThisRowColumn:function(ah,an,ac,ai){var aj=this;var af=aj.options;var ae=aj.getPrimaryKeyId(ah);var al=L(ah).parents("tr");var ak=-1;L.each(af.tableColumn.columns,function(ao,ap){if(ap.key==an){ak=ao;return true}});if(af.tableColumn.showCheckbox){ak++}var ag=al.find("td").eq(ak).find("div.tdWrap");var am=L.trim(ag.text());var ad=L('<input type="text" class="txtInput" maxlength="'+ac+'"/>');ad.val(am);ad.bind("blur",function(){var ao=L.trim(L(this).val());var ar={primaryKeyId:ae,primaryKey:af.primaryKey,key:an,"old-data":am,"new-data":ao};if(typeof ai!="undefined"){ai(ar)}var aq=ar["new-data"];ag.html(hdFai.encodeHtml(aq));if(aq!=am){var ap={};ap[an]=aq;aj.editData(ae,ap)}return false});ad.bind("keypress",function(ao){if(ao.keyCode==13){L(this).blur()}});ag.html(ad);setTimeout(function(){ad.focus()},1)},editFileName:function(ai,aq,ac,aj){var ak=this;var ag=ak.options;var af=ak.getPrimaryKeyId(ai);var an=L(ai).parents("tr");var am=-1;L.each(ag.tableColumn.columns,function(ar,at){if(at.key==aq){am=ar;return true}});if(ag.tableColumn.showCheckbox){am++}var ah=an.find("td").eq(am).find("div.tdWrap");var ap=L.trim(ah.text());var ao=ap.lastIndexOf(".");var al=ap.substring(ao);var ae=ap.substring(0,ao);var ad=L('<input type="text" class="txtInput" maxlength="'+ac+'"/>');ad.val(ae);ad.bind("blur",function(){var ar=L.trim(L(this).val());var au={primaryKeyId:af,primaryKey:ag.primaryKey,key:aq,"src-data":ap,"type-data":al,"name-data":ae,"new-data":ar};if(typeof aj!="undefined"){aj(au)}else{var at=au["new-data"];ah.html(hdFai.encodeHtml(at))}return false});ad.bind("keypress",function(ar){if(ar.keyCode==13){L(this).blur()}});ah.html(ad);setTimeout(function(){ad.focus()},1)},returnResultDataList:function(ag){var af=this;var ac=af.options;var ad=ac.tmp.result;var ae=J(ad,ac);if(ag){return ad}return ae},refreshHiddenList:function(ac){var af=this;var ae=af.element;var ad=af.options;if(L.isArray(ac)){ad.tableColumn.hiddenKeyList=ac}R(ae,ad);return true},refreshshowCountList:function(ad){var af=this;var ac=af.options;var ae=af.element;ad=parseInt(ad);if(isNaN(ad)||ac.page.showCount===ad){return}ac.page.showCount=ad;if(ac._openAjaxPage){ac.page.startPage=1;return M(ae,ac)}T(ae,ac)},lockAjaxPage:function(ad){var ae=this;var ac=ae.options;ac.ajaxPage._lock=ad},loadAjaxPage:function(ac){var af=this;var ad=af.options;var ae=af.element;if(ac){f(ae,ad)}else{b(ae,ad)}},abortAjaxPage:function(){var ad=this;var ac=ad.options;if(ac.ajaxPage._lastAjax){ac.ajaxPage._lastAjax.abort();ac.ajaxPage._lastAjax=null}},changeAjaxUrl:function(ac){var ag=this;var ad=ag.options;var af=ag.element;var ae=ac;if(L.type(ac)=="function"){ae=ac.call(ad,ad.ajaxPage.url)}if(L.type(ae)=="string"&&ae){ad.ajaxPage.url=ae;ad.page.startPage=1;M(af,ad)}},choiceList:function(ad){if(!L.isArray(ad)){return}var af=this;var ac=af.options;var ae=af.element;W(ae,ac,ad);if(ac.tableColumn.showCheckbox=="memory"){ac.tableColumn.checkboxList.addList(ad)}},dropDownVal:function(ad,ah){var ai=this.element;var af=ai.find("div.center>table>thead>tr").eq(0).find("th.dropDown").filter(function(){return L(this).data("key")==ad});if(af.length==0){console.warn("dropDownVal key not found key="+ad);return}var ae=af.find(".dropDownBox_sub");if(arguments.length==1){var ac=ae.data("dropVal");ac===undefined&&(ac=null);return ac}else{var ag=ae.data("dataObj");ae.find(".options[_index="+ag.vals.indexOf(ah)+"]").click()}},returnShowColumnKeys:function(){var ac=[];var ad=this.options;L.each(ad.tableColumn.columns,function(ae,af){if(af.isShow!==false){ac.push(af.key)}});return ac},updateCloneScrollTr:function(){return m(this.element)},getFaiTableData:function(){var ac=this.options;return z(ac)},showData:function(){T(this.element,this.options)}});function g(aj,af,ad){var ae=aj.options;var ai=aj.element;var ah=false;var ag=ae.tmp.searchMatcher;var ac=ad?"name":"uid";if(typeof af==="function"){ah=af(ag)}else{if(typeof af==="undefined"){ag.length=0;ah=true}else{if(!L.isArray(af)){af=[af]}L.each(af,function(ak,am){for(var ak=0;ak<ag.length;ak++){var al=ag[ak];if(ac in al&&al[ac]==am){ag.splice(ak--,1);ah=true;continue}}})}}if(ah){ae.page.startPage=1;if(ae._openAjaxPage){return M(ai,ae)}T(ai,ae)}}function T(ah,ae){var ad=[];if(typeof ae.dataList==="undefined"||ae.dataList===null){ae.dataList=[]}L(window).scrollTop(0);L.each(ae.dataList,function(ai,aj){if(typeof aj[ae.primaryKey]==="undefined"){ae.dataList[ai][ae.primaryKey]=ae.tmp.maxPrimaryKey;ae.tmp.maxPrimaryKey++}});var ag=ae.dataList;if(ae._openAjaxPage){var af=ag;L(ag).each(function(ai,aj){aj.showIndex=ai+(ae.page.startPage-1)*ae.page.showCount})}else{C(ah,ae);if(ae.tmp.searchMatcher.length>0){ag=ae.tmp.result}L(ag).each(function(ai,aj){aj.showIndex=ai});var af=I(ae,ag)}if(af.length>0){if(ah.find("div.center>table>thead>tr.trClone").length==0){m(ah)}L.each(af,function(aj,al){var ak="";var ai=al[ae.primaryKey];if(ae.tableRowsClass[ai]){ak=' class="'+ae.tableRowsClass[ai]+'"'}var am=ae.primaryKey+'="'+ai+'"';ad.push("<tr "+am+ak+">");if(ae.tableColumn.showCheckbox){var an="checkboxItem_"+ai;ad.push('<td class="checkBoxWidth textCenter"><input id="'+an+'" type="checkbox" value="" name="checkboxItem"><label for="'+an+'"></label></td>')}L.each(ae.tableColumn.columns,function(at,ar){if(ar.isShow===false){return}var aw=ar.key;var ap=al[aw];var ay=ar.rowClass;var au=ar.noShowHovreTips?"":"tmpShowHoverTips";var aq="";if(typeof ar.extData!="undefined"&&L.isFunction(ar.extData)){aq=ar.extData(ap,al)}else{if(typeof ar.encode=="undefined"||ar.encode){aq=hdFai.encodeHtml(ap)}else{aq=ap}}if(ar.custom){aq=ar.customData}if(ae.sortData.showSortBtn&&aw==ae.sortData.showColumnKey){aq='<div class="sortPanel"><a class="up pointer"></a><a class="down pointer"></a></div>';if(typeof ay!="undefined"){ay="sortWidth "+ay}else{ay="sortWidth"}}var av="";var ax="padding ellipsis tdWrap";if(typeof ay!="undefined"){av=ay+" ellipsis"}else{if(ae.tableColumn.rowClass){av=ae.tableColumn.rowClass+" ellipsis"}}av+=" "+au;var ao="";if(ar.onTitle){ao=' title="'+hdFai.encodeHtml(ap)+'"';if(ar.textArea){ao=' title="'+hdFai.encodeHtmlAttr(ap)+'"'}}if(ar.textArea){ax+=" textAreaWrap "}ad.push('<td class="'+av+'"'+ao+'><div class="'+ax+'">'+aq+"</div></td>")});ad.push("</tr>")})}else{var ac=e(ah);ad.push('<tr class="queryIngTr">');ad.push('<td class="padding" colspan="'+ac+'">'+ae.noDataMsg+"</td>");ad.push("</tr>")}ah.find("div.center>table>tbody").html(ad.join(""));if(hdFai.isIE6()||hdFai.isIE7()){P(ah);L(window).resize(function(){P(ah)})}if(ae.itemHover){y(ah)}X(ah,ae);if(ae.sortData.showSortBtn||ae.sortData.sortable){t(ah,ae)}if(ae.sortData.showSortBtn){U(ah);q(ah,ae)}if(ae.sortData.sortable){h(ah,ae)}S(ah);if(ae.bottom.show&&ae.bottom.showTotal){v(ah)}if(ae.bottom.show&&ae.bottom.showAllTotal){if(ae._openAjaxPage){ab(ah,ae.ajaxPage.totalCount,ae)}else{ab(ah,ae.tmp.result.length,ae)}}if(ae.bottom.show&&ae.bottom.showExtTotal){H(ah,ae)}if(ae.bottom.show&&ae.bottom.showPage){p(ah,ae)}if(ae.bottom.show&&ae.bottom.showPageJump){Q(ah,ae)}if(ae.tableColumn.showCheckbox){if(ae.tableColumn.showCheckbox=="memory"){W(ah,ae)}K(ah)}R(ah,ae)}function m(ad){var ac=ad.find("div.center>table>thead>tr.trClone");if(ac.length!=0){ac.remove()}ac=ad.find("div.center>table>thead>tr").clone();ac.removeClass("scrollFixedTr");ac.addClass("trClone hide");ad.find("div.center>table>thead>tr").addClass("scrollFixedTr");ad.find("div.center>table>thead").append(ac);return ac}function P(ag){ag.find("tr.fixIE6forFaiTable").remove();var ae=ag.width();var af=ag.find("table.faiTable").width();if((af-ae)>0){var ac=e(ag);var ad=[];ad.push('<tr class="fixIE6forFaiTable">');ad.push('<td colspan="'+ac+'"></td>');ad.push("</tr>");ag.find("table.faiTable").append(ad.join(""))}}function F(ah,af,ai,ag,ae){var ad=[];var ac=e(ah);ad.push('<tr class="queryIngTr">');ad.push('<td class="padding" colspan="'+ac+'"><div class="ajaxLoading1 queryIng">数据加载中...</div></td>');ad.push("</tr>");ah.find("div.center>table>tbody").html(ad.join(""));L.ajax({type:af.ajax.type,data:af.ajax.data,url:af.ajax.url,error:function(){ah.find("div.center>table>tbody td").html('<td colspan="'+ac+'"><div class="ajaxLoading1 queryIng">数据加载失败...</div></td>')},success:function(ak){var aj=L.parseJSON(L.trim(ak));af.dataList=aj;if(ai&&ag&&ae){af.dataList.sort(function(am,al){return hdFai.compareObjNew(am,al,ag,ae)})}T(ah,af)}})}function M(ae,ad){var ac=ad.ajaxPage;if(ac.synch){return f(ae,ad)}else{b(ae,ad)}}var b=L.throttle(f);function f(ai,af){var ag=af.ajaxPage;if(ag._lastAjax||ag._lock){return false}var am=e(ai);if(!ag._isLoadIng){var al=ai.find("div.center>table>tbody").height();ag._loadingTimer=setTimeout(function(){ag._isLoadIng=true;var ao=al?'style="height:'+al+'px;text-align:center;"':'style="text-align:center;"';var an='<tr class="queryIngTr" '+ao+'><td class="padding" colspan="'+am+'"><div class="queryIng">数据加载中...</div></td></tr>';ai.find("div.center>table>tbody").html(an)},200)}var ae=z(af);ai.find("div.bottom .page>a").addClass("disabledBtn");ai.find("div.bottom .pageJump>.jumpSubmit").addClass("disabled");var aj=L.toJSON(ae);var ak=function(aq,ar){ag._lastAjax=null;ag._isLoadIng=false;ai.find("div.bottom .pageJump>.jumpSubmit").removeClass("disabled");clearTimeout(ag._loadingTimer);if(typeof af.ajaxPage.regroup=="function"){var an=af.ajaxPage.regroup(aq,af);if(an&&typeof an=="object"){aq=an}}if(aq.success){af.ajaxPage.totalCount=aq.totalCount;var ap=af.page.showCount||aq.totalCount;af.tmp.maxPage=Math.ceil(aq.totalCount/ap);af.tmp.maxPage=isNaN(af.tmp.maxPage)?0:af.tmp.maxPage;af.dataList=aq.dataList;T(ai,af);if(ag.cache&&!ar){ag.cache.push({key:aj+af.ajaxPage.url,val:aq});if(ag.cache.length>50){ag.cache.shift()}}}else{if(!aq.msg){aq.msg="数据加载失败..."}else{if(aq.msg.indexOf("系统错误")>0){aq.msg="系统繁忙，请稍后重试"}}var ao='<tr class="queryIngTr"><td colspan="'+am+'"><div class="queryIng">'+aq.msg+"</div></td></tr>";ai.find("div.center>table>tbody").html(ao)}typeof ag.after==="function"&&ag.after(aq);ai.trigger("faiTableAfterPageAjax",[aq,af])};if(ag.cache){for(var ah=0,ad=ag.cache.length;ah<ad;ah++){var ac=ag.cache[ah];if(ac.key===(aj+af.ajaxPage.url)){ak(ac.val,true);return}}}ag._lastAjax=x(aj,af,ak)}function z(ae){var ac=ae.ajaxPage;var ag=L.extend(true,{},ac.faiTableData,ae.page);ag.showCount=parseInt(ag.showCount);ag.startPage=parseInt(ag.startPage);if(isNaN(ag.showCount)){ag.showCount=10}if(isNaN(ag.startPage)){ag.startPage=1}ag.sortKey=String(ag.sortKey);ag.sortAs=String(ag.sortAs);if(ag.showCountList){delete ag.showCountList}if(!ag.sortKey){delete ag.sortKey}if(!ag.sortAs){delete ag.sortAs}var af=L.extend(true,[],ae.tmp.searchMatcher);(function ad(ai){for(var ah=0;ah<ai.length;ah++){var aj=ai[ah];if(aj.cmd=="callBack"){ai.splice(ah--,1);continue}if(typeof aj.cmd!="string"){aj.cmd="like"}delete aj.useToLowerCase;delete aj.uid;delete aj.name;if(L.isArray(aj.nextSearch)){ad(aj.nextSearch)}}})(af);if(af.length>0){ag.searchMatcher=af}else{delete ag.searchMatcher}return ag}function x(ad,ac,af){var ae={faiTableData:ad};if(ac.ajaxPage.ajaxData){L.extend(ae,ac.ajaxPage.ajaxData)}return L.ajax({type:ac.ajaxPage.type,data:ae,url:ac.ajaxPage.url,error:function(ag,ah){if(ah==="abort"){return}af&&af({success:false})},success:function(ag){af&&af(L.parseJSON(L.trim(ag)))}})}function y(ac){ac.find("div.center>table>tbody>tr").hover(function(){L(this).addClass("hover")},function(){L(this).removeClass("hover")})}function X(ai,af){var ak=0;var an=0;var ac=false;var ae;var ag;var aj=ai.find("div.center>table>thead");var am=ai.find("div.center>table>thead th");var ah=ai.find("div.center>table>thead").find("th.expand");var ad=ah.find(".expandRightLine");var al=aj.find("th.pointer");ad.hover(function(){L(this).addClass("expanding")},function(){L(this).removeClass("expanding")});ad.mousedown(function(ao){ak=ao.pageX;ae=L(this).parents("th.expand");ag=L(this);an=ae.width();ac=true;aj.addClass("changeCursor");al.removeClass("pointer");ae.addClass("expanding");am.mousemove(function(ar){var aq=0;var ap=0;if(ac){aj.onselectstart=function(){return false};aq=parseInt(ar.pageX-ak);ap=parseInt(an+aq);ae.css({width:(ap<5)?"5px":ap+"px"})}})}).mousemove(function(aq){var ap=0;var ao=0;if(ac){aj.onselectstart=function(){return false};ap=parseInt(aq.pageX-ak);ao=parseInt(an+ap);ae.css({width:(ao<5)?"5px":ao+"px"})}});L(document).mouseup(function(ao){if(ac){ac=false;aj.removeClass("changeCursor");al.addClass("pointer");if(af.expandCookie!=""){L.cookie(af.expandCookie+ae.attr("data-key"),ae.width(),{expires:365,path:"/"})}}})}function a(ae,ad){var ac=ae.find("div.center>table>thead>tr>th");ac.each(function(af){if(L(this).attr("data-key")!=undefined){var ag=parseInt(L.cookie(ad.expandCookie+L(this).attr("data-key"),{path:"/"}))||0;if(ag!=0){L(this).css({width:ag+"px"})}}})}function t(ad,ac){ad.find("div.center>table>tbody>tr").each(function(){var ae=parseInt(L(this).attr(ac.primaryKey));if(L.inArray(ae,ac.sortData.unSortList)!=-1){L(this).removeClass("move").addClass("unSort").find(".sortPanel").remove()}})}function h(ad,ac){ad.find("div.center>table>tbody>tr").each(function(){if(!L(this).hasClass("queryIngTr unSort")){L(this).addClass("move")}});ad.sortable("destroy");ad.sortable({start:function(){var ae=e(ad);L(".sortablePlaceholder").append('<td colspan="'+ae+'"><div class="sortableHighlight"></div></td>')},axis:"y",placeholder:"sortablePlaceholder",items:"div.center>table>tbody>tr",distance:3,cancel:".queryIngTr, input, .unSort",stop:function(){S(ad);U(ad);if(ac.sortData.sortBack){ac.sortData.sortBack()}w(ad,ac)}});ad.disableSelection()}function S(ac){ac.find("div.center>table>tbody>tr").removeClass("even odd").each(function(ad,ae){if(ad%2==0){L(this).addClass("odd")}else{L(this).addClass("even")}})}function U(ad){var ac=ad.find("div.center>table>tbody>tr>td .sortPanel a.up");var ae=ad.find("div.center>table>tbody>tr>td .sortPanel a.down");ac.removeClass("disabled").first().addClass("disabled");ae.removeClass("disabled").last().addClass("disabled")}function w(ak,ag){var am=ag.dataList;var ae=ag.page.showCount;var af=ag.page.startPage;var ap=am.length;var ao=ae*(af-1);var ac=(ae*af)-1;var ad=ak.find("div.center>table>tbody>tr");var al=[];var an=[];if(ae==0){ac=ap-1;ao=0}if(ac>ap){ac=ap-1}for(var aj=ao;aj<=ac;aj++){al.push(am[aj])}L.each(ad,function(ar,at){var aq=L(at).attr(ag.primaryKey);L.each(al,function(au,av){if(aq==av[ag.primaryKey]){an.push(av);return false}})});var ah=0;for(var ai=ao;ai<=ac;ai++){am[ai]=an[ah];ah++}ag.dataList=am}function q(ae,ad){var ac=ae.find("div.center>table>tbody>tr>td .sortPanel a");ac.bind("click",function(){var af=L(this).parents("tr");if(L(this).hasClass("up")){af.insertBefore(af.prev())}else{if(L(this).hasClass("down")){af.insertAfter(af.next())}}U(ae);if(ad.sortData.sortBack){ad.sortData.sortBack()}w(ae,ad);S(ae)});U(ae)}function Q(ae,ad){var ac=(ad.tmp.maxPage+"").length;ae.find("div.bottom .pageJump .jumpInput").attr("maxlength",ac).val(ad.page.startPage)}function o(ad,ac){ad.find("div.bottom .pageJump").on("input",".jumpInput",function(ae){L(this).val(L(this).val().replace(/[^0-9]/g,""))}).on("blur",".jumpInput",function(){var ae=L(this).val();if(ae>ac.tmp.maxPage&&ac.tmp.maxPage!=0){L(this).val(ac.tmp.maxPage)}else{if(ae<1){L(this).val(1)}}}).on("click",".jumpSubmit",function(){if(L(this).hasClass("disabled")){return}var ae=parseInt(L(this).siblings(".jumpInput").val());if(isNaN(ae)||ac.page.startPage==ae){return}ac.page.startPage=ae;if(ac._openAjaxPage){return M(ad,ac)}T(ad,ac)})}function aa(ad,ac){HdPortal.hoverTipsBox.link({agent:[ad,"div.center>table>tbody>tr td.tmpShowHoverTips"],target:function(){var af=parseInt(L(this).css("line-height"));var ae=L(this).find(".tdWrap div");ae.length==0&&(ae=L(this).find(".tdWrap"));if(ae.height()>af*2&&L(this).find(".tdWrap .userPlayer img").length==0){L(this).css("cursor","pointer");return L(this).find(".tdWrap")}else{return false}},time:50},"up",function(){return L(this).html()},ac.tableColumn.hovreTipsOpts,"center")}function ab(ae,ac,ad){ad.bottom.showPageNumSelect?ae.find("div.bottom>.total>.allTotal").html("共有 "+ac+" 条记录 ，每页显示"):ae.find("div.bottom>.total>.allTotal").html("共有 "+ac+" 条记录")}function H(af,ae){var ac="";var ad=ae.bottom["showExtData"];if(typeof ad!="undefined"&&L.isFunction(ad)){ac=ae.bottom["showExtData"](ae.tmp.result)}af.find("div.bottom>.total>.extTotal").html(ac)}function v(ad){var ac=0;L.each(ad.find("div.center>table>tbody>tr"),function(){if(!L(this).hasClass("queryIngTr")){ac++}});ad.find("div.bottom>.total>.pageTotal").html("本页共"+ac+"个 ")}function B(ae,ad){var ac=ae.find("div.center>table>thead>tr>th.checkBoxWidth input.checkbox.all");ac.on("click",function(){var ag=L(this).is(":checked");var af=ae.find("div.center>table>tbody>tr>td.checkBoxWidth input");af.prop("checked",ag).parents("tr").toggleClass("checked",ag);if(ad.tableColumn.showCheckbox=="memory"){ad.tableColumn.checkboxList[ag?"addList":"notList"](L.map(af,function(ah){return L(ah).closest("tr").attr(ad.primaryKey)}))}});ae.on("click","td.checkBoxWidth input",function(ah,af){var ag=af||L(this).is(":checked");if(ag){L(this).parents("tr").addClass("checked")}else{L(this).parents("tr").removeClass("checked")}if(af){return}K(ae,ac);if(ad.tableColumn.showCheckbox=="memory"){ad.tableColumn.checkboxList[ag?"add":"not"](L(this).closest("tr").attr(ad.primaryKey))}})}function W(af,ac,ae){var ad=ae?hdFai.HdList(ae,true):ac.tableColumn.checkboxList,ag=[];if(ad.size()>0){af.find("div.center>table>tbody>tr>td.checkBoxWidth input").not(":checked").each(function(ah){var ai=L(this).closest("tr").attr(ac.primaryKey);if(ad.contains(ai)){L(this).trigger("click",[true]);ag.push(ai)}})}return ag}function K(ae,ad){ad=ad||ae.find("div.center>table>thead>tr>th.checkBoxWidth input.checkbox.all");var ac=ae.find("div.center>table>tbody>tr>td.checkBoxWidth input");if(ac.length==ac.filter(":checked").length){ad.prop("checked",true)}else{ad.prop("checked",false)}}function r(ad,ac){ad.find("div.center>table>thead>tr>th.sort").bind("click",function(){if(L(this).hasClass("expanding")){L(this).removeClass("expanding")}else{var af=L(this).attr("data-key");var ae="";if(L(this).hasClass("desc")){L(this).addClass("asc").removeClass("desc").siblings().removeClass("asc desc");ae="asc"}else{L(this).addClass("desc").removeClass("asc").siblings().removeClass("asc desc");ae="desc"}if(ac._openAjaxPage){ac.ajaxPage.faiTableData.sortKey=af;ac.ajaxPage.faiTableData.sortAs=ae;M(ad,ac);return}ac.dataList.sort(function(ah,ag){return hdFai.compareObjNew(ah,ag,ae,af)});T(ad,ac)}})}function O(ag,af){var ac=ag.find("div.center>table>thead>tr>th.dropDown");ac.on("click",function(am){am.stopPropagation();var al=L(this).find(".dropDownBox_sub");if(L(this).hasClass("expanding")){L(this).removeClass("expanding")}else{ag.find(".faiTable_poupBox").hide();ac.not(this).filter(".open").removeClass("open");if(!L(this).hasClass("open")){L(this).addClass("open");ad(al.show());al.find(".optionsSearch>input").focus();ah(al)}else{L(this).removeClass("open");al.hide()}}}).on("click",".dropDownBox_sub",function(al){al.stopPropagation()}).on("keydown ",".dropDownBox_sub .optionsSearch>input",function(ao){var an=L(this).closest(".dropDownBox_sub");if(ao.keyCode==38||ao.keyCode==40){if(an.data("keydownTimer")){return}var al,am=ao.keyCode==38?"prev":"next",ap=300;(function aq(ar){al=ae(an,am,al);if(!al){return}an.data("keydownTimer",setTimeout(aq,ap));if(ap>80){ap*=0.8}})()}}).on("keyup",".dropDownBox_sub .optionsSearch>input",function(am){var al=L(this).closest(".dropDownBox_sub");if(am.keyCode==13){al.find(".options.primary").click();return false}if(am.keyCode==38||am.keyCode==40){clearTimeout(al.data("keydownTimer"));al.removeData("keydownTimer");return false}ak(al,L(this).val())}).on("click",".dropDownBox_sub .options",function(an){var am=L(this).closest(".dropDownBox_sub");var ao=am.closest(".dropDown");var aq=am.data("dataObj");var ap=aq.vals[L(this).attr("_index")];if(ap!==am.data("dropVal")){am.data("dropVal",ap);ao.find(".padding").html(L(this).text()+'<span class="icon"></span>');if(aq.callBack){aq.callBack(ap)}else{var al;if(L.isPlainObject(ap)&&ap.searchString){al=L.extend(true,{},ap);al.uid=aq.dropId;ap=ap.searchString}if(ap==-1){ag.faiTable("rmSearchObj",aq.dropId)}else{ag.faiTable("searchString",al||{uid:aq.dropId,cmd:"eq",searchKeyList:[aq.key],searchString:ap,})}}}am.find(".primary").removeClass("primary");L(this).addClass("primary");ao.removeClass("open");am.hide()});if(af.tableColumn.columns.length>0){var aj=af.tableColumn.showCheckbox?1:0;var ai=0;L.each(af.tableColumn.columns,function(am,an){var ap=an.onDropDownList;if(ap&&ap.length>0){var al="";if(ap.search){al+='<div class="searchWarp"><div class="optionsSearch"><input type="text"></div><div class="noSearchMsg hide">没有数据</div></div>'}al+='<div class="optionsWarp">';L.each(ap,function(ar,at){al+='<div class="options" _index="'+ar+'">'+at[0]+"</div>"});al+="</div>";var ao=L('<div class="faiTable_poupBox dropDownBox_sub hide">'+al+"</div>");ag.find("div.center>table>thead>tr>th").eq(am+aj).append(ao);var aq={key:an.key,vals:L.map(ap,function(ar){return ar[1]}),callBack:an.onDropDownCallBack,dropId:10000+(++ai),};if(typeof ap.search=="function"){aq.search=ap.search}if(aq.callBack&&L.type(aq.callBack)=="string"){aq.key=aq.callBack;aq.callBack=null}ao.data("dataObj",aq).find(".options").eq(0).click();if(ap.search){ao.addClass("hasSearch")}}})}function ad(al){if(al.data("hasInitWidth")){return}al.width(al.find(".optionsWarp")[0].scrollWidth);al.data("hasInitWidth",true)}function ae(ao,an,am){var am=am||ao.find(".options.primary");var al=am;do{al=al[an]();if(al.length==0){return}}while(al.hasClass("hide"));am.removeClass("primary");al.addClass("primary");ah(ao,al);return al}function ah(ap,an){var ar=ap.find(".optionsWarp");an=an||ap.find(".options.primary");var al=an.height();var am=ap.find(".options").not(".hide").index(an);var aq=ar.scrollTop();var ao=ar.height();if(al*am<aq){ar.scrollTop(al*am)}else{if(al*(am+1)>aq+ao){ar.scrollTop(al*(am+1)-ao)}}}function ak(an,ap){var ao=an.data("dataObj");var am=an.find(".options");var aq=0;var al=null;am.each(function(ar,at){var av=L(this);var aw=av.attr("_index");var au=!!((ao.search&&ao.search(aw,ap))||av.text().indexOf(ap)!=-1);av.toggleClass("hide",!au);if(au&&!al){al=av}if(!au&&av.hasClass("primary")){av.removeClass("primary")}au&&aq++});if(al&&am.filter(".primary").length==0){al.addClass("primary")}an.find(".noSearchMsg").toggle(aq==0);ah(an)}}function A(ag,af){if(af.tableColumn.columns.length>0){var ae=c(ag,"_showColumnSelect");if(ae.size()==0){return}var ac=L('<div class="colOptionBox hide"></div>');var ad=L('<div class="scrollWrap"></div>');L.each(af.tableColumn.columns,function(ai,ak){var am=ak.key;if(am==="_showColumnSelect"||ak.canSetShow==false){return}var aj=ak.name;var ah="";if(ak.isShow!==false){ah='checked="true"'}var al=L('<div class="optionItem"><input id="col_check_'+am+'" class="checkContBtn" type="checkbox" '+ah+' data-key="'+am+'"><label title="'+aj+'" for="col_check_'+am+'">'+aj+"</label></div>");ad.append(al)});ac.append(ad);ae.append(ac);ae.on("click",function(ah){ah.stopPropagation();if(ac.is(":visible")){ac.hide();L(this).removeClass("open")}else{ac.show();L(this).addClass("open")}});ac.on("click",function(ah){ah.stopPropagation()});ac.on("change",".optionItem input",function(ak){var aj=L(this);var ai=aj.data("key");var ah=aj.is(":checked");u(ag,af,ai,ah)});L("body").click(function(){ac.hide();L(this).removeClass("open")})}}function u(ai,ah,ae,ac){var ad=ah.tableColumn.columns;var ag=N(ad,ae);if(ag==null){return}ag.isShow=ac;var af=c(ai,ae);if(ac){af.show()}else{af.hide()}E(ah,ae,ac);T(ai,ah)}function E(ae,ad,ac){var af=ae.colShowCookie+"_columnShow";var ag=G(ae);ag[ad]=ac;L.cookie(af,L.toJSON(ag),{expires:365,path:"/"})}function G(ac){var ad=ac.colShowCookie+"_columnShow";var ae=L.parseJSON(L.cookie(ad,{path:"/"}));if(!ae){ae={}}return ae}function Z(ae,ad){var ac=0}function c(ad,ac){return ad.find("div.center>table>thead>tr>th[data-key="+ac+"]")}function N(ae,ad){var af;for(var ac=0;ac<ae.length;ac++){af=ae[ac];if(af.key===ad){return af}}return af}function e(ad){var ac=ad.find("div.center>table>thead>tr").eq(0).find("th").length;return ac}function I(ae,ak){var ag=ae.page.startPage;var ad=ae.page.showCount;var af=ae.tmp.maxPage;var aj=[];if(ad==0){return ak}var ai=ak.length;if(ak&&ak.length>0){var ai=ak.length;af=ai%ad==0?(ai/ad):Math.floor(ai/ad)+1;ag=ag<1?1:ag;ag=ag>af?af:ag;ae.page.startPage=ag;var ah=((ag-1)*ad<0)?0:((ag-1)*ad);var ac=(ag+ad)<0?0:(ag+ad);ac=ac>ai?ai:(ah+ad);for(i=ah;i<ac;i++){if(typeof ak[i]!="undefined"){aj.push(ak[i])}}}else{af=1}ae.tmp.maxPage=af;return aj}function p(ae,ad){var ac=[];ac.push('<a href="javascript:;" hidefocus="true" class="prevPage disabledBtn"></a>');ac.push('<span class="currentPage">'+ad.page.startPage+" / "+ad.tmp.maxPage+"</span>");ac.push('<a href="javascript:;" hidefocus="true" class="nextPage disabledBtn"></a>');ae.find("div.bottom .page").html(ac.join(""));s(ae,ad)}function D(ai,ag){var ad="";L.each(ag.page.showCountList,function(aj,ak){ad+='<div class="options">'+ak+"</div>"});var ah=ai.find("div.bottom>div.total .dropDownBox");var ac=ai.find("div.bottom>div.total .dropDownBox .dropDownArea");var ae=ai.find("div.bottom>div.total .dropDownBox .optionsBox");ae.html("");ae.append(ad);ac.text(ag.page.showCount);var af=ah.find(".options");af.bind("click",function(aj){aj.stopPropagation();var al=parseInt(L(this).text());ac.text(al);var ak=ai.find(".center>table>thead");ak.find(".trClone").hide();ak.find(".scrollFixedTr").removeClass("headTrFixed");ai.faiTable("refreshshowCountList",al);ah.removeClass("open");ae.hide()});ac.bind("click",function(aj){aj.stopPropagation();ai.find(".faiTable_poupBox").hide();if(ae.is(":visible")){ae.hide();ah.removeClass("open")}else{ae.show();ah.addClass("open")}})}function s(ai,af){var ah=ai.find("div.bottom .page");var ag=ah.find("a.prevPage");var aj=ah.find("a.nextPage");var ae=af.page.startPage;var ad=af.page.showCount;var ac=af.tmp.maxPage;if(ae>1){ag.removeClass("disabledBtn")}if(ae<ac){aj.removeClass("disabledBtn")}if(!ag.hasClass("disabledBtn")){ag.addClass("pointer");ag.bind("click",function(){if(ag.hasClass("disabledBtn")){return}V(ai,af)})}if(!aj.hasClass("disabledBtn")){aj.addClass("pointer");aj.bind("click",function(){if(aj.hasClass("disabledBtn")){return}Y(ai,af)})}}function V(ae,ad){var ac=ad.page.startPage;if(ac-1>0){ac--}ad.page.startPage=ac;if(ad._openAjaxPage){return M(ae,ad)}T(ae,ad)}function Y(ah,ag){var af=ag.page.startPage;if(ag._openAjaxPage){if(af+1<=ag.tmp.maxPage){ag.page.startPage++}return M(ah,ag)}var ae=ag.page.showCount;var ac=ag.dataList.length;var ad=ac%ae==0?(ac/ae):Math.floor(ac/ae)+1;if(af+1<=ad){af++}ag.page.startPage=af;T(ah,ag)}function J(af,ac){if(L.isArray(af)){var ae=L.extend(true,[],af);L.each(ae,function(ag,ah){delete (ah[ac.primaryKey])});return ae}if(typeof af==="object"){var ad=L.extend(true,{},af);delete (ad[ac.primaryKey]);return ad}}function R(ag,ad){var ae=ag.find("div.center>table>thead>tr>th");var ac=ag.find("div.center>table>tbody>tr");var af=ad.tableColumn.hiddenKeyList;L.each(ae,function(ah){var ai=L(this).attr("data-key");L(this).removeClass("disabled");if(L.inArray(ai,af)!=-1){L(this).addClass("disabled")}L.each(ac,function(aj){L(this).find("td").eq(ah).removeClass("disabled");if(L.inArray(ai,af)!=-1){L(this).find("td").eq(ah).addClass("disabled")}})})}function C(ae,ad){var ac=[];L.each(ad.dataList,function(af,ag){if(d(ag,ad.tmp.searchMatcher)){ac.push(ag)}});ad.tmp.result=ac}function d(ad,ae){var ac=true;L.each(ae,function(aj,ai){var an=false;var am=aj&&ai.type?ai.type:"and";var ak=ai.nextSearch;if(ak){an=d(ad,ak)}else{var af=ai.searchKeyList;var ao=ai.searchString;var ag=ai.useToLowerCase;if(typeof ag==="undefined"){ag=true}var ah=ai.cmd;if(typeof ah=="undefined"){ah="like"}else{if(ah=="wd"){var al=RegExp("\b"+String(ao)+"\b")}else{if(/^key_(eq|ne|gt|lt|ge|le)$/.test(ah)){ah=ah.replace("key_","");ao=ad[ao];if(typeof ao==="undefined"){console.warn("this dataKey is undefined : cmd="+ah+" data="+L.toJSON(ad))}}}}L.each(af,function(ap,aq){var ar=ad[aq];if(ag&&typeof ao==="string"&&typeof ar==="string"){ar=ar.toString().toLowerCase();ao=ao.toString().toLowerCase()}else{if(typeof ar==="string"){ar=ar.toString()}else{if(typeof ar==="undefined"){ar=""}}}if(ah=="eq"){an=ar===ao}else{if(ah=="ne"){an=ar!==ao}else{if(ah=="gt"){an=ar>ao}else{if(ah=="lt"){an=ar<ao}else{if(ah=="ge"){an=ar>=ao}else{if(ah=="le"){an=ar<=ao}else{if(ah=="wd"){an=al.test(String(ar))}else{if(ah=="and"||ah=="land"){an=hdFai.checkBit(ar,ao)}else{if(ah=="land_ne"){an=!hdFai.checkBit(ar,ao)}else{if(ah=="inArray"||ah=="in"){an=L.inArray(ao,ar)>=0}else{if(ah=="callBack"&&typeof ai.callBack==="function"){an=ai.callBack(ad)}else{if(typeof ar!="string"){ar=ar.toString()}an=ar.indexOf(ao)>=0}}}}}}}}}}}if(an){return false}})}if(am==="and"){ac=ac&&an}else{ac=ac||an}});return ac}})(jQuery);(function(g){var b=new Array("00","33","66","99","CC","FF");var c=new Array("FF0000","00FF00","0000FF","FFFF00","00FFFF","FF00FF");function a(o){var n;if(o){hdFai.top.$("body").append('<div id="colorpanel" class="colorpanel"></div>');n=hdFai.top.$("#colorpanel")}else{g("body").append('<div id="colorpanel" class="colorpanel"></div>');n=g("#colorpanel")}var m="";for(i=0;i<2;i++){for(j=0;j<6;j++){m=m+"<tr height=12>";if(i==0){m=m+'<td width=11 style="background-color:#'+b[j]+b[j]+b[j]+';">'}else{m=m+'<td width=11 style="background-color:#'+c[j]+';">'}for(k=0;k<3;k++){for(l=0;l<6;l++){m=m+'<td width=11 style="background-color:#'+b[k+i*3]+b[l]+b[j]+';">'}}}}var p="";var q="";if(typeof hdFai!="undefined"&&typeof hdFai.top._resRoot!="undefined"){q=hdFai.top._resRoot}if(g.browser.msie&&/6.0/.test(navigator.userAgent)){p='<iframe frameborder="0" tabindex="-1" src="javascript:false" class="colorFrameBorder"/>'}m=p+'<div class="color_outsideBorder"><table width=229px border="0" cellspacing="0" cellpadding="0" style="background-color:#e8f3fe;" class="colorTableBody"><tr height=27><td colspan=21><table cellpadding="0" cellspacing="1" border="0" class="colorBorderCollapse"><tr><td width="3"><td><div class="DisColorBorder"><div id="DisColor" class="DisColor"></div><div></td><td width="3"><td id="is_Transparent"><input type="text" id="HexColor" size="7" class="HexColor" value="#000000"><a hidefocus="true" class="color_transparent" href="javascript:;" onclick="return false;" id="_cTransparent" title="透明色"></a><a hidefocus="true" class="color_sure" href="javascript:;" onclick="return false;" id="_cconfirm" title="确定"></a><a hidefocus="true" class="color_close" href="javascript:;" onclick="return false;" id="_cclose" title="关闭"></a></td></tr></table></td></table><div class="color_insideBorder"><div class="color_white"><table id="CT" border="1" cellspacing="0" cellpadding="0" class="colorBorderCollapse color_borderTableColor" bordercolor="000000">'+m+"</table></div></div></div>";n.html(m);n.mouseout(function(r){n.attr("mouseIn",0)});n.mouseover(function(r){n.attr("mouseIn",1)});n.focusout(function(){if(n.attr("mouseIn")==1){n.find("#HexColor").focus();return}n.remove()})}function h(){g("#colorpanel").remove()}function f(p,u,o,q,n,s,r){var m=g("#"+p);var t="";if(typeof hdFai!="undefined"&&typeof hdFai.top._resRoot!="undefined"){t=hdFai.top._resRoot}if(typeof n!="undefined"&&n!=null&&n!=""){m.css("background",n)}m.attr("title","点击选择颜色");g("#"+p).click(function(){var A=g(this).offset().top;var D=g(this).height();var v=g(this).offset().left;a(r);var C,I,B,z,H,w,G;if(r){C=hdFai.top.$("#DisColor");I=hdFai.top.$("#HexColor");B=hdFai.top.$("#colorpanel");z=hdFai.top.$("#CT tr td");H=hdFai.top.$("#_cTransparent");w=hdFai.top.$("#_cconfirm");G=hdFai.top.$("#_cclose")}else{C=g("#DisColor");I=g("#HexColor");B=g("#colorpanel");z=g("#CT tr td");H=g("#_cTransparent");w=g("#_cconfirm");G=g("#_cclose")}var E=m.css("background-color");C.css("background-color",E);if(E=="rgba(0, 0, 0, 0)"||E=="transparent"){I.val("")}else{E=d(E);I.val(E)}var y=A+D+o,F=v+q-4;if(r){var x=hdFai.top.$(".formDialog");if(x.length>0){y+=(x.offset().top+9);F+=(x.offset().left+26)}}B.css({top:y,left:F});if(A+D+o<0){B.css({top:"4px"})}B.show();z.unbind("click").mouseover(function(){var J=g(this).css("background-color");J=d(J);C.css("background-color",J);I.val(J)}).click(function(){if(u){var J=g(this).css("background-color");u(d(J))}J=d(J);m.css("background",J);m.css("border","1px solid #aab3bb");B.remove()});if(typeof s!="undefined"&&s==true){H.show();H.mouseover(function(){C.css("background-color","");I.val(null)}).click(function(){if(u){u("transparent");m.css("background","transparent")}B.remove()})}else{H.hide()}w.click(function(){if(u){var K=I.val();var J=false;if(K.indexOf("#")==0&&(K.length==4||K.length==7)){J=true}if(K!=""){K=d(K)}if(typeof s!="undefined"&&s==true&&K==""){K="transparent";J=true}if(J){u(K);m.css("background",K);m.css("border","1px solid #aab3bb")}B.remove()}});G.click(function(){B.remove()});B.find("#HexColor").focus();B.attr("mouseIn",0);I.keydown(function(J){if(g.browser.msie){if((event.keyCode==13)){w.click();return false}return true}else{if((J.which==13)){w.click();return false}return true}});I.bind("cut paste",function(){setTimeout(function(){var K=I.val();var J=false;if(K.indexOf("#")==0&&(K.length==4||K.length==7)){J=true}if(typeof s!="undefined"&&s==true&&K==""){K="transparent";J=true}if(J){C.css("background-color",K)}},10)});I.keyup(function(){var K=g(this).val();var J=false;if(K.indexOf("#")==0&&(K.length==4||K.length==7)){J=true}if(typeof s!="undefined"&&s==true&&K==""){K="transparent";J=true}if(J){C.css("background-color",K)}})})}function d(o){if(o.charAt(0)=="#"){return o}var q=Number(o);var p=o.split(/\D+/);var m=Number(p[1])*65536+Number(p[2])*256+Number(p[3]);return"#"+e(m,6)}function e(m,o){var n=m.toString(16);while(n.length<o){n="0"+n}return n}jQuery.extend({showcolor:function(r,s,p,n,q,m,o){f(r,s,p,n,q,m,o)}})})(jQuery);(function(c){c.fn.faiColorPicker=function(r){var q={base:this,target:this,baseattr:"background-color",targetattr:"background-color",defaultcolor:null,col1:["#ffffff","#dbdbdb","#9b9b9b","#4d4d4d","#161616","#000000"],col2:["#cbdeff","#69a1ff","#0f67ff","#0042b3","#01296e","#001e4d"],col3:["#c0b6ff","#6b55ff","#1f00fc","#1200a0","#0a015e","#08004b"],col4:["#d7b5ff","#9f56ff","#7000fc","#4800a0","#2b005c","#210049"],col5:["#f0bfdd","#e16cb3","#dd158f","#9c0061","#570035","#410028"],col6:["#ffcfc1","#ff835f","#ff3e07","#ac0000","#661500","#501100"],col7:["#ffe9c4","#ffc265","#ff9d0b","#b06900","#683f00","#4f2f00"],col8:["#fff6d5","#fee370","#ffd119","#bb9600","#765d00","#594601"],col9:["#e2efc3","#c0e073","#a4db1d","#719f00","#405a00","#314500"],colnormal:["#c00000","#ff0000","#ffc000","#ffff00","#94d152","#00af50","#01b0f1","#0172c2","#012060"],historyCookie:hdFai.top.$.cookie,advance:true,showInTop:false,onreset:c.noop,onchange:c.noop,onmousein:c.noop,id:this.selector,top:0,left:0};r=c.extend({},q,r);if(r.defaultcolor&&r.baseattr){o(r.base,r.baseattr,r.defaultcolor)}if(r.showInTop){r.$$=hdFai.top.$}else{r.$$=c}r.base.bind("click",{options:r,$$:r.$$},h)};function o(s,q,r){s.css(q,r);s.toggleClass("isTransparent",r=="transparent")}function h(r){r.stopPropagation();var A=r.data.$$;var D=r.data.options;A(".faiColorPicker").remove();var B=D.historyCookie("colorpicker_history")?decodeURIComponent(D.historyCookie("colorpicker_history")).split(","):[];var t="faiColorPicker"+Math.floor(Math.random()*1000);var z='<div class="faiColorPicker" id="'+t+'"><input type="text" id="faiColorPicker-hidden" /><div class="faiColorPicker-clearcolor"><div class="original-title">当前颜色:</div><div class="original-color" style="background-color:transparent;"></div><div class="original-clear" title="透明色"></div></div>';z+='<div class="faiColorPicker-colorcol">';for(var q=1,x;q<10;q++){x=D["col"+q];z+='<div class="col"><div class="col-color first"><div 	style="background-color:'+x[0]+'"></div></div><div class="col-color second"><div style="background-color:'+x[1]+'"></div></div><div class="col-color"><div 		style="background-color:'+x[2]+'"></div></div><div class="col-color"><div 		style="background-color:'+x[3]+'"></div></div><div class="col-color"><div 		style="background-color:'+x[4]+'"></div></div><div class="col-color last"><div 	style="background-color:'+x[5]+'"></div></div></div>'}z+="</div>";z+='<div class="faiColorPicker-colornormal"><div class="colornormal-title">标准颜色:</div><div class="colornormal-color">';var u=D.colnormal;for(var v=0;v<9;v++){z+='<div class="col"><div class="col-color normal"><div style="background-color:'+u[v]+'"></div></div></div>'}z+="</div></div>";z+='<div class="faiColorPicker-colorhistory"><div class="colorhistory-title">最近使用:</div><div class="colorhistory-color">';for(var v=0,w=B.length;v<w;v++){z+='<div class="col"><div class="col-color history"><div style="background-color:'+B[v]+';"></div></div></div>'}z+="</div></div>";if(D.advance){z+='<div class="faiColorPicker-coloradvance"><a class="coloradvance-btn" href="javascript:;">更多颜色</a></div>'}z+="</div>";A("body").append(z);A(".faiColorPicker-colorcol>.col").last().addClass("col-last");A(".faiColorPicker-colornormal>.colornormal-color>.col").last().addClass("col-last");A(".faiColorPicker-colorhistory>.colorhistory-color>.col").last().addClass("col-last");var y,s;if(D.showInTop){if(A(".formDialog").offset()){var C=A(".formDialog:last").offset();s=D.left+C.left+D.base.offset().left+D.base.width()/2;y=D.top+C.top+D.base.offset().top+D.base.height()/2+27}else{s=D.left+D.base.offset().left+D.base.width()/2;y=D.top+D.base.offset().top+D.base.height()/2}}else{s=D.left+D.base.offset().left+D.base.width()/2;y=D.top+D.base.offset().top+D.base.height()/2;if(c(window).height()-y<272){y=y-272}if(c(window).width()-s<206){s=s-206}}A(".faiColorPicker").css({left:s,top:y,"z-index":9999}).show();A(".faiColorPicker").click(function(E){E.stopPropagation()});A(".faiColorPicker").find("#faiColorPicker-hidden").focus();n(D)}function n(s){var r=s.$$;r(".original-color").css("background-color",s.target.css(s.targetattr));r(".col-color").unbind("click",m).bind("click",{$$:r,elm:s.target,targetattr:s.targetattr,onchange:s.onchange},m);r(".col-color").unbind("mouseenter",g).bind("mouseenter",{$$:r,elm:s.target,targetattr:s.targetattr,onmousein:s.onmousein},g);r(".original-clear").unbind("click",b).bind("click",{$$:r,elm:s.target,targetattr:s.targetattr,onchange:s.onchange,onreset:s.onreset},b);r(".coloradvance-btn").unbind("click",e).bind("click",{$$:r,elm:s.target,targetattr:s.targetattr,base:s.base,baseattr:s.baseattr,onchange:s.onchange},e);r("body").unbind("click",f).bind("click",{$$:r,elm:s.target,targetattr:s.targetattr},f);if(s.showInTop){c("body").unbind("click",f).bind("click",{$$:r,elm:s.target,targetattr:s.targetattr},f);var q=r(".faiColorPicker");q.mouseout(function(){q.attr("mouseIn",0)}).mouseover(function(){q.attr("mouseIn",1)}).focusout(function(){if(q.attr("mouseIn")==1){q.find("#faiColorPicker-hidden").focus();return}q.remove()})}}function m(s){s.stopPropagation();var r=s.data.$$;var q=r(this).find("div").css("background-color");q=d(q);p(q);o(s.data.elm,s.data.targetattr,q);r(".original-color").css("background-color",q);r(".faiColorPicker").remove();s.data.onchange.apply(s.data.elm,[q,a(q)])}function b(r){r.stopPropagation();var q=r.data.$$;o(r.data.elm,r.data.targetattr,"transparent");q(".original-color").css("background-color","transparent");r.data.onchange.apply(r.data.elm,["transparent","transparent"]);r.data.onreset.apply(r.data.elm,[this])}function g(s){var r=s.data.$$;var q=c(this).find("div").css("background-color");q=d(q);r(".original-color").css("background-color",q);s.data.onmousein.apply(s.data.elm,[q,a(q)])}function f(r){var q=r.data.$$;q(".faiColorPicker").remove()}function e(s){s.stopPropagation();var q=s.data.$$;q(".faiColorPicker").remove();var r=hdFai.popupWindow({title:"高级颜色选项",width:470,height:260,divId:"AdvanceFaiColorPicker",divContent:'<div class="AdvanceColorPicker"><script type="text/javascript">$(".AdvanceColorPicker").ColorPicker({flat: true , color:"'+d(s.data.elm.css(s.data.targetattr))+'"});<\/script></div>'});c(hdFai.top.document.getElementById("popupWindow"+r)).find(".colorpicker_cancel").unbind("click").bind("click",function(){hdFai.closePopupWindow(r)});c(hdFai.top.document.getElementById("popupWindow"+r)).find(".colorpicker_submit").unbind("click").bind("click",{base:s.data.base,baseattr:s.data.baseattr,onchange:s.data.onchange},function(u){var t="#"+(c(hdFai.top.document.getElementsByClassName("colorpicker_hex")).find("input").val());console.log(t);o(u.data.base,u.data.baseattr,t);u.data.onchange(t,a(t));p(t);hdFai.closePopupWindow(r)});return false}function d(q){if(/#/g.test(q)){return q}q=(q.replace(/[rgba\(\)]/g,"")).split(",");var t=["#"];for(var r=0,s;r<3;r++){s=parseInt(q[r]).toString(16);if(s.length===1){s="0"+s}t.push(s)}return t.join("")}function a(r){if(/rgb/gi.test(r)){return r}r=parseInt(r.substring(1),16);var q=["rgb(",r>>16,",",(r&65280)>>8,",",(r&255),")"];return q.join("")}function p(r){var u=hdFai.top.$.cookie("colorpicker_history");var s=u?decodeURIComponent(u).split(","):[],t=s.join(),q=new RegExp(r,"gi");if(q.test(t)){return}if(s.length>8){s.pop();s.unshift(r);hdFai.top.$.cookie("colorpicker_history",encodeURIComponent(s))}else{s.unshift(r);hdFai.top.$.cookie("colorpicker_history",encodeURIComponent(s))}}})(jQuery);(function(b){var a=function(){var ac={},c,X=65,B,Z=['<div class="colorpicker">','<div class="colorpicker_color">',"<div>","<div></div>","</div>","</div>",'<div class="colorpicker_hue">',"<div></div>","</div>",'<div class="colorpicker_new_color_title">新增</div>','<div class="colorpicker_current_color_title">当前</div>','<div class="colorpicker_new_color"></div>','<div class="colorpicker_current_color"></div>','<div class="colorpicker_hex">','<span> #</span><input type="text" maxlength="6" size="6" />',"</div>",'<div class="colorpicker_rgb_r colorpicker_field">','<i class="colorpicker_field_title">红(R):</i> ','<input type="text" maxlength="3" size="3" class="numeric" />','<span><i class="colorpicker_rgbnum_add"></i><i class="colorpicker_rgbnum_reduce"></i></span>',"</div>",'<div class="colorpicker_rgb_g colorpicker_field">','<i class="colorpicker_field_title">绿(G):</i>','<input type="text" maxlength="3" size="3" class="numeric" />','<span><i class="colorpicker_rgbnum_add"></i><i class="colorpicker_rgbnum_reduce"></i></span>',"</div>",'<div class="colorpicker_rgb_b colorpicker_field">','<i class="colorpicker_field_title">蓝(B):</i>','<input type="text" maxlength="3" size="3" class="numeric" />','<span><i class="colorpicker_rgbnum_add"></i><i class="colorpicker_rgbnum_reduce"></i></span>',"</div>",'<div class="colorpicker_hsb_h colorpicker_field">','<i class="colorpicker_field_title">色相(H):</i>','<input type="text" maxlength="3" size="3" class="numeric"/>','<span><i class="colorpicker_hsbnum_add"></i><i class="colorpicker_hsbnum_reduce"></i></span>',"</div>",'<div class="colorpicker_hsb_s colorpicker_field">','<i class="colorpicker_field_title">饱和度(S):</i>','<input type="text" maxlength="3" size="3" class="numeric"/>','<span><i class="colorpicker_hsbnum_add"></i><i class="colorpicker_hsbnum_reduce"></i></span>',"</div>",'<div class="colorpicker_hsb_b colorpicker_field">','<i class="colorpicker_field_title">亮度(B):</i>','<input type="text" maxlength="3" size="3" class="numeric"/>','<span><i class="colorpicker_hsbnum_add"></i><i class="colorpicker_hsbnum_reduce"></i></span>',"</div>",'<div class="colorpicker_submit abutton faiButton saveButton">确定</div>','<div class="colorpicker_cancel abutton faiButton cancelButton ">取消</div>',"</div>"].join(""),K={eventName:"click",onShow:b.noop,onBeforeShow:b.noop,onHide:b.noop,color:"ff0000",livePreview:true,flat:false},S=function(ad,af){var ae=p(ad);b(af).data("colorpicker").fields.eq(1).val(ae.r).end().eq(2).val(ae.g).end().eq(3).val(ae.b).end()},C=function(ad,ae){b(ae).data("colorpicker").fields.eq(4).val((ad.h).toFixed(0)).end().eq(5).val((ad.s).toFixed(0)).end().eq(6).val((ad.b).toFixed(0)).end()},h=function(ad,ae){b(ae).data("colorpicker").fields.eq(0).val(ab(ad)).end()},s=function(ad,ae){b(ae).data("colorpicker").selector.css("backgroundColor","#"+ab({h:ad.h,s:100,b:100}));b(ae).data("colorpicker").selectorIndic.css({left:parseInt(150*ad.s/100,10),top:parseInt(150*(100-ad.b)/100,10)})},P=function(ad,ae){b(ae).data("colorpicker").hue.css("top",parseInt(150-150*ad.h/360,10))},m=function(ad,ae){b(ae).data("colorpicker").currentColor.css("backgroundColor","#"+ab(ad))},N=function(ad,ae){b(ae).data("colorpicker").newColor.css("backgroundColor","#"+ab(ad))},v=function(ad){var af=ad.charCode||ad.keyCode||-1;if((af>X&&af<=90)||af==32){return false}var ae=b(this).parent().parent();if(ae.data("colorpicker").livePreview===true){e.apply(this)}},e=function(ae){var af=b(this).parent().parent(),ad;if(this.parentNode.className.indexOf("_hex")>0){af.data("colorpicker").color=ad=t(H(this.value))}else{if(this.parentNode.className.indexOf("_hsb")>0){af.data("colorpicker").color=ad=g({h:af.data("colorpicker").fields.eq(4).val(),s:af.data("colorpicker").fields.eq(5).val(),b:af.data("colorpicker").fields.eq(6).val()})}else{af.data("colorpicker").color=ad=n(U({r:af.data("colorpicker").fields.eq(1).val(),g:af.data("colorpicker").fields.eq(2).val(),b:af.data("colorpicker").fields.eq(3).val()}))}}if(ae){S(ad,af.get(0));h(ad,af.get(0));C(ad,af.get(0))}s(ad,af.get(0));P(ad,af.get(0));N(ad,af.get(0))},w=function(ae){var af=b(this).parent().parent();var ad=ad=af.data("colorpicker").color;af.data("colorpicker").fields.parent().removeClass("colorpicker_focus");S(ad,af.get(0));C(ad,af.get(0));h(ad,af.get(0));P(ad,af.get(0));s(ad,af.get(0));N(ad,af.get(0))},T=function(){X=this.parentNode.className.indexOf("_hex")>0?70:65;b(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus");b(this).parent().addClass("colorpicker_focus")},R=function(ad){ad.stopPropagation();var af=b(this).parent().find("input").focus();var ae={el:b(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:(this.parentNode.className.indexOf("_hsb")>0?100:255),y:ad.pageY,field:af,val:parseInt(af.val(),10),preview:b(this).parent().parent().data("colorpicker").livePreview};b(document).bind("mouseup",ae,A);b(document).bind("mousemove",ae,V)},V=function(ad){ad.data.field.val(Math.max(0,Math.min(ad.data.max,parseInt(ad.data.val+ad.pageY-ad.data.y,10))));if(ad.data.preview){e.apply(ad.data.field.get(0),[true])}return false},A=function(ad){e.apply(ad.data.field.get(0),[true]);ad.data.el.removeClass("colorpicker_slider").find("input").focus();b(document).unbind("mouseup",A);b(document).unbind("mousemove",V);return false},u=function(ad){ad.stopPropagation();var ae=b(this).parent().parent().find("input").focus();ae.val(parseInt(ae.val())+3);e.apply(b(this).parent().get(0),[true])},f=function(ad){ad.stopPropagation();var ae=b(this).parent().parent().find("input").focus();ae.val(parseInt(ae.val())-3);e.apply(b(this).parent().get(0),[true])},Y=function(ad){ad.stopPropagation();var ae=b(this).parent().parent().find("input").focus();ae.val(parseInt(ae.val())+1);e.apply(b(this).parent().get(0),[true])},G=function(ad){ad.stopPropagation();var ae=b(this).parent().parent().find("input").focus();ae.val(parseInt(ae.val())-1);e.apply(b(this).parent().get(0),[true])},E=function(ad){ad.stopPropagation();var ae={cal:b(this).parent(),y:b(this).offset().top};ae.preview=ae.cal.data("colorpicker").livePreview;e.apply((ae.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,(ad.pageY-ae.y))))/150,10)).get(0)),[true]);b(document).bind("mouseup",ae,z);b(document).bind("mousemove",ae,q)},q=function(ad){e.apply(ad.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,(ad.pageY-ad.data.y))))/150,10)).get(0),[ad.data.preview]);return false},z=function(ad){S(ad.data.cal.data("colorpicker").color,ad.data.cal.get(0));h(ad.data.cal.data("colorpicker").color,ad.data.cal.get(0));b(document).unbind("mouseup",z);b(document).unbind("mousemove",q);return false},F=function(ad){ad.stopPropagation();var ae={cal:b(this).parent(),pos:b(this).offset()};ae.preview=ae.cal.data("colorpicker").livePreview;e.apply(ae.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,(ad.pageY-ae.pos.top))))/150,10)).end().eq(5).val(parseInt(100*(Math.max(0,Math.min(150,(ad.pageX-ae.pos.left))))/150,10)).get(0),[true]);b(document).bind("mouseup",ae,J);b(document).bind("mousemove",ae,y)},y=function(ad){e.apply(ad.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,(ad.pageY-ad.data.pos.top))))/150,10)).end().eq(5).val(parseInt(100*(Math.max(0,Math.min(150,(ad.pageX-ad.data.pos.left))))/150,10)).get(0),[ad.data.preview]);return false},J=function(ad){S(ad.data.cal.data("colorpicker").color,ad.data.cal.get(0));h(ad.data.cal.data("colorpicker").color,ad.data.cal.get(0));b(document).unbind("mouseup",J);b(document).unbind("mousemove",y);return false},D=function(ad){b(this).addClass("saveButton-hover")},aa=function(ad){b(this).removeClass("saveButton-hover")},x=function(ae){var af=b(this).parent();var ad=af.data("colorpicker").color;af.data("colorpicker").origColor=ad;m(ad,af.get(0))},r=function(ad){b(this).addClass("cancelButton-hover")},o=function(ad){b(this).removeClass("cancelButton-hover")},M=function(ad){var ah=b("#"+b(this).data("colorpickerId"));ah.data("colorpicker").onBeforeShow.apply(this,[ah.get(0)]);var ai=b(this).offset();var ag=I();var af=ai.top+this.offsetHeight;var ae=ai.left;if(af+176>ag.t+ag.h){af-=this.offsetHeight+176}if(ae+356>ag.l+ag.w){ae-=356}ah.css({left:ae+"px",top:af+"px"});if(ah.data("colorpicker").onShow.apply(this,[ah.get(0)])!=false){ah.show()}b(document).bind("mousedown",{cal:ah},W);return false},W=function(ad){if(!Q(ad.data.cal.get(0),ad.target,ad.data.cal.get(0))){if(ad.data.cal.data("colorpicker").onHide.apply(this,[ad.data.cal.get(0)])!=false){ad.data.cal.hide()}b(document).unbind("mousedown",W)}},Q=function(af,ae,ad){if(af==ae){return true}if(af.contains){return af.contains(ae)}if(af.compareDocumentPosition){return !!(af.compareDocumentPosition(ae)&16)}var ag=ae.parentNode;while(ag&&ag!=ad){if(ag==af){return true}ag=ag.parentNode}return false},I=function(){var ad=document.compatMode=="CSS1Compat";return{l:window.pageXOffset||(ad?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(ad?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(ad?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(ad?document.documentElement.clientHeight:document.body.clientHeight)}},g=function(ad){return{h:Math.min(360,Math.max(0,ad.h)),s:Math.min(100,Math.max(0,ad.s)),b:Math.min(100,Math.max(0,ad.b))}},U=function(ad){return{r:Math.min(255,Math.max(0,ad.r)),g:Math.min(255,Math.max(0,ad.g)),b:Math.min(255,Math.max(0,ad.b))}},H=function(af){var ad=6-af.length;if(ad>0){var ag=[];for(var ae=ad;ae--;){ag.push("0")}ag.push(af);af=ag.join("")}return af},d=function(ad){var ad=parseInt(((ad.indexOf("#")>-1)?ad.substring(1):ad),16);return{r:ad>>16,g:(ad&65280)>>8,b:(ad&255)}},t=function(ad){return n(d(ad))},n=function(af){var ae={h:0,s:0,b:0};var ag=Math.min(af.r,af.g,af.b);var ad=Math.max(af.r,af.g,af.b);var ah=ad-ag;ae.b=ad;ae.s=ad!=0?255*ah/ad:0;if(ae.s!=0){if(af.r==ad){ae.h=(af.g-af.b)/ah}else{if(af.g==ad){ae.h=2+(af.b-af.r)/ah}else{ae.h=4+(af.r-af.g)/ah}}}else{ae.h=-1}ae.h*=60;if(ae.h<0){ae.h+=360}ae.s*=100/255;ae.b*=100/255;return{h:parseFloat(ae.h,2),s:ae.s,b:ae.b}},p=function(ae){var af={};var aj=Math.round(ae.h);var ai=Math.round(ae.s*255/100);var ad=Math.round(ae.b*255/100);if(ai==0){af.r=af.g=af.b=ad}else{var ak=ad;var ah=(255-ai)*ad/255;var ag=(ak-ah)*(aj%60)/60;if(aj==360){aj=0}if(aj<60){af.r=ak;af.b=ah;af.g=ah+ag}else{if(aj<120){af.g=ak;af.b=ah;af.r=ak-ag}else{if(aj<180){af.g=ak;af.r=ah;af.b=ah+ag}else{if(aj<240){af.b=ak;af.r=ah;af.g=ak-ag}else{if(aj<300){af.b=ak;af.g=ah;af.r=ah+ag}else{if(aj<360){af.r=ak;af.g=ah;af.b=ak-ag}else{af.r=0;af.g=0;af.b=0}}}}}}}return{r:Math.round(af.r),g:Math.round(af.g),b:Math.round(af.b)}},L=function(ad){var ae=[ad.r.toString(16),ad.g.toString(16),ad.b.toString(16)];b.each(ae,function(af,ag){if(ag.length==1){ae[af]="0"+ag}});return ae.join("")},ab=function(ad){return L(p(ad))},O=function(){var ae=b(this).parent();var ad=ae.data("colorpicker").origColor;ae.data("colorpicker").color=ad;S(ad,ae.get(0));h(ad,ae.get(0));C(ad,ae.get(0));s(ad,ae.get(0));P(ad,ae.get(0));N(ad,ae.get(0))};return{init:function(ad){ad=b.extend({},K,ad||{});if(typeof ad.color=="string"){ad.color=t(ad.color)}else{if(ad.color.r!=undefined&&ad.color.g!=undefined&&ad.color.b!=undefined){ad.color=n(ad.color)}else{if(ad.color.h!=undefined&&ad.color.s!=undefined&&ad.color.b!=undefined){ad.color=g(ad.color)}else{return this}}}return this.each(function(){if(!b(this).data("colorpickerId")){var ae=b.extend({},ad);ae.origColor=ad.color;var ag="colorpicker_"+parseInt(Math.random()*1000);b(this).data("colorpickerId",ag);var af=b(Z).attr("id",ag);if(ae.flat){af.appendTo(this).show()}else{af.appendTo(document.body)}ae.fields=af.find("input").bind("keyup",v).bind("change",e).bind("blur",w).bind("focus",T);ae=b.extend({},ae,{el:this,selector:af.find("div.colorpicker_color").bind("mousedown",F),selectorIndic:af.find("div.colorpicker_color").find("div div"),hue:af.find("div.colorpicker_hue div"),newColor:af.find("div.colorpicker_new_color"),currentColor:af.find("div.colorpicker_current_color")});af.find("div.colorpicker_hue").bind("mousedown",E);af.find("i.colorpicker_hsbnum_add").bind("click",Y);af.find("i.colorpicker_hsbnum_reduce").bind("click",G);af.find("i.colorpicker_rgbnum_add").bind("click",u);af.find("i.colorpicker_rgbnum_reduce").bind("click",f);af.find(">div.colorpicker_current_color").bind("click",O);af.data("colorpicker",ae);af.find(".numeric").numeric({negative:false});af.find("div.colorpicker_submit").bind("mouseenter",D).bind("mouseleave",aa).bind("click",x);af.find("div.colorpicker_cancel").bind("mouseenter",r).bind("mouseleave",o);S(ae.color,af.get(0));C(ae.color,af.get(0));h(ae.color,af.get(0));P(ae.color,af.get(0));s(ae.color,af.get(0));m(ae.color,af.get(0));N(ae.color,af.get(0));if(ae.flat){af.css({position:"relative",display:"block"})}else{b(this).bind(ae.eventName,M)}}})},showPicker:function(){return this.each(function(){if(b(this).data("colorpickerId")){M.apply(this)}})},hidePicker:function(){return this.each(function(){if(b(this).data("colorpickerId")){b("#"+b(this).data("colorpickerId")).hide()}})},setColor:function(ad){if(typeof ad=="string"){ad=t(ad)}else{if(ad.r!=undefined&&ad.g!=undefined&&ad.b!=undefined){ad=n(ad)}else{if(ad.h!=undefined&&ad.s!=undefined&&ad.b!=undefined){ad=g(ad)}else{return this}}}return this.each(function(){if(b(this).data("colorpickerId")){var ae=b("#"+b(this).data("colorpickerId"));ae.data("colorpicker").color=ad;ae.data("colorpicker").origColor=ad;S(ad,ae.get(0));C(ad,ae.get(0));h(ad,ae.get(0));P(ad,ae.get(0));s(ad,ae.get(0));m(ad,ae.get(0));N(ad,ae.get(0))}})}}}();b.fn.extend({ColorPicker:a.init,ColorPickerHide:a.hidePicker,ColorPickerShow:a.showPicker,ColorPickerSetColor:a.setColor})})(jQuery);(function(a){a.fn.initSlider=function(b){if(!this){return}var d={initStartIndex:100,initStart:0,endStart:100,unit:"%",refreshFn:null,saveValueFn:null,styleChangeFn:null};a.extend(d,b);var h='<div class="slider_outside"><div class="slider_stay"><div class="slider_move" style="position:absolute;"></div></div><div class="slider_value">100%</div></div>';if(a(this).find(".slider_outside").length===0){a(this).append(h)}else{if(f(d.refreshFn)){d.refreshFn(d.initStartIndex)}}var e=parseInt(a(".slider_stay").width())-parseInt(a(".slider_move").width()),g=false,c=e/(d.endStart-d.initStart);a(".slider_value").text(d.initStartIndex+d.unit);if(d.initStartIndex===d.initStart){a(".slider_move").css("left",0+"px")}else{if(d.initStartIndex===d.endStart){a(".slider_move").css("left",e+"px")}else{a(".slider_move").css("left",(d.initStartIndex-d.initStart)*c+"px")}}a(".slider_move").draggable({handler:".slider_move",axis:"x",containment:"parent",stop:function(){},drag:function(){var n=parseInt(this.style.left);var m=Math.ceil(n/c)+d.initStart;if(m<d.initStart){m=d.initStart}if(m>d.endStart){m=d.endStart}a(".slider_value").text(m+d.unit);if(f(d.refreshFn)){d.refreshFn(m)}if(!g&&f(d.styleChangeFn)){d.styleChangeFn();g=true}if(f(d.saveValueFn)){d.saveValueFn(m)}}});function f(m){return Object.prototype.toString.call(m)==="[object Function]"}}})(jQuery);(function(a){var c=[{first:"SimSun",second:"宋体"},{first:"PMingLiU",second:"新细明体"},{first:"FangSong_GB2312",second:"仿宋_GB2312"},{first:"微软雅黑",second:"微软雅黑"},{first:"隶书",second:"隶书"},{first:"幼圆",second:"幼圆"},{first:"STKaiti",second:"华文楷体"},{first:"方正舒体",second:"方正舒体"},{first:"华文彩云",second:"华文彩云"},{first:"华文行楷",second:"华文行楷"},{first:"华文宋体",second:"华文宋体"},{first:"Arial",second:"Arial"},{first:"Tahoma",second:"Tahoma"},{first:"impact",second:"impact"},{first:"Arial Serif",second:"Arial Serif"},{first:"Georgia",second:"Georgia"},{first:"Garamond",second:"Garamond"},{first:"Times New Roman",second:"Times New Roman"}];a.fn.fontFamilySelect=function(h){var m={type:0,defaultValue:"SimSun",defaultValueIndex:0,refreshFn:null,styleChangeFn:null,fontfamily:null};a.extend(m,h);m.fontfamily=m.fontfamily||c;var o=0;var n=['<div id="f_family_select',m.type,'" class="f_family_select">','<div class="f_family_body"></div>','<div class="f_family_button"></div>',"</div>"];n=n.join("");var g;if(a("#f_family_select"+m.type).length===0){a(this).append(n);n=a("#f_family_select"+m.type);g=['<div id="f_family_menu',m.type,'" class="f_family_menu" style="display:none;">','<div id="f_family_content" class="f_family_content">'];var f="";a.each(m.fontfamily,function(q,p){if(p.first===m.defaultValue){m.defaultValueIndex=q;f=" f_selected"}g.push("<div class='f_family_option"+f+"' style='font-family:"+p.first+"' _value='"+p.first+"' title='"+p.second+"'>"+p.second+"</div>");f=""});g.push("</div></div>");g=g.join("");if(a("body").find("#f_family_menu"+m.type).length===0){a("body").append(g)}}else{n=a("#f_family_select"+m.type);if(b(m.refreshFn)){m.refreshFn(m.defaultValue)}n.find(".f_family_button").removeClass("f_b_selected");a("#f_family_menu"+m.type).hide();a("#f_family_menu"+m.type).find(".f_selected").removeClass("f_selected")}g=a("#f_family_menu"+m.type);f_family_button=n.find(".f_family_button");n.find(".f_family_body").html(m.fontfamily[m.defaultValueIndex].second);n.find(".f_family_body").attr("title",m.fontfamily[m.defaultValueIndex].second);f_family_button.mousemove(function(){a(this).addClass("f_b_hover")}).mouseleave(function(){a(this).removeClass("f_b_hover")});n.unbind("click").bind("click",function(){if(!g.attr("_isPos")){var q=n.offset();g.offset({top:q.top+21,left:q.left});g.attr("_isPos",1)}var p=a(this).find(".f_family_button");if(p.hasClass("f_b_selected")){g.hide();p.removeClass("f_b_selected")}else{g.show();p.addClass("f_b_selected")}});a(document).bind("click",function(q){var p=a(q.target);if(p.closest(".f_family_body, .f_family_button").length==0){g.hide();n.find(".f_family_button").removeClass("f_b_selected")}q.stopPropagation()});var e=a(".ui-tabs").find(".ui-state-default a");if(e.length>0){e.on("click",function(){g.hide();n.find(".f_family_button").removeClass("f_b_selected");return})}var d=g.find(".f_family_content").children();a(d).mousemove(function(){a(this).addClass("f_hover")}).mouseleave(function(){a(this).removeClass("f_hover")}).click(function(){n.find(".f_family_body").html(a(this).html());n.find(".f_family_body").attr("title",a(this).html());g.find(".f_selected").removeClass("f_selected");a(this).addClass("f_selected");if(b(m.refreshFn)){m.refreshFn(a(this).attr("_value"))}if(b(m.styleChangeFn)){m.styleChangeFn()}})};a.fn.fontSzieSlider=function(g){var n={type:0,initStartIndex:12,initStart:12,endStart:60,space:1,refreshFn:null,styleChangeFn:null};a.extend(n,g);var d=['<div id="f_size_select'+n.type+'" class="f_size_select">','<div class="f_size_body"></div>','<div class="f_size_button"></div>',"</div>"];d=d.join("");if(a(this).find("#f_size_select"+n.type).length===0){a(this).append(d)}else{if(b(n.refreshFn)){n.refreshFn(n.initStartIndex)}a("#f_size_menu"+n.type).hide();a("#f_size_select"+n.type).find(".f_size_button").removeClass("f_b_selected")}d=a("#f_size_select"+n.type);var e=['<div id="f_size_menu',n.type,'" class="f_size_menu" style="display:none;" >','<div class="f_slider_stay">','<div class="f_slider_strip"></div>','<div class="f_slider_move"></div>',"</div>","</div>"];e=e.join("");if(a("body").find("#f_size_menu"+n.type).length===0){a("body").append(e)}e=a("#f_size_menu"+n.type);d.find(".f_size_body").html(n.initStartIndex+"px");d.find(".f_size_button").mousemove(function(){a(this).addClass("f_b_hover")}).mouseleave(function(){a(this).removeClass("f_b_hover")});d.unbind("click").bind("click",function(){if(!e.attr("_isPos")){var q=d.offset();e.offset({top:q.top+21,left:q.left});e.attr("_isPos",1)}var p=d.find(".f_size_button");if(p.hasClass("f_b_selected")){e.hide();p.removeClass("f_b_selected")}else{e.show();p.addClass("f_b_selected")}});a(document).bind("click",function(q){var p=a(q.target);if(p.closest(".f_size_body, .f_size_button, #f_size_menu"+n.type).length==0){e.hide();d.find(".f_size_button").removeClass("f_b_selected")}q.stopPropagation()});var f=a(".ui-tabs").find(".ui-state-default a");if(f.length>0){f.on("click",function(){e.hide();d.find(".f_size_button").removeClass("f_b_selected");return})}var o=parseInt(e.find(".f_slider_stay").height())-parseInt(e.find(".f_slider_move").height()),m=o/(n.endStart-n.initStart);var h=e.find(".f_slider_move");h.text(n.initStartIndex+"px");if(n.initStartIndex===n.initStart){h.css("top",0+"px")}else{if(n.initStartIndex===n.endStart){h.css("top",o+"px")}else{h.css("top",(n.initStartIndex-n.initStart)*m+"px")}}e.find(".f_slider_strip").click(function(r){var p=(h.height()/2);var q=Math.ceil((r.offsetY-p)/m)+n.initStart;var s=a(this).height();if(r.offsetY>s-p){h.css("top",(s-p)+"px")}else{if(r.offsetY<p){h.css("top","auto")}else{h.css("top",(r.offsetY-p)+"px")}}if(q<n.initStart){q=n.initStart}if(q>n.endStart){q=n.endStart}if(q%n.space){q+=1}h.text(q+"px");d.find(".f_size_body").html(q+"px");if(b(n.refreshFn)){n.refreshFn(q)}if(b(n.styleChangeFn)){n.styleChangeFn()}});h.draggable({handler:".f_slider_move",axis:"y",containment:"parent",drag:function(){var p=parseInt(this.style.top);var q=Math.ceil(p/m)+n.initStart;if(q<n.initStart){q=n.initStart}if(q>n.endStart){q=n.endStart}if(q%n.space){return}a(this).text(q+"px");d.find(".f_size_body").html(q+"px");if(b(n.refreshFn)){n.refreshFn(q)}if(b(n.styleChangeFn)){n.styleChangeFn()}}})};a.fn.fontStyleEditor=function(f){var h={id:0,toolbars:[{name:"fontfamily",defaultValue:"",refreshFn:null},{name:"fontsize",defaultValue:12,refreshFn:null},{name:"bold",defaultValue:0,refreshFn:null},{name:"italic",defaultValue:0,refreshFn:null},{name:"underline",defaultValue:0,refreshFn:null},{name:"fontcolor",defaultValue:"",refreshFn:null,removeCssFn:null}],styleChangeFn:null,fontfamily:null};a.extend(h,f);var e='<div id="f_editor'+h.id+'" class="f_editor"></div>';if(a("#f_editor"+h.id).length===0){a(this).append(e)}e=a("#f_editor"+h.id);var d=function(o){var p={defaultValue:0,refreshFn:null,styleChangeFn:null};a.extend(p,o);var q="<div id='f_b_bold"+h.id+"' class='f_button f_b_bold "+(p.defaultValue?"f_bold_select":"")+"'></div>";if(a("#f_b_bold"+h.id).length===0){e.append(q)}else{if(b(p.refreshFn)){p.refreshFn(p.defaultValue)}a("#f_b_bold"+h.id).removeClass("f_bold_select")}a("#f_b_bold"+h.id).mousemove(function(){a(this).addClass("f_bold_hover")}).mouseleave(function(){a(this).removeClass("f_bold_hover")}).unbind("click").bind("click",function(){if(a(this).hasClass("f_bold_select")){a(this).removeClass("f_bold_select");p.defaultValue=0}else{a(this).addClass("f_bold_select");p.defaultValue=1}if(b(p.refreshFn)){p.refreshFn(p.defaultValue)}if(b(p.styleChangeFn)){p.styleChangeFn()}})};var n=function(p){var q={defaultValue:0,refreshFn:null,styleChangeFn:null};a.extend(q,p);var o="<div id='f_b_italic"+h.id+"' class='f_button f_b_italic "+(q.defaultValue?"f_italic_select":"")+"'></div>";if(a("#f_b_italic"+h.id).length===0){e.append(o)}else{if(b(q.refreshFn)){q.refreshFn(q.defaultValue)}a("#f_b_italic"+h.id).removeClass("f_italic_select")}a("#f_b_italic"+h.id).mousemove(function(){a(this).addClass("f_italic_hover")}).mouseleave(function(){a(this).removeClass("f_italic_hover")}).unbind("click").bind("click",function(){if(a(this).hasClass("f_italic_select")){a(this).removeClass("f_italic_select");q.defaultValue=0}else{a(this).addClass("f_italic_select");q.defaultValue=1}if(b(q.refreshFn)){q.refreshFn(q.defaultValue)}if(b(q.styleChangeFn)){q.styleChangeFn()}})};var m=function(q){var o={defaultValue:0,refreshFn:null,styleChangeFn:null};a.extend(o,q);var p="<div id='f_b_underline"+h.id+"' class='f_button f_b_underline "+(o.defaultValue?"f_unline_select":"")+"'></div>";if(a("#f_b_underline"+h.id).length===0){e.append(p)}else{if(b(o.refreshFn)){o.refreshFn(o.defaultValue)}a("#f_b_underline"+h.id).removeClass("f_unline_select")}a("#f_b_underline"+h.id).mousemove(function(){a(this).addClass("f_unline_hover")}).mouseleave(function(){a(this).removeClass("f_unline_hover")}).unbind("click").bind("click",function(){if(a(this).hasClass("f_unline_select")){a(this).removeClass("f_unline_select");o.defaultValue=0}else{a(this).addClass("f_unline_select");o.defaultValue=1}if(b(o.refreshFn)){o.refreshFn(o.defaultValue)}if(b(o.styleChangeFn)){o.styleChangeFn()}})};var g=function(q){var o={defaultValue:"",refreshFn:null,removeCssFn:null};a.extend(o,q);var p=["<div id='f_color",h.id,"' class='f_button f_b_color'>","<div id='f_b_color",h.id,"' class='f_color_edit'",o.defaultValue?' style="border:1px solid #aab3bb;"':"","></div>","</div>"];p=p.join("");if(a("#f_color"+h.id).length===0){e.append(p);a("#f_b_color"+h.id).faiColorPicker({defaultcolor:o.defaultValue,onchange:o.refreshFn,showInTop:true})}if(b(o.removeCssFn)){o.removeCssFn();if(b(o.refreshFn)){o.refreshFn(o.defaultValue)}a("#f_b_color"+h.id).removeAttr("style")}if(!o.defaultValue){a("#f_color"+h.id).bind("mousemove",function(){if(a(this).children().attr("style")){a(this).unbind("mousemove");return}a(this).addClass("f_color_hover")}).bind("mouseleave",function(){if(a(this).children().attr("style")){a(this).unbind("mouseleave");return}a(this).removeClass("f_color_hover")})}};a.each(h.toolbars,function(o,p){switch(p.name){case"fontfamily":e.fontFamilySelect({type:h.id,defaultValue:p.defaultValue,defaultValueIndex:3,refreshFn:p.refreshFn,styleChangeFn:h.styleChangeFn,fontfamily:h.fontfamily});break;case"fontsize":e.fontSzieSlider({type:h.id,initStartIndex:p.defaultValue,space:2,refreshFn:p.refreshFn,styleChangeFn:h.styleChangeFn});break;case"bold":d({defaultValue:p.defaultValue,refreshFn:p.refreshFn,styleChangeFn:h.styleChangeFn});break;case"italic":n({defaultValue:p.defaultValue,refreshFn:p.refreshFn,styleChangeFn:h.styleChangeFn});break;case"underline":m({defaultValue:p.defaultValue,refreshFn:p.refreshFn,styleChangeFn:h.styleChangeFn});break;case"fontcolor":g({defaultValue:p.defaultValue,refreshFn:p.refreshFn,removeCssFn:p.removeCssFn});break}})};function b(d){return Object.prototype.toString.call(d)==="[object Function]"}})(jQuery);(function(a,b){a.widget("ui.combobox",{_create:function(){var f=this;var d=this.element;var h=d.width();var e=a("<input>").appendTo(d).autocomplete({source:f.options.source,delay:0,minLength:0,open:function(s,t){if(f.options.maxlength){a(this).autocomplete("widget").width(f.options.maxlength)}else{var r=a(this).autocomplete("widget").width();var p=a(this).outerWidth()-6;if(e.width()!=(h-hdFai.getCssInt(e,"border-left-width"))){p=a(this).outerWidth();if(!f.options.readonly){p=a(this).outerWidth()-6}}a(this).autocomplete("widget").width(p)}if(f.options.maxHeight){a(this).autocomplete("widget").css("max-height",f.options.maxHeight)}var q=a(this).autocomplete("widget").find("li");if(q.length==1&&a(this).attr("readonly")==false){var o=a(this).val();var u=false;a(q).each(function(v,w){var x=a.trim(a(w).text());if(o==x){u=true}});if(u){a(this).autocomplete("close")}}},select:function(o,p){a(f).data("key",p.item.key);if(f.options.select){f.options.select(p.item)}if(f.options.change){f.options.change(p.item.label)}if(f.options.finish){setTimeout(function(){f.options.finish(p.item)},0)}}});e.change(function(){if(f.options.change){f.options.change(a(this).val())}});e.keyup(function(o){if(f.options.change){f.options.change(a(this).val())}if(f.options.keyup){f.options.keyup(a(this).val())}});if(f.options.readonly){e.click(function(o){if(e.autocomplete("widget").is(":visible")){e.autocomplete("close");return false}e.autocomplete("search","");return false})}if(f.options.id){e.attr("id",f.options.id)}if(f.options.readonly){e.attr("readonly","readonly")}e.width(h-hdFai.getCssInt(e,"border-left-width"));d.width(h+hdFai.getCssInt(e,"border-left-width")+hdFai.getCssInt(e,"border-right-width"));if(f.options.name){e.attr("name",f.options.name)}else{e.attr("name",f.options.id)}if(typeof f.options.initVal!="undefined"){e.val(f.options.initVal)}if(typeof f.options.initKey!="undefined"){a(f).data("key",f.options.initKey)}else{a(f).data("key","")}var g=a("<div>&nbsp;</div>").attr("tabIndex",-1).css("outline","none").insertAfter(e).addClass("autoCompleteButton").hover(function(){a(this).addClass("autoCompleteButtonHover")},function(){a(this).removeClass("autoCompleteButtonHover");a(this).removeClass("autoCompleteButtonDown")}).mouseup(function(){}).mousedown(function(){a(this).removeClass("autoCompleteButtonHover");a(this).addClass("autoCompleteButtonDown")}).click(function(){if(e.autocomplete("widget").is(":visible")){e.autocomplete("close");return false}e.autocomplete("search","");e.focus();return false});var c=e.outerHeight();d.css("position","relative");d.css("height",c);var n=h-g.width()-(f.options.readonly?0:1);var m=e.position().top+(c-g.height())/2;g.css("position","absolute");g.css("left",n+"px");g.css("top",m+"px");if(!f.options.readonly){e.width(h-hdFai.getCssInt(e,"border-left-width")-20);e.css("padding-right",20+"px");g.css("background-color","#ffffff").css("*width",17+"px")}if(f.options.readonly){g.show()}else{g.hide();e.focus(function(){g.show()})}},addSource:function(e){var c=this.element.find("input");var f=c.autocomplete("option","source");var d=false;a.each(f,function(g,h){if(h.key==e.key){d=true;f.splice(g,1,e)}});if(!d){f.push(e)}c.autocomplete("option","source",f)},setSource:function(d){var c=this.element.find("input");c.autocomplete("option","source",d)},getSource:function(){var c=this.element.find("input");return c.autocomplete("option","source")},setInitVal:function(d,e){var c=this.element.find("input");c.val(d);a(this).data("key",e)},setInitKey:function(f){var d=this.element.find("input");var e=d.autocomplete("option","source");var c="";a.each(e,function(g,h){if(h.key==f){c=h.label}});d.val(c);a(this).data("key",f)},getVal:function(){var c=this.element.find("input");return c.val()},getKey:function(){return a(this).data("key")},setKey:function(c){a(this).data("key",c)}})}(jQuery));(function(e){var a=[],d=/^url\(["']?([^"'\)]*)["']?\);?$/i,c=/\.png$/i,b=e.browser.msie&&e.browser.version==6;function f(){e.each(a,function(){this.refresh(true)})}e.Poshytip=function(h,g){this.$elm=e(h);this.opts=e.extend({},e.fn.poshytip.defaults,g);this.$tip=e(['<div id="',this.opts.id,'" class="',this.opts.className,'" ',this.opts.cusStyle!=""?"style='"+this.opts.cusStyle+"'":"",">",'<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>',"</div>"].join(""));this.$arrow=this.$tip.find("div.tip-arrow");this.$inner=this.$tip.find("div.tip-inner");this.disabled=false;this.init()};e.Poshytip.prototype={init:function(){a.push(this);this.$elm.data("title.poshytip",this.$elm.attr("title"));this.$elm.data("poshytip",this);switch(this.opts.showOn){case"hover":this.$elm.bind({"mouseenter.poshytip":e.proxy(this.mouseenter,this),"mouseleave.poshytip":e.proxy(this.mouseleave,this)});if(this.opts.alignTo=="cursor"){this.$elm.bind("mousemove.poshytip",e.proxy(this.mousemove,this))}if(this.opts.allowTipHover){this.$tip.hover(e.proxy(this.clearTimeouts,this),e.proxy(this.hide,this))}break;case"focus":this.$elm.bind({"focus.poshytip":e.proxy(this.show,this),"blur.poshytip":e.proxy(this.hide,this)});break}if(this.opts.autoLocation){var h=this;var g=h.$elm.offset().top;var m=h.$elm.offset().left;this.interval=setInterval(function(){var n=h.$elm.offset().top;var o=h.$elm.offset().left;if(g!=n||m!=o){h.update();h.display();g=n;m=o}},300)}},mouseenter:function(g){if(this.disabled){return true}this.clearTimeouts();this.$elm.attr("title","");this.showTimeout=setTimeout(e.proxy(this.show,this),this.opts.showTimeout)},mouseleave:function(){if(this.disabled){return true}this.clearTimeouts();this.$elm.attr("title",this.$elm.data("title.poshytip"));this.hideTimeout=setTimeout(e.proxy(this.hide,this),this.opts.hideTimeout)},mousemove:function(g){if(this.disabled){return true}this.eventX=g.pageX;this.eventY=g.pageY;if(this.opts.followCursor&&this.$tip.data("active")){this.calcPos();this.$tip.css({left:this.pos.l,top:this.pos.t});if(this.pos.arrow){this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow}}},show:function(){if(this.disabled||this.$tip.data("active")){return}this.reset();this.update();this.display()},hide:function(){if(this.disabled||!this.$tip.data("active")){return}this.display(true)},reset:function(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",false);this.$inner.find("*").poshytip("hide");if(this.opts.fade){this.$tip.css("opacity",this.opacity)}this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"},update:function(m){if(this.disabled){return}var h=m!==undefined;if(h){if(!this.$tip.data("active")){return}}else{m=this.opts.content}this.$inner.contents().detach();var g=this;this.$inner.append(typeof m=="function"?m.call(this.$elm[0],function(n){g.update(n)}):m=="[title]"?this.$elm.data("title.poshytip"):m);this.refresh(h)},refresh:function(h){if(this.disabled){return}if(h){if(!this.$tip.data("active")){return}var q={left:this.$tip.css("left"),top:this.$tip.css("top")}}this.$tip.css({left:0,top:0}).appendTo(this.opts.appendToId?e(this.opts.appendToId):document.body);if(this.opacity===undefined){this.opacity=this.$tip.css("opacity")}var r=this.$tip.css("background-image").match(d),s=this.$arrow.css("background-image").match(d);if(r){var m=c.test(r[1]);if(b&&m){this.$tip.css("background-image","none");this.$inner.css({margin:0,border:0,padding:0});r=m=false}else{this.$tip.prepend('<table border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'+r[1]+'")').end().find("td").eq(3).append(this.$inner)}if(m&&!e.support.opacity){this.opts.fade=false}}if(s&&!e.support.opacity){if(b&&c.test(s[1])){s=false;this.$arrow.css("background-image","none")}this.opts.fade=false}var u=this.$tip.find("table");if(b){this.$tip[0].style.width="";u.width("auto").find("td").eq(3).width("auto");var t=this.$tip.width(),n=parseInt(this.$tip.css("min-width")),g=parseInt(this.$tip.css("max-width"));if(!isNaN(n)&&t<n){t=n}else{if(!isNaN(g)&&t>g){t=g}}this.$tip.add(u).width(t).eq(0).find("td").eq(3).width("100%")}else{if(u[0]){u.width("auto").find("td").eq(3).width("auto").end().end().width(this.$tip.width()).find("td").eq(3).width("100%")}}this.tipOuterW=this.$tip.outerWidth();this.tipOuterH=this.$tip.outerHeight();this.calcPos();if(s&&this.pos.arrow){this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow;this.$arrow.css("visibility","inherit")}if(h){this.$tip.css({left:this.pos.l,top:this.pos.t})}else{this.$tip.css({left:this.pos.l,top:this.pos.t})}if(this.pos.arrow=="top"){var o=Math.round((this.$arrow.offset().left+this.$arrow.width())-(this.$arrow.width()/2));var p=Math.round((this.$elm.offset().left+this.$elm.width())-(this.$elm.width()/2));if(o!=p){this.$arrow.offset({top:this.$tip.offset().top-(this.$arrow.height()-1),left:p})}}else{if(this.pos.arrow=="bottom"){var o=Math.round((this.$arrow.offset().left+this.$arrow.width())-(this.$arrow.width()/2));var p=Math.round((this.$elm.offset().left+this.$elm.width())-(this.$elm.width()/2));if(o!=p){this.$arrow.offset({top:this.$tip.offset().top+this.$tip.height()+this.$arrow.height()+5+1,left:p})}}}},display:function(o){var m=this.$tip.data("active");if(m&&!o||!m&&o){return}this.$tip.stop();if((this.opts.slide&&this.pos.arrow||this.opts.fade)&&(o&&this.opts.hideAniDuration||!o&&this.opts.showAniDuration)){var p={},q={};if(this.opts.slide&&this.pos.arrow){var g,n;if(this.pos.arrow=="bottom"||this.pos.arrow=="top"){g="top";n="bottom";if(this.pos.arrow=="top"){var s=Math.round((this.$arrow.offset().left+this.$arrow.width())-(this.$arrow.width()/2));var r=Math.round((this.$elm.offset().left+this.$elm.width())-(this.$elm.width()/2));if(s!=r){this.$arrow.offset({top:this.$tip.offset().top-(this.$arrow.height()-1),left:r})}}else{if(this.pos.arrow=="bottom"){var s=Math.round((this.$arrow.offset().left+this.$arrow.width())-(this.$arrow.width()/2));var r=Math.round((this.$elm.offset().left+this.$elm.width())-(this.$elm.width()/2));if(s!=r){this.$arrow.offset({top:this.$tip.offset().top+this.$tip.height()+this.$arrow.height()+5+1,left:r})}}}}else{g="left";n="right"}var h=parseInt(this.$tip.css(g));p[g]=h+(o?0:this.opts.slideOffset*(this.pos.arrow==n?-1:1));q[g]=h+(o?this.opts.slideOffset*(this.pos.arrow==n?1:-1):0)}if(this.opts.fade){p.opacity=o?this.$tip.css("opacity"):0;q.opacity=o?0:this.opacity}this.$tip.css(p).animate(q,this.opts[o?"hideAniDuration":"showAniDuration"])}o?this.$tip.queue(e.proxy(this.reset,this)):this.$tip.css("visibility","inherit");this.$tip.data("active",!m)},disable:function(){this.reset();this.disabled=true},enable:function(){this.disabled=false},destroy:function(){this.reset();this.$tip.remove();this.$elm.unbind("poshytip").removeData("title.poshytip").removeData("poshytip");a.splice(e.inArray(this,a),1);if(this.opts.autoLocation){clearInterval(this.interval)}},clearTimeouts:function(){if(this.showTimeout){clearTimeout(this.showTimeout);this.showTimeout=0}if(this.hideTimeout){clearTimeout(this.hideTimeout);this.hideTimeout=0}},calcPos:function(){var r={l:0,t:0,arrow:""},h=e(window),o={l:h.scrollLeft(),t:h.scrollTop(),w:h.width(),h:h.height()},t,n,q,m,u,g;if(this.opts.alignTo=="cursor"){t=n=q=this.eventX;m=u=g=this.eventY}else{var s=this.$elm.offset(),p={l:s.left,t:this.opts.appendToId?s.top-e(this.opts.appendToId).offset().top:s.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()};t=p.l+(this.opts.alignX!="inner-right"?0:p.w);n=t+Math.floor(p.w/2);q=t+(this.opts.alignX!="inner-left"?p.w:0);m=p.t+(this.opts.alignY!="inner-bottom"?0:p.h);u=m+Math.floor(p.h/2);g=m+(this.opts.alignY!="inner-top"?p.h:0)}switch(this.opts.alignX){case"right":case"inner-left":r.l=q+this.opts.offsetX;if(r.l+this.tipOuterW>o.l+o.w){r.l=o.l+o.w-this.tipOuterW}if(this.opts.alignX=="right"||this.opts.alignY=="center"){r.arrow="left"}break;case"center":r.l=n-Math.floor(this.tipOuterW/2);if(r.l+this.tipOuterW>o.l+o.w){r.l=o.l+o.w-this.tipOuterW}else{if(r.l<o.l){r.l=o.l}}break;default:r.l=t-this.tipOuterW-this.opts.offsetX;if(r.l<o.l){r.l=o.l}if(this.opts.alignX=="left"||this.opts.alignY=="center"){r.arrow="right"}}switch(this.opts.alignY){case"bottom":case"inner-top":r.t=g+this.opts.offsetY;if(!r.arrow||this.opts.alignTo=="cursor"){r.arrow="top"}if(r.t+this.tipOuterH>o.t+o.h){r.t=m-this.tipOuterH-this.opts.offsetY;if(r.arrow=="top"){r.arrow="bottom"}}break;case"center":r.t=u-Math.floor(this.tipOuterH/2);if(r.t+this.tipOuterH>o.t+o.h){r.t=o.t+o.h-this.tipOuterH}else{if(r.t<o.t){r.t=o.t}}break;default:r.t=m-this.tipOuterH-this.opts.offsetY;if(!r.arrow||this.opts.alignTo=="cursor"){r.arrow="bottom"}if(r.t<o.t){r.t=g+this.opts.offsetY;if(r.arrow=="bottom"){r.arrow="top"}}}this.pos=r}};e.fn.poshytip=function(g){if(typeof g=="string"){return this.each(function(){var m=e(this).data("poshytip");if(m&&m[g]){m[g]()}})}var h=e.extend({},e.fn.poshytip.defaults,g);if(!e("#poshytip-css-"+h.className)[0]){e(['<style id="poshytip-css-',h.className,'" type="text/css">',"div.",h.className,"{visibility:hidden;position:absolute;top:0;left:0;}","div.",h.className," table, div.",h.className," td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;}","div.",h.className," td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:",h.bgImageFrameSize,"px;width:",h.bgImageFrameSize,"px;overflow:hidden;}","div.",h.className," td.tip-right{background-position:100% 0;}","div.",h.className," td.tip-bottom{background-position:100% 100%;}","div.",h.className," td.tip-left{background-position:0 100%;}","div.",h.className," div.tip-inner{background-position:-",h.bgImageFrameSize,"px -",h.bgImageFrameSize,"px;}","div.",h.className," div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}","</style>"].join("")).appendTo("head")}return this.each(function(){new e.Poshytip(this,h)})};e.fn.poshytip.defaults={content:"[title]",className:"tip-yellow",cusStyle:"",bgImageFrameSize:10,showTimeout:500,hideTimeout:100,showOn:"hover",alignTo:"cursor",alignX:"right",alignY:"top",offsetX:-22,offsetY:18,allowTipHover:true,followCursor:false,fade:true,slide:true,slideOffset:8,showAniDuration:300,hideAniDuration:300}})(jQuery);(function($){$.ui.timepicker=$.ui.timepicker||{};if($.ui.timepicker.version){return}$.extend($.ui,{timepicker:{version:"1.0.5"}});function Timepicker(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",ampm:false,amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"hh:mm tt",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",timezoneText:"Time Zone",isRTL:false};this._defaults={showButtonPanel:true,timeOnly:false,showHour:true,showMinute:true,showSecond:false,showMillisec:false,showTimezone:false,showTime:true,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,hour:0,minute:0,second:0,millisec:0,timezone:null,useLocalTimezone:false,defaultTimezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,alwaysSetTime:true,separator:" ",altFieldTimeOnly:true,altSeparator:null,altTimeSuffix:null,showTimepicker:true,timezoneIso8601:false,timezoneList:null,addSliderAccess:false,sliderAccessArgs:null,controlType:"slider",defaultValue:null};$.extend(this._defaults,this.regional[""])}$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,timezone:null,defaultTimezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec"],control:null,setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_newInst:function($input,o){var tp_inst=new Timepicker(),inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults){if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue){try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}}overrides={beforeShow:function(input,dp_inst){if($.isFunction(tp_inst._defaults.evnts.beforeShow)){return tp_inst._defaults.evnts.beforeShow.call($input[0],input,dp_inst,tp_inst)}},onChangeMonthYear:function(year,month,dp_inst){tp_inst._updateDateTime(dp_inst);if($.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)){tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst)}},onClose:function(dateText,dp_inst){if(tp_inst.timeDefined===true&&$input.val()!==""){tp_inst._updateDateTime(dp_inst)}if($.isFunction(tp_inst._defaults.evnts.onClose)){tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst)}}};for(i in overrides){if(overrides.hasOwnProperty(i)){fns[i]=o[i]||null}}tp_inst._defaults=$.extend({},this._defaults,inlineSettings,o,overrides,{evnts:fns,timepicker:tp_inst});tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(val){return val.toUpperCase()});tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(val){return val.toUpperCase()});if(typeof(tp_inst._defaults.controlType)==="string"){if(tp_inst._defaults.controlType=="slider"&&$.fn.slider===undefined){tp_inst._defaults.controlType="select"}tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]}else{tp_inst.control=tp_inst._defaults.controlType}if(tp_inst._defaults.timezoneList===null){var timezoneList=["-1200","-1100","-1000","-0930","-0900","-0800","-0700","-0600","-0500","-0430","-0400","-0330","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0330","+0400","+0430","+0500","+0530","+0545","+0600","+0630","+0700","+0800","+0845","+0900","+0930","+1000","+1030","+1100","+1130","+1200","+1245","+1300","+1400"];if(tp_inst._defaults.timezoneIso8601){timezoneList=$.map(timezoneList,function(val){return val=="+0000"?"Z":(val.substring(0,3)+":"+val.substring(3))})}tp_inst._defaults.timezoneList=timezoneList}tp_inst.timezone=tp_inst._defaults.timezone;tp_inst.hour=tp_inst._defaults.hour;tp_inst.minute=tp_inst._defaults.minute;tp_inst.second=tp_inst._defaults.second;tp_inst.millisec=tp_inst._defaults.millisec;tp_inst.ampm="";tp_inst.$input=$input;if(o.altField){tp_inst.$altInput=$(o.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})}if(tp_inst._defaults.minDate===0||tp_inst._defaults.minDateTime===0){tp_inst._defaults.minDate=new Date()}if(tp_inst._defaults.maxDate===0||tp_inst._defaults.maxDateTime===0){tp_inst._defaults.maxDate=new Date()}if(tp_inst._defaults.minDate!==undefined&&tp_inst._defaults.minDate instanceof Date){tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())}if(tp_inst._defaults.minDateTime!==undefined&&tp_inst._defaults.minDateTime instanceof Date){tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())}if(tp_inst._defaults.maxDate!==undefined&&tp_inst._defaults.maxDate instanceof Date){tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())}if(tp_inst._defaults.maxDateTime!==undefined&&tp_inst._defaults.maxDateTime instanceof Date){tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())}tp_inst.$input.bind("focus",function(){tp_inst._onFocus()});return tp_inst},_addTimePicker:function(dp_inst){var currDT=(this.$altInput&&this._defaults.altFieldTimeOnly)?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(currDT);this._limitMinMaxDateTime(dp_inst,false);this._injectTimePicker()},_parseTime:function(timeString,withDate){if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0])}if(withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,"dateFormat");try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj){return false}$.extend(this,parseRes.timeObj)}catch(err){return false}return true}else{var timeObj=$.datepicker.parseTime(this._defaults.timeFormat,timeString,this._defaults);if(!timeObj){return false}$.extend(this,timeObj);return true}},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem="",uitem="",max={},gridSize={},size=null;if($dp.find("div.ui-timepicker-div").length===0&&o.showTimepicker){var noDisplay=' style="display:none;"',html='<div class="ui-timepicker-div'+(o.isRTL?" ui-timepicker-rtl":"")+'"><dl><dt class="ui_tpicker_time_label"'+((o.showTime)?"":noDisplay)+">"+o.timeText+'</dt><dd class="ui_tpicker_time"'+((o.showTime)?"":noDisplay)+"></dd>";for(var i=0,l=this.units.length;i<l;i++){litem=this.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);max[litem]=parseInt((o[litem+"Max"]-((o[litem+"Max"]-o[litem+"Min"])%o["step"+uitem])),10);gridSize[litem]=0;html+='<dt class="ui_tpicker_'+litem+'_label"'+((o["show"+uitem])?"":noDisplay)+">"+o[litem+"Text"]+'</dt><dd class="ui_tpicker_'+litem+'"><div class="ui_tpicker_'+litem+'_slider"'+((o["show"+uitem])?"":noDisplay)+"></div>";if(o["show"+uitem]&&o[litem+"Grid"]>0){html+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';if(litem=="hour"){for(var h=o[litem+"Min"];h<=max[litem];h+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;var tmph=(o.ampm&&h>12)?h-12:h;if(tmph<10){tmph="0"+tmph}if(o.ampm){if(h===0){tmph=12+"a"}else{if(h<12){tmph+="a"}else{tmph+="p"}}}html+='<td data-for="'+litem+'">'+tmph+"</td>"}}else{for(var m=o[litem+"Min"];m<=max[litem];m+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;html+='<td data-for="'+litem+'">'+((m<10)?"0":"")+m+"</td>"}}html+="</tr></table></div>"}html+="</dd>"}html+='<dt class="ui_tpicker_timezone_label"'+((o.showTimezone)?"":noDisplay)+">"+o.timezoneText+"</dt>";html+='<dd class="ui_tpicker_timezone" '+((o.showTimezone)?"":noDisplay)+"></dd>";html+="</dl></div>";var $tp=$(html);if(o.timeOnly===true){$tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+o.timeOnlyTitle+"</div></div>");$dp.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()}for(var i=0,l=tp_inst.units.length;i<l;i++){litem=tp_inst.units[i];uitem=litem.substr(0,1).toUpperCase()+litem.substr(1);tp_inst[litem+"_slider"]=tp_inst.control.create(tp_inst,$tp.find(".ui_tpicker_"+litem+"_slider"),litem,tp_inst[litem],o[litem+"Min"],max[litem],o["step"+uitem]);if(o["show"+uitem]&&o[litem+"Grid"]>0){size=100*gridSize[litem]*o[litem+"Grid"]/(max[litem]-o[litem+"Min"]);$tp.find(".ui_tpicker_"+litem+" table").css({width:size+"%",marginLeft:o.isRTL?"0":((size/(-2*gridSize[litem]))+"%"),marginRight:o.isRTL?((size/(-2*gridSize[litem]))+"%"):"0",borderCollapse:"collapse"}).find("td").click(function(e){var $t=$(this),h=$t.html(),f=$t.data("for");if(f=="hour"&&o.ampm){var ap=h.substring(2).toLowerCase(),aph=parseInt(h.substring(0,2),10);if(ap=="a"){if(aph==12){h=0}else{h=aph}}else{if(aph==12){h=12}else{h=aph+12}}}tp_inst.control.value(tp_inst,tp_inst[f+"_slider"],parseInt(h,10));tp_inst._onTimeChange();tp_inst._onSelectHandler()}).css({cursor:"pointer",width:(100/gridSize[litem])+"%",textAlign:"center",overflow:"hidden"})}}this.timezone_select=$tp.find(".ui_tpicker_timezone").append("<select></select>").find("select");$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val,idx){return $("<option />").val(typeof val=="object"?val.value:val).text(typeof val=="object"?val.label:val)}));if(typeof(this.timezone)!="undefined"&&this.timezone!==null&&this.timezone!==""){var local_date=new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12);var local_timezone=$.timepicker.timeZoneOffsetString(local_date);if(local_timezone==this.timezone){selectLocalTimeZone(tp_inst)}else{this.timezone_select.val(this.timezone)}}else{if(typeof(this.hour)!="undefined"&&this.hour!==null&&this.hour!==""){this.timezone_select.val(o.defaultTimezone)}else{selectLocalTimeZone(tp_inst)}}this.timezone_select.change(function(){tp_inst._defaults.useLocalTimezone=false;tp_inst._onTimeChange()});var $buttonPanel=$dp.find(".ui-datepicker-buttonpane");if($buttonPanel.length){$buttonPanel.before($tp)}else{$dp.append($tp)}this.$timeObj=$tp.find(".ui_tpicker_time");if(this.inst!==null){var timeDefined=this.timeDefined;this._onTimeChange();this.timeDefined=timeDefined}if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;sliderAccessArgs.isRTL=rtl;setTimeout(function(){if($tp.find(".ui-slider-access").length===0){$tp.find(".ui-slider:visible").sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find(".ui-slider-access:eq(0)").outerWidth(true);if(sliderAccessWidth){$tp.find("table:visible").each(function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?"marginRight":"marginLeft").toString().replace("%",""),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=((oldMarginLeft*newWidth)/oldWidth)+"%",css={width:newWidth,marginRight:0,marginLeft:0};css[rtl?"marginRight":"marginLeft"]=newMarginLeft;$g.css(css)})}}},10)}}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(!this._defaults.showTimepicker){return}if($.datepicker._get(dp_inst,"minDateTime")!==null&&$.datepicker._get(dp_inst,"minDateTime")!==undefined&&dp_date){var minDateTime=$.datepicker._get(dp_inst,"minDateTime"),minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);if(this.hourMinOriginal===null||this.minuteMinOriginal===null||this.secondMinOriginal===null||this.millisecMinOriginal===null){this.hourMinOriginal=o.hourMin;this.minuteMinOriginal=o.minuteMin;this.secondMinOriginal=o.secondMin;this.millisecMinOriginal=o.millisecMin}if(dp_inst.settings.timeOnly||minDateTimeDate.getTime()==dp_date.getTime()){this._defaults.hourMin=minDateTime.getHours();if(this.hour<=this._defaults.hourMin){this.hour=this._defaults.hourMin;this._defaults.minuteMin=minDateTime.getMinutes();if(this.minute<=this._defaults.minuteMin){this.minute=this._defaults.minuteMin;this._defaults.secondMin=minDateTime.getSeconds();if(this.second<=this._defaults.secondMin){this.second=this._defaults.secondMin;this._defaults.millisecMin=minDateTime.getMilliseconds()}else{if(this.millisec<this._defaults.millisecMin){this.millisec=this._defaults.millisecMin}this._defaults.millisecMin=this.millisecMinOriginal}}else{this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal}}else{this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal}}else{this._defaults.hourMin=this.hourMinOriginal;this._defaults.minuteMin=this.minuteMinOriginal;this._defaults.secondMin=this.secondMinOriginal;this._defaults.millisecMin=this.millisecMinOriginal}}if($.datepicker._get(dp_inst,"maxDateTime")!==null&&$.datepicker._get(dp_inst,"maxDateTime")!==undefined&&dp_date){var maxDateTime=$.datepicker._get(dp_inst,"maxDateTime"),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);if(this.hourMaxOriginal===null||this.minuteMaxOriginal===null||this.secondMaxOriginal===null){this.hourMaxOriginal=o.hourMax;this.minuteMaxOriginal=o.minuteMax;this.secondMaxOriginal=o.secondMax;this.millisecMaxOriginal=o.millisecMax}if(dp_inst.settings.timeOnly||maxDateTimeDate.getTime()==dp_date.getTime()){this._defaults.hourMax=maxDateTime.getHours();if(this.hour>=this._defaults.hourMax){this.hour=this._defaults.hourMax;this._defaults.minuteMax=maxDateTime.getMinutes();if(this.minute>=this._defaults.minuteMax){this.minute=this._defaults.minuteMax;this._defaults.secondMax=maxDateTime.getSeconds()}else{if(this.second>=this._defaults.secondMax){this.second=this._defaults.secondMax;this._defaults.millisecMax=maxDateTime.getMilliseconds()}else{if(this.millisec>this._defaults.millisecMax){this.millisec=this._defaults.millisecMax}this._defaults.millisecMax=this.millisecMaxOriginal}}}else{this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal}}else{this._defaults.hourMax=this.hourMaxOriginal;this._defaults.minuteMax=this.minuteMaxOriginal;this._defaults.secondMax=this.secondMaxOriginal;this._defaults.millisecMax=this.millisecMaxOriginal}}if(adjustSliders!==undefined&&adjustSliders===true){var hourMax=parseInt((this._defaults.hourMax-((this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour)),10),minMax=parseInt((this._defaults.minuteMax-((this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute)),10),secMax=parseInt((this._defaults.secondMax-((this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond)),10),millisecMax=parseInt((this._defaults.millisecMax-((this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec)),10);if(this.hour_slider){this.control.options(this,this.hour_slider,{min:this._defaults.hourMin,max:hourMax});this.control.value(this,this.hour_slider,this.hour)}if(this.minute_slider){this.control.options(this,this.minute_slider,{min:this._defaults.minuteMin,max:minMax});this.control.value(this,this.minute_slider,this.minute)}if(this.second_slider){this.control.options(this,this.second_slider,{min:this._defaults.secondMin,max:secMax});this.control.value(this,this.second_slider,this.second)}if(this.millisec_slider){this.control.options(this,this.millisec_slider,{min:this._defaults.millisecMin,max:millisecMax});this.control.value(this,this.millisec_slider,this.millisec)}}},_onTimeChange:function(){var hour=(this.hour_slider)?this.control.value(this,this.hour_slider):false,minute=(this.minute_slider)?this.control.value(this,this.minute_slider):false,second=(this.second_slider)?this.control.value(this,this.second_slider):false,millisec=(this.millisec_slider)?this.control.value(this,this.millisec_slider):false,timezone=(this.timezone_select)?this.timezone_select.val():false,o=this._defaults;if(typeof(hour)=="object"){hour=false}if(typeof(minute)=="object"){minute=false}if(typeof(second)=="object"){second=false}if(typeof(millisec)=="object"){millisec=false}if(typeof(timezone)=="object"){timezone=false}if(hour!==false){hour=parseInt(hour,10)}if(minute!==false){minute=parseInt(minute,10)}if(second!==false){second=parseInt(second,10)}if(millisec!==false){millisec=parseInt(millisec,10)}var ampm=o[hour<12?"amNames":"pmNames"][0];var hasChanged=(hour!=this.hour||minute!=this.minute||second!=this.second||millisec!=this.millisec||(this.ampm.length>0&&(hour<12)!=($.inArray(this.ampm.toUpperCase(),this.amNames)!==-1))||((this.timezone===null&&timezone!=this.defaultTimezone)||(this.timezone!==null&&timezone!=this.timezone)));if(hasChanged){if(hour!==false){this.hour=hour}if(minute!==false){this.minute=minute}if(second!==false){this.second=second}if(millisec!==false){this.millisec=millisec}if(timezone!==false){this.timezone=timezone}if(!this.inst){this.inst=$.datepicker._getInst(this.$input[0])}this._limitMinMaxDateTime(this.inst,true)}if(o.ampm){this.ampm=ampm}this.formattedTime=$.datepicker.formatTime(this._defaults.timeFormat,this,this._defaults);if(this.$timeObj){this.$timeObj.text(this.formattedTime+o.timeSuffix)}this.timeDefined=true;if(hasChanged){this._updateDateTime()}},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect;var inputEl=this.$input?this.$input[0]:null;if(onSelect&&inputEl){onSelect.apply(inputEl,[this.formattedDateTime,this])}},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst;var dt=$.datepicker._daylightSavingAdjust(new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay)),dateFmt=$.datepicker._get(dp_inst,"dateFormat"),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=dt!==null&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,(dt===null?new Date():dt),formatCfg);var formattedDateTime=this.formattedDate;if(this._defaults.timeOnly===true){formattedDateTime=this.formattedTime}else{if(this._defaults.timeOnly!==true&&(this._defaults.alwaysSetTime||timeAvailable)){formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix}}this.formattedDateTime=formattedDateTime;if(!this._defaults.showTimepicker){this.$input.val(this.formattedDate)}else{if(this.$altInput&&this._defaults.altFieldTimeOnly===true){this.$altInput.val(this.formattedTime);this.$input.val(this.formattedDate)}else{if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime="",altSeparator=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;if(this._defaults.altFormat){altFormattedDateTime=$.datepicker.formatDate(this._defaults.altFormat,(dt===null?new Date():dt),formatCfg)}else{altFormattedDateTime=this.formattedDate}if(altFormattedDateTime){altFormattedDateTime+=altSeparator}if(this._defaults.altTimeFormat){altFormattedDateTime+=$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+altTimeSuffix}else{altFormattedDateTime+=this.formattedTime+altTimeSuffix}this.$altInput.val(altFormattedDateTime)}else{this.$input.val(formattedDateTime)}}}this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!=inst.lastVal)){try{$.datepicker._updateDatepicker(inst)}catch(err){$.datepicker.log(err)}}}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){var rtl=tp_inst._defaults.isRTL;return obj.prop("slide",null).slider({orientation:"horizontal",value:rtl?val*-1:val,min:rtl?max*-1:min,max:rtl?min*-1:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),rtl?ui.value*-1:ui.value);tp_inst._onTimeChange()},stop:function(event,ui){tp_inst._onSelectHandler()}})},options:function(tp_inst,obj,opts,val){if(tp_inst._defaults.isRTL){if(typeof(opts)=="string"){if(opts=="min"||opts=="max"){if(val!==undefined){return obj.slider(opts,val*-1)}return Math.abs(obj.slider(opts))}return obj.slider(opts)}var min=opts.min,max=opts.max;opts.min=opts.max=null;if(min!==undefined){opts.max=min*-1}if(max!==undefined){opts.min=max*-1}return obj.slider(opts)}if(typeof(opts)=="string"&&val!==undefined){return obj.slider(opts,val)}return obj.slider(opts)},value:function(tp_inst,obj,val){if(tp_inst._defaults.isRTL){if(val!==undefined){return obj.slider("value",val*-1)}return Math.abs(obj.slider("value"))}if(val!==undefined){return obj.slider("value",val)}return obj.slider("value")}},select:{create:function(tp_inst,obj,unit,val,min,max,step){var sel='<select class="ui-timepicker-select" data-unit="'+unit+'" data-min="'+min+'" data-max="'+max+'" data-step="'+step+'">',ul=tp_inst._defaults.timeFormat.indexOf("t")!==-1?"toLowerCase":"toUpperCase",m=0;for(var i=min;i<=max;i+=step){sel+='<option value="'+i+'"'+(i==val?" selected":"")+">";if(unit=="hour"&&tp_inst._defaults.ampm){m=i%12;if(i===0||i===12){sel+="12"}else{if(m<10){sel+="0"+m.toString()}else{sel+=m}}sel+=" "+((i<12)?tp_inst._defaults.amNames[0]:tp_inst._defaults.pmNames[0])[ul]()}else{if(unit=="millisec"||i>=10){sel+=i}else{sel+="0"+i.toString()}}sel+="</option>"}sel+="</select>";obj.children("select").remove();$(sel).appendTo(obj).change(function(e){tp_inst._onTimeChange();tp_inst._onSelectHandler()});return obj},options:function(tp_inst,obj,opts,val){var o={},$t=obj.children("select");if(typeof(opts)=="string"){if(val===undefined){return $t.data(opts)}o[opts]=val}else{o=opts}return tp_inst.control.create(tp_inst,obj,$t.data("unit"),$t.val(),o.min||$t.data("min"),o.max||$t.data("max"),o.step||$t.data("step"))},value:function(tp_inst,obj,val){var $t=obj.children("select");if(val!==undefined){return $t.val(val)}return $t.val()}}}});$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);if(typeof o=="object"){tmp_args[0]=$.extend(o,{timeOnly:true})}return $(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args)})},datetimepicker:function(o){o=o||{};var tmp_args=arguments;if(typeof(o)=="string"){if(o=="getDate"){return $.fn.datepicker.apply($(this[0]),tmp_args)}else{return this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args)})}}else{return this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults)})}}});$.datepicker.parseDateTime=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec)}return parseRes.date};$.datepicker.parseTime=function(timeFormat,timeString,options){var getPatternAmpm=function(amNames,pmNames){var markers=[];if(amNames){$.merge(markers,amNames)}if(pmNames){$.merge(markers,pmNames)}markers=$.map(markers,function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")});return"("+markers.join("|")+")?"};var getFormatPositions=function(timeFormat){var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,t:-1,z:-1};if(finds){for(var i=0;i<finds.length;i++){if(orders[finds[i].toString().charAt(0)]==-1){orders[finds[i].toString().charAt(0)]=i+1}}}return orders};var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{});var regstr="^"+timeFormat.toString().replace(/(hh?|mm?|ss?|[tT]{1,2}|[lz]|'.*?')/g,function(match){switch(match.charAt(0).toLowerCase()){case"h":return"(\\d?\\d)";case"m":return"(\\d?\\d)";case"s":return"(\\d?\\d)";case"l":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return getPatternAmpm(o.amNames,o.pmNames);default:return"("+match.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(m){return"\\"+m})+")?"}}).replace(/\s/g,"\\s?")+o.timeSuffix+"$",order=getFormatPositions(timeFormat),ampm="",treg;treg=timeString.match(new RegExp(regstr,"i"));var resTime={hour:0,minute:0,second:0,millisec:0};if(treg){if(order.t!==-1){if(treg[order.t]===undefined||treg[order.t].length===0){ampm="";resTime.ampm=""}else{ampm=$.inArray(treg[order.t].toUpperCase(),o.amNames)!==-1?"AM":"PM";resTime.ampm=o[ampm=="AM"?"amNames":"pmNames"][0]}}if(order.h!==-1){if(ampm=="AM"&&treg[order.h]=="12"){resTime.hour=0}else{if(ampm=="PM"&&treg[order.h]!="12"){resTime.hour=parseInt(treg[order.h],10)+12}else{resTime.hour=Number(treg[order.h])}}}if(order.m!==-1){resTime.minute=Number(treg[order.m])}if(order.s!==-1){resTime.second=Number(treg[order.s])}if(order.l!==-1){resTime.millisec=Number(treg[order.l])}if(order.z!==-1&&treg[order.z]!==undefined){var tz=treg[order.z].toUpperCase();switch(tz.length){case 1:tz=o.timezoneIso8601?"Z":"+0000";break;case 5:if(o.timezoneIso8601){tz=tz.substring(1)=="0000"?"Z":tz.substring(0,3)+":"+tz.substring(3)}break;case 6:if(!o.timezoneIso8601){tz=tz=="Z"||tz.substring(1)=="00:00"?"+0000":tz.replace(/:/,"")}else{if(tz.substring(1)=="00:00"){tz="Z"}}break}resTime.timezone=tz}return resTime}return false};$.datepicker.formatTime=function(format,time,options){options=options||{};options=$.extend({},$.timepicker._defaults,options);time=$.extend({hour:0,minute:0,second:0,millisec:0,timezone:"+0000"},time);var tmptime=format;var ampmName=options.amNames[0];var hour=parseInt(time.hour,10);if(options.ampm){if(hour>11){ampmName=options.pmNames[0];if(hour>12){hour=hour%12}}if(hour===0){hour=12}}tmptime=tmptime.replace(/(?:hh?|mm?|ss?|[tT]{1,2}|[lz]|'.*?')/g,function(match){switch(match.toLowerCase()){case"hh":return("0"+hour).slice(-2);case"h":return hour;case"mm":return("0"+time.minute).slice(-2);case"m":return time.minute;case"ss":return("0"+time.second).slice(-2);case"s":return time.second;case"l":return("00"+time.millisec).slice(-3);case"z":return time.timezone===null?options.defaultTimezone:time.timezone;case"t":case"tt":if(options.ampm){if(match.length==1){ampmName=ampmName.charAt(0)}return match.charAt(0)==="T"?ampmName.toUpperCase():ampmName.toLowerCase()}return"";default:return match.replace(/\'/g,"")||"'"}});tmptime=$.trim(tmptime);return tmptime};$.datepicker._base_selectDate=$.datepicker._selectDate;$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,"timepicker");if(tp_inst){tp_inst._limitMinMaxDateTime(inst,true);inst.inline=inst.stay_open=true;this._base_selectDate(id,dateStr);inst.inline=inst.stay_open=false;this._notifyChange(inst);this._updateDatepicker(inst)}else{this._base_selectDate(id,dateStr)}};$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker;$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if($.datepicker._curInst&&$.datepicker._curInst!=inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!=input){return}if(typeof(inst.stay_open)!=="boolean"||inst.stay_open===false){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,"timepicker");if(tp_inst){tp_inst._addTimePicker(inst);if(tp_inst._defaults.useLocalTimezone){var date=new Date(inst.selectedYear,inst.selectedMonth,inst.selectedDay,12);selectLocalTimeZone(tp_inst,date);tp_inst._onTimeChange()}}}};$.datepicker._base_doKeyPress=$.datepicker._doKeyPress;$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst){if($.datepicker._get(inst,"constrainInput")){var ampm=tp_inst._defaults.ampm,dateChars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,ampm?"APM":"").replace(/Tt/g,ampm?"AaPpMm":"").replace(/tT/g,ampm?"AaPpMm":"").replace(/T/g,ampm?"AP":"").replace(/tt/g,ampm?"apm":"").replace(/t/g,ampm?"ap":"")+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tp_inst._defaults.showTimezone?tp_inst._defaults.timezoneList.join(""):"")+(tp_inst._defaults.amNames.join(""))+(tp_inst._defaults.pmNames.join(""))+dateChars,chr=String.fromCharCode(event.charCode===undefined?event.keyCode:event.charCode);return event.ctrlKey||(chr<" "||!dateChars||datetimeChars.indexOf(chr)>-1)}}return $.datepicker._base_doKeyPress(event)};$.datepicker._base_updateAlternate=$.datepicker._updateAlternate;$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){var altFormat=tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat,date=this._getDate(inst),formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime="",altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,altTimeFormat=tp_inst._defaults.altTimeFormat!==undefined?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix;if(!tp_inst._defaults.timeOnly&&!tp_inst._defaults.altFieldTimeOnly){if(tp_inst._defaults.altFormat){altFormattedDateTime=$.datepicker.formatDate(tp_inst._defaults.altFormat,(date===null?new Date():date),formatCfg)+altSeparator+altFormattedDateTime}else{altFormattedDateTime=tp_inst.formattedDate+altSeparator+altFormattedDateTime}}$(altField).val(altFormattedDateTime)}}else{$.datepicker._base_updateAlternate(inst)}};$.datepicker._base_doKeyUp=$.datepicker._doKeyUp;$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst){if(tp_inst._defaults.timeOnly&&(inst.input.val()!=inst.lastVal)){try{$.datepicker._updateDatepicker(inst)}catch(err){$.datepicker.log(err)}}}return $.datepicker._base_doKeyUp(event)};$.datepicker._base_gotoToday=$.datepicker._gotoToday;$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]),$dp=inst.dpDiv,tp_inst=this._get(inst,"timepicker");this._base_gotoToday(id);selectLocalTimeZone(tp_inst);var now=new Date();this._setTime(inst,now);$(".ui-datepicker-today",$dp).click()};$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst){return}var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate");if(tp_inst){tp_inst._defaults.showTimepicker=false;tp_inst._updateDateTime(inst)}};$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(!inst){return}var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate");if(tp_inst){tp_inst._defaults.showTimepicker=true;tp_inst._addTimePicker(inst);tp_inst._updateDateTime(inst)}};$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var defaults=tp_inst._defaults;tp_inst.hour=date?date.getHours():defaults.hour;tp_inst.minute=date?date.getMinutes():defaults.minute;tp_inst.second=date?date.getSeconds():defaults.second;tp_inst.millisec=date?date.getMilliseconds():defaults.millisec;tp_inst._limitMinMaxDateTime(inst,true);tp_inst._onTimeChange();tp_inst._updateDateTime(inst)}};$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(!inst){return}var tp_inst=this._get(inst,"timepicker");if(tp_inst){this._setDateFromField(inst);var tp_date;if(date){if(typeof date=="string"){tp_inst._parseTime(date,withDate);tp_date=new Date();tp_date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec)}else{tp_date=new Date(date.getTime())}if(tp_date.toString()=="Invalid Date"){tp_date=undefined}this._setTime(inst,tp_date)}}};$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker;$.datepicker._setDateDatepicker=function(target,date){var inst=this._getInst(target);if(!inst){return}var tp_date=(date instanceof Date)?new Date(date.getTime()):date;this._updateDatepicker(inst);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(target,tp_date,true)};$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker;$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(!inst){return}var tp_inst=this._get(inst,"timepicker");if(tp_inst){if(inst.lastVal===undefined){this._setDateFromField(inst,noDefault)}var date=this._getDate(inst);if(date&&tp_inst._parseTime($(target).val(),tp_inst.timeOnly)){date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec)}return date}return this._base_getDateDatepicker(target,noDefault)};$.datepicker._base_parseDate=$.datepicker.parseDate;$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings)}catch(err){date=this._base_parseDate(format,value.substring(0,value.length-(err.length-err.indexOf(":")-2)),settings)}return date};$.datepicker._base_formatDate=$.datepicker._formatDate;$.datepicker._formatDate=function(inst,day,month,year){var tp_inst=this._get(inst,"timepicker");if(tp_inst){tp_inst._updateDateTime(inst);return tp_inst.$input.val()}return this._base_formatDate(inst)};$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker;$.datepicker._optionDatepicker=function(target,name,value){var inst=this._getInst(target),name_clone;if(!inst){return null}var tp_inst=this._get(inst,"timepicker");if(tp_inst){var min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={},prop;if(typeof name=="string"){if(name==="minDate"||name==="minDateTime"){min=value}else{if(name==="maxDate"||name==="maxDateTime"){max=value}else{if(name==="onSelect"){onselect=value}else{if(overrides.hasOwnProperty(name)){if(typeof(value)==="undefined"){return overrides[name]}fns[name]=value;name_clone={}}}}}}else{if(typeof name=="object"){if(name.minDate){min=name.minDate}else{if(name.minDateTime){min=name.minDateTime}else{if(name.maxDate){max=name.maxDate}else{if(name.maxDateTime){max=name.maxDateTime}}}}for(prop in overrides){if(overrides.hasOwnProperty(prop)&&name[prop]){fns[prop]=name[prop]}}}}for(prop in fns){if(fns.hasOwnProperty(prop)){overrides[prop]=fns[prop];if(!name_clone){name_clone=$.extend({},name)}delete name_clone[prop]}}if(name_clone&&isEmptyObject(name_clone)){return}if(min){if(min===0){min=new Date()}else{min=new Date(min)}tp_inst._defaults.minDate=min;tp_inst._defaults.minDateTime=min}else{if(max){if(max===0){max=new Date()}else{max=new Date(max)}tp_inst._defaults.maxDate=max;tp_inst._defaults.maxDateTime=max}else{if(onselect){tp_inst._defaults.onSelect=onselect}}}}if(value===undefined){return this._base_optionDatepicker.call($.datepicker,target,name)}return this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value)};function isEmptyObject(obj){var prop;for(prop in obj){if(obj.hasOwnProperty(obj)){return false}}return true}function extendRemove(target,props){$.extend(target,props);for(var name in props){if(props[name]===null||props[name]===undefined){target[name]=props[name]}}return target}var splitDateTime=function(dateFormat,dateTimeString,dateSettings,timeSettings){try{var separator=timeSettings&&timeSettings.separator?timeSettings.separator:$.timepicker._defaults.separator,format=timeSettings&&timeSettings.timeFormat?timeSettings.timeFormat:$.timepicker._defaults.timeFormat,ampm=timeSettings&&timeSettings.ampm?timeSettings.ampm:$.timepicker._defaults.ampm,timeParts=format.split(separator),timePartsLen=timeParts.length,allParts=dateTimeString.split(separator),allPartsLen=allParts.length;if(!ampm){timeParts=$.trim(format.replace(/t/gi,"")).split(separator);timePartsLen=timeParts.length}if(allPartsLen>1){return[allParts.splice(0,allPartsLen-timePartsLen).join(separator),allParts.splice(0,timePartsLen).join(separator)]}}catch(err){if(err.indexOf(":")>=0){var dateStringLength=dateTimeString.length-(err.length-err.indexOf(":")-2),timeString=dateTimeString.substring(dateStringLength);return[$.trim(dateTimeString.substring(0,dateStringLength)),$.trim(dateTimeString.substring(dateStringLength))]}else{throw err}}return[dateTimeString,""]};var parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date;var splitRes=splitDateTime(dateFormat,dateTimeString,dateSettings,timeSettings);date=$.datepicker._base_parseDate(dateFormat,splitRes[0],dateSettings);if(splitRes[1]!==""){var timeString=splitRes[1],parsedTime=$.datepicker.parseTime(timeFormat,timeString,timeSettings);if(parsedTime===null){throw"Wrong time format"}return{date:date,timeObj:parsedTime}}else{return{date:date}}};var selectLocalTimeZone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){tp_inst._defaults.useLocalTimezone=true;var now=typeof date!=="undefined"?date:new Date();var tzoffset=$.timepicker.timeZoneOffsetString(now);if(tp_inst._defaults.timezoneIso8601){tzoffset=tzoffset.substring(0,3)+":"+tzoffset.substring(3)}tp_inst.timezone_select.val(tzoffset)}};$.timepicker=new Timepicker();$.timepicker.timeZoneOffsetString=function(date){var off=date.getTimezoneOffset()*-1,minutes=off%60,hours=(off-minutes)/60;return(off>=0?"+":"-")+("0"+(hours*101).toString()).substr(-2)+("0"+(minutes*101).toString()).substr(-2)};$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange("timepicker",startTime,endTime,options)};$.timepicker.dateTimeRange=function(startTime,endTime,options){$.timepicker.dateRange(startTime,endTime,options,"datetimepicker")};$.timepicker.dateRange=function(startTime,endTime,options,method){method=method||"datepicker";$.timepicker.handleRange(method,startTime,endTime,options)};$.timepicker.handleRange=function(method,startTime,endTime,options){$.fn[method].call(startTime,$.extend({onClose:function(dateText,inst){checkDates(this,endTime,dateText)},onSelect:function(selectedDateTime){selected(this,endTime,"minDate")}},options,options.start));$.fn[method].call(endTime,$.extend({onClose:function(dateText,inst){checkDates(this,startTime,dateText)},onSelect:function(selectedDateTime){selected(this,startTime,"maxDate")}},options,options.end));if(method!="timepicker"&&options.reformat){$([startTime,endTime]).each(function(){var format=$(this)[method].call($(this),"option","dateFormat"),date=new Date($(this).val());if($(this).val()&&date){$(this).val($.datepicker.formatDate(format,date))}})}checkDates(startTime,endTime,startTime.val());function checkDates(changed,other,dateText){if(other.val()&&(new Date(startTime.val())>new Date(endTime.val()))){other.val(dateText)}}selected(startTime,endTime,"minDate");selected(endTime,startTime,"maxDate");function selected(changed,other,option){if(!$(changed).val()){return}var date=$(changed)[method].call($(changed),"getDate");if(date.getTime){$(other)[method].call($(other),"option",option,date)}}return $([startTime.get(0),endTime.get(0)])};$.timepicker.version="1.0.5"})(jQuery);(function(b,c){var a=5;b.widget("ui.slider",b.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var e=this,n=this.options,m=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),h="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",d=(n.values&&n.values.length)||1,g=[];this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":""));this.range=b([]);if(n.range){if(n.range===true){if(!n.values){n.values=[this._valueMin(),this._valueMin()]}if(n.values.length&&n.values.length!==2){n.values=[n.values[0],n.values[0]]}}this.range=b("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+((n.range==="min"||n.range==="max")?" ui-slider-range-"+n.range:""))}for(var f=m.length;f<d;f+=1){g.push(h)}this.handles=m.add(b(g.join("")).appendTo(e.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(o){o.preventDefault()}).hover(function(){if(!n.disabled){b(this).addClass("ui-state-hover")}},function(){b(this).removeClass("ui-state-hover")}).focus(function(){if(!n.disabled){b(".ui-slider .ui-state-focus").removeClass("ui-state-focus");b(this).addClass("ui-state-focus")}else{b(this).blur()}}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(o){b(this).data("index.ui-slider-handle",o)});this.handles.keydown(function(s){var p=b(this).data("index.ui-slider-handle"),t,q,o,r;if(e.options.disabled){return}switch(s.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:s.preventDefault();if(!e._keySliding){e._keySliding=true;b(this).addClass("ui-state-active");t=e._start(s,p);if(t===false){return}}break}r=e.options.step;if(e.options.values&&e.options.values.length){q=o=e.values(p)}else{q=o=e.value()}switch(s.keyCode){case b.ui.keyCode.HOME:o=e._valueMin();break;case b.ui.keyCode.END:o=e._valueMax();break;case b.ui.keyCode.PAGE_UP:o=e._trimAlignValue(q+((e._valueMax()-e._valueMin())/a));break;case b.ui.keyCode.PAGE_DOWN:o=e._trimAlignValue(q-((e._valueMax()-e._valueMin())/a));break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(q===e._valueMax()){return}o=e._trimAlignValue(q+r);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(q===e._valueMin()){return}o=e._trimAlignValue(q-r);break}e._slide(s,p,o)}).keyup(function(p){var o=b(this).data("index.ui-slider-handle");if(e._keySliding){e._keySliding=false;e._stop(p,o);e._change(p,o);b(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(f){var g=this.options,n,q,e,h,s,p,r,m,d;if(g.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();n={x:f.pageX,y:f.pageY};q=this._normValueFromMouse(n);e=this._valueMax()-this._valueMin()+1;s=this;this.handles.each(function(o){var t=Math.abs(q-s.values(o));if(e>t){e=t;h=b(this);p=o}});if(g.range===true&&this.values(1)===g.min){p+=1;h=b(this.handles[p])}r=this._start(f,p);if(r===false){return false}this._mouseSliding=true;s._handleIndex=p;h.addClass("ui-state-active").focus();m=h.offset();d=!b(f.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=d?{left:0,top:0}:{left:f.pageX-m.left-(h.width()/2),top:f.pageY-m.top-(h.height()/2)-(parseInt(h.css("borderTopWidth"),10)||0)-(parseInt(h.css("borderBottomWidth"),10)||0)+(parseInt(h.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover")){this._slide(f,p,q)}this._animateOff=true;return true},_mouseStart:function(d){return true},_mouseDrag:function(f){var d={x:f.pageX,y:f.pageY},e=this._normValueFromMouse(d);this._slide(f,this._handleIndex,e);return false},_mouseStop:function(d){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(d,this._handleIndex);this._change(d,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=(this.options.orientation==="vertical")?"vertical":"horizontal"},_normValueFromMouse:function(e){var d,h,g,f,m;if(this.orientation==="horizontal"){d=this.elementSize.width;h=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{d=this.elementSize.height;h=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}g=(h/d);if(g>1){g=1}if(g<0){g=0}if(this.orientation==="vertical"){g=1-g}f=this._valueMax()-this._valueMin();m=this._valueMin()+g*f;return this._trimAlignValue(m)},_start:function(f,e){var d={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){d.value=this.values(e);d.values=this.values()}return this._trigger("start",f,d)},_slide:function(h,g,f){var d,e,m;if(this.options.values&&this.options.values.length){d=this.values(g?0:1);if((this.options.values.length===2&&this.options.range===true)&&((g===0&&f>d)||(g===1&&f<d))){f=d}if(f!==this.values(g)){e=this.values();e[g]=f;m=this._trigger("slide",h,{handle:this.handles[g],value:f,values:e});d=this.values(g?0:1);if(m!==false){this.values(g,f,true)}}}else{if(f!==this.value()){m=this._trigger("slide",h,{handle:this.handles[g],value:f});if(m!==false){this.value(f)}}}},_stop:function(f,e){var d={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){d.value=this.values(e);d.values=this.values()}this._trigger("stop",f,d)},_change:function(f,e){if(!this._keySliding&&!this._mouseSliding){var d={handle:this.handles[e],value:this.value()};if(this.options.values&&this.options.values.length){d.value=this.values(e);d.values=this.values()}this._trigger("change",f,d)}},value:function(d){if(arguments.length){this.options.value=this._trimAlignValue(d);this._refreshValue();this._change(null,0);return}return this._value()},values:function(e,h){var g,d,f;if(arguments.length>1){this.options.values[e]=this._trimAlignValue(h);this._refreshValue();this._change(null,e);return}if(arguments.length){if(b.isArray(arguments[0])){g=this.options.values;d=arguments[0];for(f=0;f<g.length;f+=1){g[f]=this._trimAlignValue(d[f]);this._change(null,f)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(e)}else{return this.value()}}}else{return this._values()}},_setOption:function(e,f){var d,g=0;if(b.isArray(this.options.values)){g=this.options.values.length}b.Widget.prototype._setOption.apply(this,arguments);switch(e){case"disabled":if(f){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.propAttr("disabled",true);this.element.addClass("ui-disabled")}else{this.handles.propAttr("disabled",false);this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(d=0;d<g;d+=1){this._change(null,d)}this._animateOff=false;break}},_value:function(){var d=this.options.value;d=this._trimAlignValue(d);return d},_values:function(d){var g,f,e;if(arguments.length){g=this.options.values[d];g=this._trimAlignValue(g);return g}else{f=this.options.values.slice();for(e=0;e<f.length;e+=1){f[e]=this._trimAlignValue(f[e])}return f}},_trimAlignValue:function(g){if(g<=this._valueMin()){return this._valueMin()}if(g>=this._valueMax()){return this._valueMax()}var d=(this.options.step>0)?this.options.step:1,f=(g-this._valueMin())%d,e=g-f;if(Math.abs(f)*2>=d){e+=(f>0)?d:(-d)}return parseFloat(e.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var g=this.options.range,f=this.options,r=this,e=(!this._animateOff)?f.animate:false,h,d={},m,p,n,q;if(this.options.values&&this.options.values.length){this.handles.each(function(s,o){h=(r.values(s)-r._valueMin())/(r._valueMax()-r._valueMin())*100;d[r.orientation==="horizontal"?"left":"bottom"]=h+"%";b(this).stop(1,1)[e?"animate":"css"](d,f.animate);if(r.options.range===true){if(r.orientation==="horizontal"){if(s===0){r.range.stop(1,1)[e?"animate":"css"]({left:h+"%"},f.animate)}if(s===1){r.range[e?"animate":"css"]({width:(h-m)+"%"},{queue:false,duration:f.animate})}}else{if(s===0){r.range.stop(1,1)[e?"animate":"css"]({bottom:(h)+"%"},f.animate)}if(s===1){r.range[e?"animate":"css"]({height:(h-m)+"%"},{queue:false,duration:f.animate})}}}m=h})}else{p=this.value();n=this._valueMin();q=this._valueMax();h=(q!==n)?(p-n)/(q-n)*100:0;d[r.orientation==="horizontal"?"left":"bottom"]=h+"%";this.handle.stop(1,1)[e?"animate":"css"](d,f.animate);if(g==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[e?"animate":"css"]({width:h+"%"},f.animate)}if(g==="max"&&this.orientation==="horizontal"){this.range[e?"animate":"css"]({width:(100-h)+"%"},{queue:false,duration:f.animate})}if(g==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[e?"animate":"css"]({height:h+"%"},f.animate)}if(g==="max"&&this.orientation==="vertical"){this.range[e?"animate":"css"]({height:(100-h)+"%"},{queue:false,duration:f.animate})}}}});b.extend(b.ui.slider,{version:"@VERSION"})}(jQuery));