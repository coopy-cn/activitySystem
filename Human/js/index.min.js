(function(a){var f="hd-initFloaer-newSet-"+a.$data.aid+"-";function b(g){if(!(this instanceof b)){return new b()}$.extend(this,{box:null,cookieName:f,lastLogin:g,});return this}$.extend(b.prototype,{show:function(j){if(!j){return}var g=f+j.key;if(this.cookieName.indexOf(g)<0){this.cookieName=g}var h=$.cookie(g);if(h>this.lastLogin){return}var l=this;var m=l.box;if(!m){var k='<div id="hd-poup-Floaer"><div class="hd-floer-inner"><span class="shutDownBtn"></span><img class="floaerImg"></div></div>';var i=$(k);$("#manageFrame").before(i);l.box=m=i}j.layOut&&j.layOut(l);m.show().removeClass().addClass(j.addClass).find(".floaerImg").attr("src",j.src);m.find(".hd-floer-inner").off("click.floaer").on("click.floaer",function(){j.caller&&j.caller()});m.find(".shutDownBtn").off("click.float").on("click.float",function(n){n.stopPropagation();l.hide()});return this},hide:function(){$.cookie(this.cookieName,new Date().getTime()+g_timeDeviation,{expires:365});this.box.hide();return this}});a.initFloaer=new b();a.initFloaer.$new=b;a.getCoupWin=function(h){var j={money:100,timeOut:"2018.10.20"};var i='<div class="theBoxContolerNewRegister"><div class="theControlBox"><img src="'+a.resRoot+'/version2/image/leadToPc/close_pc.png" alt="凡科互动" class="closeImgBtn"><img src="'+a.resRoot+'/version2/image/leadToPc/bg_pc.png" alt="凡科互动" class="happyBirth"><div class="theOneShowPoup"><img src="'+a.resRoot+'/version2/image/leadToPc/title_pc.png" alt="凡科互动" class="theTopImg"><p class="firstIntroduce">成功领取到一张代金券</p><div class="coupBoxer"><div class="letHerGotoPC">有效期至<span class="untillTo">'+h.timeOut+'</span><span class="theTips">（请在失效前尽早使用哦）</span></div><div class="clear coupInfoIntroduce "><div class="left theLeftOne"><p class="moneyNumber"><span class="moneyPointer">￥</span>'+h.money+'</p></div><div class="left theLeftTwo"><div class="redParInfo"><p class="infoOne">凡科互动</p><p class="infoTwo">无门槛版本代金券</p></div><p class="limitInfo">可用于购买版本时抵消费用</p></div></div></div><div class="TheBtn"></div></div></div></div>';var g=a.popup({name:"getCoupWin",content:i,hasTitle:false,hasBottom:false,mustHideBg:true,hasBottom:false,});g.hide();g.find(".TheBtn").on("mouseover",function(){$(this).addClass("btnWasHover")}).on("mouseleave",function(){$(this).removeClass("btnWasHover")}).on("click",function(){window.open("http://"+a.HdPortalHost+"/portal.jsp#appId=coupon")});$(".closeImgBtn,.hd-Lead-New-register").on("click",function(){g.remove();top.$(".bg-mask").hide()});$.ajax({type:"post",url:a.versionURL+"/ajax/hdportal_h.jsp?cmd=getLeadToPCCoupon",error:function(){a.hdShowMsg("error","服务繁忙，请稍候重试",false)},success:function(l){var k=$.parseJSON(l);if(k.success){g.show()}else{a.hdShowMsg("error","服务繁忙，请稍候重试",false)}}})};a.poupPurpose=function(k){var l={popWin:false,isOem:false,aid:0,selectArray:[],fromPageId:-1,_fromMail:-1,openFlag:"",openSourceId:"",};var h=$.extend(l,k);var i="";if(!h.popWin){return}var j=h.selectArray;if(h.isOem){i+='<div class="popWinContent"><img class="shutDownBtn" style="float: right;margin-right: 34px;cursor:pointer;" src="'+a.resRoot+'/image/guanbi.png?v=201701162053" /><img class="kthd" src="'+a.resRoot+'/image/Kthd.jpg?v=201701162053" /><div class="openHdTxt"><div>游戏营销</div><div class="title">让粉丝爱不释手的，微信推广神器！</div></div><div class="hdCompanyGoal"><div class="titleRadio"><span class="redDot">*</span>您期望获得的帮助是：</div>';j&&j.forEach(function(n,m){i+='<input id="hdgameGoal1_'+m+'" type="radio" name="hdgameGoal1" class="hdTrackApp" value="'+n.value+'" />';i+='<label hidefocus="true" class="trackAppLable" for="hdgameGoal1_'+m+'">'+n.name+"</label>"});i+='<div id="hdCompanyGoalErr">请先填写您期望获得的帮助</div></div><div class="bottomLine"><div class="leftArea"><div class="button openHdBtn">免费开通</div></div><div class="rightArea"><div class="button shutDownBtn" >暂不需要</div></div></div></div>'}else{i+='<div class="popWinContent popWin01"><img class="kthd" src="'+a.resRoot+'/version2/image/Kthd2.png?v=201805041120" /><span class="close shutDownBtn" ></span><div class="popWinBox"><div class="popWinBoxHeader"><h1 class="title">凡科互动</h1><p class="desc">多款有趣的活动营销工具</p></div><div class="popWinBoxBody"><p class="text">您期待的帮助是：</p>';j&&j.forEach(function(n,m){i+='<p><input id="hdgameGoal1_'+m+'" type="radio" name="hdgameGoal1" class="hdTrackApp" value="'+n.value+'" /><label class="trackAppLable" for="hdgameGoal1_'+m+'">'+n.name+"</label></p>"});i+='<p id="hdCompanyGoalErr">请先填写您期望获得的帮助</p></div><div class="popWinBoxFooter"><div class="button confirm openHdBtn">立即使用</div><div class="button cancel shutDownBtn">暂不需要</div></div></div></div>'}var g=a.popup({name:"poupDirect",content:i,hasTitle:false,hasBottom:false,mustHideBg:true,hasBottom:false,});g.on("click.shutDown",".shutDownBtn",function(){window.location.href="http://"+a.HdPortalHost}).on("click.openHd",".openHdBtn",function(){if($(".hdTrackApp:checked").length==0){$("#hdCompanyGoalErr").show();$(".bottomLine").css("top","415px");return}else{$(".bottomLine").css("top","400px");$("#hdCompanyGoalErr").hide()}var n=parseInt(h.fromPageId);var m=parseInt(h._fromMail);if(!isNaN(n)){if(n==0){a.logDog(4000003,4);$.cookie("hdGameCreatCount","0",{expires:1,path:"/"})}else{if(n==1){a.logDog(4000003,5)}else{if(n==2){a.logDog(4000003,6)}else{if(n==3){a.logDog(4000003,7);$.cookie("hdGameCreatCount","2",{expires:1,path:"/"})}else{if(n==12){a.logDog(4000003,13)}else{if(n==8){a.logDog(4000003,9);$.cookie("hdGameCreatCount","5",{expires:1,path:"/"})}else{if(n==10){a.logDog(4000003,11);$.cookie("hdGameCreatCount","1",{expires:1,path:"/"})}else{if(n==14){a.logDog(4000003,15);$.cookie("hdGameCreatCount","4",{expires:1,path:"/"})}else{if(n==16){a.logDog(4000003,17);$.cookie("hdGameCreatCount","3",{expires:1,path:"/"})}}}}}}}}}}if(!isNaN(m)&&m==1){a.logDog(4000008,18)}var p=106;var o=$(":radio[name=hdgameGoal1][checked]");if(o.length==1){p=parseInt(o.val())}$.ajax({url:a.versionURL+"/ajax/hdportal_h.jsp?cmd=setProf&hdgameGoal="+hdFai.encodeUrl(p),type:"post",data:{flag2:true,openSourceId:h.openSourceId},success:function(r){var q=$.parseJSON(r);if(q.success){$("#openHdPanel").remove();a.hdShowMsg("right","恭喜您，成功开通凡科互动。",true);a.logDog(1000207,0);setTimeout(function(){window.location.reload(true)},500)}else{a.hdShowMsg("error","系统繁忙，请稍后重试",false)}}})});return g};function e(i,h){if(!i){return}var g=new Date();g.setTime(i.getTime());g.setHours(0,0,0,0);var j=g.getTime()+h*24*60*60*1000;g.setTime(j);return g}a.initFKWMessage=function(h){if(!h||!h.poupOtion){return}var j={poupOtion:{limitDate:"",infoHref:"",verMoney:[]},cookieKey:"",cssAddress:"",};h=$.extend(true,j,h);var g=$.cookie(h.cookieKey)||"0";var i=new Date().getTime();g=parseInt(g);if(g<i){top.HdPortal.asyncCss.load("popup_fkwMessage",h.cssAddress,function(){var n="为了提供更好的服务，凡科互动产品将于8月1号下午对产品价格进行调整，届时";var m=h.poupOtion.verMoney.length;$.each(h.poupOtion.verMoney,function(o,p){n+=p.verName+"将调整为"+p.verMoney+"元/年";if(o!=(m-1)){n+="、"}});n+="，请知悉~";var l='<div class="fkwMessageBox"><div class="shutDownBox"><span class="shutDownBtn"></span></div><p class="messAgeTitle"><img src="'+a.resRoot+'/version2/image/fkwMessage/title.png"></p><p class="messAgeInfoBox">'+n+'</p><div class="getMoreInfo"><a href="'+h.poupOtion.infoHref+'" target="_blank"  class="getMoreInfoBtn">了解详情</a></div></div>';var l=a.popup({name:"poupFKWMessage",content:l,hasTitle:false,hasBottom:false,mustHideBg:true,hasBottom:false,});top.$(".bg-mask").addClass("specialOpacity");l.on("click",".shutDownBox",function(){window.location.reload(true);a.logDog(1000262,3)});l.on("click",".getMoreInfo a",function(){a.logDog(1000262,2)});var k=e(new Date(),1);$.cookie(h.cookieKey,k.getTime(),{expires:1});a.logDog(1000262,1);return l})}console.warn("not need poupOut msg")};a.addBottomAdd=function(h){if(!h||h.addType<=0){return}var i={addType:0,cssAddress:"",};var g=$.extend(true,i,h);top.HdPortal.asyncCss.load("css_sendCoup",g.cssAddress,function(){var j="";if(g.addType==1){j+='<div class="hd_sendCoup_tips"><div class="hd_box_content"><img class="hd_show_content_img showMeNow" src="'+a.resRoot+'/version2/image/myRecomm/bottomTips.png"><img class="hd_sendCoup_shut shutDownBtn" src="'+a.resRoot+'/version2/image/myRecomm/bottom_close.png" alt=""></div></div>';a.logDog(1000264,1)}else{if(g.addType==2){j+='<div class="hd_getCoup_tips "><div class="hd_box_content"><img class="hd_getFriends_coup showMeNow" src="'+a.resRoot+'/version2/image/myRecomm/finish.png"><img class="hd_getFriends_close shutDownBtn" src="'+a.resRoot+'/version2/image/myRecomm/finish_close.png"></div></div>';a.logDog(1000264,8)}}j=$(j);j.find(".shutDownBtn").on("click.shutDownPic",function(){j.hide()});j.find(".showMeNow").on("click.showMeNow",function(){if(g.addType==1){a.logDog(1000264,2);top.$("#myRecomm").click()}else{var k="http://"+a.portalHost+"/portal.jsp#appId=coupon";window.open(k)}});top.$("body").append(j)})};a.initRaiseMoney=function(k){if(!k){return}var i=k.poupType;if(k.risePricePoup&&i>0){if(i==7){if(new Date().getTime()>k.endTime){return}}var m=false;var j=k.cookieKey;var g=parseInt($.cookie(j)||"0");var h=new Date();if(h.getTime()>g){m=true;var o=1;if(i==7){o=3}var l=e(h,o);$.cookie(j,l.getTime(),{expires:o})}if(m){k.money=200;var n=top.HdPortal.$data;k.href=n.httpStr+"://"+top.HdPortal.HdPortalHost+"/jump.jsp?t=42";if(i==6){k.array=[10,50,100,200];c(k)}else{d(k)}}}};function d(g){if(!g){return}top.HdPortal.asyncCss.load("popup_raiseUpMoney",g.cssAddress_2,function(){var j=new Date();j.setTime(g.endTime);var i=j.getFullYear()+"年"+(j.getMonth()+1)+"月"+j.getDate()+"日";var h="<div class='poupCoupBox'><div class='closeBtn'></div><div class='infoBoxer'><p class='buyTips'>购买版本免费赠送"+g.money+"元无门槛礼品券</p><div class='coupDefInfo clearfix'><div class='floatLeft leftCoupInfo'><p class='coupName'>无门槛礼品券</p><p class='deadLineCoup'>截止时间 ："+i+"</p></div><div class='floatLeft rightCoupInfo'><span class='coupInfoMoney'>"+g.money+"</span><span class='package'>元</span></div></div><p class='remarkCoupInfo'>※ 礼品券可用于购买礼品商城中的话费、流量、各大视频会员卡</p></div></div><div class='updateNow'>立即升级</div>";var h=a.popup({name:"poupUpdateTips",content:h,hasTitle:false,hasBottom:false,mustHideBg:true,hasBottom:false,});h.find(".updateNow").on("click",function(){window.open(g.href)});h.find(".closeBtn").on("click",function(){top.location.reload(true)})})}function c(g){if(!g){return}top.HdPortal.asyncCss.load("popup_raiseUpMoney",g.cssAddress,function(){var l=new Date();l=e(l,7);var o=l.getFullYear()+"/"+(l.getMonth()+1)+"/"+l.getDate();var s="<div class='redPakage'><div class='closeBtn'></div><div class='theRedTypeBox' >";$.each(g.array,function(u,v){var t="";if(v!=10){t="theRedType_"+v}s+="<div class='theRedType "+t+"'><div class='boxerKeeper'><div class='MoneyShower'></div><div class='goingTips'></div></div></div>"});s+="</div><div class='clickBtn' ></div><div class='tipsWord' >点击按钮抽取红包，快来试试你的运气！</div><div class='tipsWordRight' >限抢一次</div></div><div class='theOutSideBoxer hide'><div class='closeBtn'></div><div class ='theShowerForOcoup theTipsWord'><div class='oneBaby' >升级互动版本时抵扣相应金额</div><div class='twoBaby' >截止日期：<span class='theDeadLine'>"+o+"</span></div><div class='clickBoxer' ></div></div></div>";var s=a.popup({name:"poupRaiseMoney",content:s,hasTitle:false,hasBottom:false,mustHideBg:true,hasBottom:false,});var p=g.array.length;var n=0;var i=false;function q(u,t){$(".goingTips").removeClass("brightTips");if(t){$(".goingTips").eq(u).addClass("brightTips")}}var j=setInterval(function(){q(0,(n++%2!=0))},500);s.on("click",".closeBtn",function(){top.location.reload(true)});s.find(".clickBoxer").on("click",function(){window.open(g.href)});s.find(".clickBtn").on("click.getRedPkage",function(){clearInterval(j);j=null;q(0,false);if(i){return}a.loading.show();$.ajax({url:a.versionURL+"/ajax/hdportal_h.jsp?cmd=getRaiseCoup",type:"post",data:{poupType:g.poupType},error:function(t){a.hdShowMsg("error","服务繁忙，请稍后重试。",false);a.loading.hide()},success:function(u){a.loading.hide();var t=$.parseJSON(u);if(t.success){i=true;m()}else{a.hdShowMsg("error",t.msg,false)}}})});function h(u,t){return u+Math.round(Math.random()*(t-u))}var k={now:20,go:20,turningTime:h(5000,6000),hasGoTime:0,};function m(){if(k.now>0){var t=a.easeInOut((k.go-k.now),0,k.turningTime,k.go);k.now--;t-=k.hasGoTime;k.hasGoTime+=t;var u=(k.go-k.now)%p;u--;q(u,true);setTimeout(arguments.callee,t)}else{setTimeout(r,500)}}function r(){var t="hasGetThisCoup hasGetThisCoup_200";if(g.money==100){t="hasGetThisCoup hasGetThisCoup_100"}s.addClass(t);s.find(".redPakage").hide();s.find(".theOutSideBoxer").show()}})}})(HdPortal);