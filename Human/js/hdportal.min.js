if(typeof HdPortal=="undefined"){var HdPortal={}}(function(a){var c=Array.prototype;if(!c.every){c.every=function(e){if(typeof e!="function"){throw e+" is not a function"}for(var d=0,f=this.length;d<f;d++){if(!e(this[d],d)){return false}}return true}}if(!c.contains){c.contains=function(d){var e=this;if(arguments.length>1){return c.every.call(arguments,function(f){return e.contains(f)})}return e.indexOf(d)!==-1}}if(!c.remove){c.remove=function(e){var d=this.indexOf(e);if(d!==-1){return this.splice(d,1)}return null}}if(!String.prototype.safeReplace){String.prototype.safeReplace=function(e,f){if(typeof f=="string"){var d=f;f=function(){return d}}return this.replace(e,f)}}a.versionURL="";if(document.URL.indexOf("/hp/")!=-1){a.versionURL="/hp"+a.versionURL}a.isDefaultAppId=function(e,d){if(d){if(e){if(d==="wx7953611d4b208753"||d==="wx0f863578a9b0ca9c"||d==="wxd40dde5516fa9024"){return true}}else{if(d==="wx25367438c8ce0799"||d==="wx50775cad5d08d7ad"){return true}}}return false};a.checkPhone=function(d){return/^([0-9]{3,4}-?)?[0-9]{5,12}$/.test(d)};a.getDateForLong=function(h){var e=new Date(h);var f=a.pad(e.getFullYear(),4);var g=a.pad(e.getMonth(),2);var d=a.pad(e.getDate(),2);return new Date(f,g,d).getTime()};a.getDateString=function(e){var d=new Date(e);return a.pad(d.getFullYear(),4)+"-"+a.pad(d.getMonth()+1,2)+"-"+a.pad(d.getDate(),2)};a.getDateStringSecond=function(e){var d=new Date(e);return a.pad(d.getFullYear(),4)+"-"+a.pad(d.getMonth()+1,2)+"-"+a.pad(d.getDate(),2)+" "+a.pad(d.getHours(),2)+":"+a.pad(d.getMinutes(),2)};a.hdShowMsg=function(k,e,j,f,g){if(!top){console.log(top)}if(top!==window){return top.HdPortal.hdShowMsg.apply(this,arguments)}var h="";h='<div id="hdShowMsg" style="position:fixed;top:30px; left: 42%; margin:0px auto;width:auto;  height:auto; z-index:9999;"></div>';if(top.$("#hdShowMsg").length==0){top.$(h).appendTo("body")}var i=top.$("#hdShowMsg");var o=top.$("body").scrollTop();if(hdFai.isIE()&&o==0){o=top.$("html").scrollTop()}if(o>0){i.css("top",(o+20)+"px")}var d=parseInt(Math.random()*10000);var n='<div class="hdMsgBox" style="width:'+g+'" id="'+d+'"></div>';i.find(".hdMsgBox").remove();top.$(n).appendTo(i);var l=top.$("#hdShowMsg .hdMsgBox");l.addClass("hdMsgDown");var m='<div class="icon '+k+'"></div>';l.find(".icon").remove();top.$(m).appendTo(l);l.find(".msg").remove();top.$('<div class="msg">'+e+"</div>").appendTo(l);a.hdShowMsg.autoCloseTime=k=="right"?2000:3000;top.HdPortal.removeHdShowMsg(j,d)};a.removeHdShowMsg=function(d,f,e){if(top!==window){return top.HdPortal.hdShowMsg.apply(this,arguments)}if(typeof f!="undefined"&&top.$("#"+f).length>0){top.window.setTimeout(function(){top.$("#"+f).removeClass("hdMsgDown");top.$("#"+f).addClass("hdMsgUp");top.window.setTimeout(function(){top.$("#"+f).remove()},400)},a.hdShowMsg.autoCloseTime)}else{top.window.setTimeout(function(){top.$("#"+f).removeClass("hdMsgDown");top.$("#"+f).addClass("hdMsgUp");top.window.setTimeout(function(){top.$("#hdShowMsg").remove()},400)},a.hdShowMsg.autoCloseTime)}if(typeof a.hdShowMsg.callBack=="function"&&e){a.hdShowMsg.callBack()}};a.logout=function(d){a.poupUpBox("确定要退出系统吗？",1,"","",true,"nav_logout",function(){$.ajax({type:"post",url:"/ajax/login_h.jsp?cmd=logout",error:function(){a.hdShowMsg("error","服务繁忙，请稍后重试。",false)},success:function(e){e=jQuery.parseJSON(e);if(e.success){if(d){top.location.href=d}else{top.location.href="/"}}else{a.hdShowMsg("error",e.msg,false)}}})},true)};a.setFlag=function(f,h,g){if(a.getType(h)=="object"){for(var e=0;e<31;e++){var d=1<<e;var j=h[d+""];if(typeof j=="boolean"){f=a.setFlag(f,d,j)}}}else{if(g){f|=h}else{f&=~h}}return f};a.getFlagCtrl=(function(){function d(g,f){if(!(this instanceof d)){return new d(g,f)}this.ctrl=g;this.flag=f||0}$.extend(d.prototype,{get:e(function(f,g,i){if(i==undefined){var h={},j=this;$.each(this.ctrl,function(k){h[k]=j.get(g,k)});return h}return hdFai.checkBit(g,i)}),set:e(function(f,g,i,h){if($.type(i)=="object"){var j=this;$.each(i,function(k,l){g=j.set(g,k,l)})}else{g=a.setFlag(g,i,h)}if(f){this.flag=g}return g})});return d;function e(f){return function(h){var i=c.slice.call(arguments);var g=$.type(h)!="number";if(g){i.unshift(this.flag)}if(i[1]!=undefined&&$.type(i[1])!="object"){if(!this.ctrl[i[1]]){return}i[1]=1<<this.ctrl[i[1]]}i.unshift(g);return f.apply(this,i)}}})();a.isNull=function(d){return(typeof d=="undefined")||(d==null)};a.popupWindow=function(i){if(top!==window){return top.HdPortal.popupWindow.apply(this,arguments)}var v={title:"",width:500,height:300,frameSrcUrl:"about:_blank",frameHeight:"100%",frameWidth:"100%",frameOverFlow:false,frameScrolling:"auto",bannerDisplay:true,framePadding:true,opacity:"0.3",displayBg:true,bgClose:true,closeBtnClass:"",className:""};v=$.extend(v,i);var q=parseInt(v.width);var u=parseInt(v.height);var j=top.document.documentElement.clientWidth;if(!$.browser.msie){j=top.document.body.clientWidth}var m=top.document.documentElement.clientHeight;var w="";var y="";var k="";if(!v.bannerDisplay){y="display:none;";w="background:none;";if(!v.closeBtnClass){v.closeBtnClass="formX_old"}}if(!v.framePadding){w+="padding:0;";k='allowtransparency="true"'}var p=parseInt(Math.random()*10000);var h="<iframe "+k+' id="popupWindowIframe'+p+'" class="popupWindowIframe" src="" frameborder="0" scrolling="'+v.frameScrolling+'" style="width:'+v.frameWidth+";height:"+v.frameHeight+';display:block;"></iframe>';var r=true;if(v.divId!=null){r=false;h=$(v.divId).html()}if(v.divContent!=null){r=false;h=v.divContent}if(v.displayBg){var s="";var d="";s='<div id="popupBg'+p+'" class="popupBg" style=\''+d+"display:none;' ></div>";var f=top.$(s);f.appendTo("body");f.show().addClass("bg-mask-animate")}var g=top.$("body").scrollTop();if(g==0){g=top.$("html").scrollTop()}var t="left:0px;right:0px;margin:auto;"+(v.frameOverFlow?"overflow:visible;":"");var e="position:relative;width:"+q+"px;height:"+u+"px;";var o=['<div id="popupWindow'+p+'" class="formDialog '+(v.className?v.className:"")+'" style="'+t+'">','<div class="formTL" style=\''+y+'\'><div class="formTR"><div class="formTC">'+v.title+"</div></div></div>",'<div class="formBL" style=\''+w+"'>",'<div class="formBR" style=\''+w+"'>",'<div class="formBC" id="formBC'+p+'" style="height:auto;'+w+'">','<div class="formMSG" style="'+e+'">',h,"</div>","</div>","</div>","</div>",'<a href="javascript:;" class="formX '+v.closeBtnClass+"\" hidefocus='true' onclick='return false;'></a>","</div>"];var n=top.$(o.join("")).appendTo("body");var x=40;var l=20;if(!v.bannerDisplay){x=0}if(v.divInit!=null){v.divInit(p)}n.addClass("poup-box-animate").ready(function(){n.find(".formX").on("click",function(){if(top.expInput&&(top.expInput.hasClass("ERR_hasErr")||top.expInput.hasClass("inputErr"))){return}a.closePopupWindow(p);return false});if(v.bgClose){top.$("#popupBg"+p).on("click",function(){n.find(".formX").click()})}if(a.isNull(top._popupOptions)){top._popupOptions={}}if(a.isNull(top._popupOptions["popup"+p])){top._popupOptions["popup"+p]={}}if(!a.isNull(i.callArgs)){top._popupOptions["popup"+p].callArgs=i.callArgs}top._popupOptions["popup"+p].options=i;top._popupOptions["popup"+p].change=false;if(r){top.$("#popupWindowIframe"+p).attr("src",a.addUrlParams(v.frameSrcUrl,"popupID="+p)).load(function(){var z=null;try{z=this.contentWindow._popupWindowReady}catch(A){console.warn(A)}z&&z.call(this,v.data)})}});return p};a.bg=function(i,e,h){var f="";var d="";if(e){d="filter: alpha(opacity="+e*100+"); opacity:"+e+";"}f='<div id="popupBg'+i+'" class="popupBg" style=\''+d+"display:none;' ></div>";var g=top.$(f);g.appendTo("body");g.addClass("bg-mask-animate").fadeIn(0,h)};a.addUrlParams=function(d,e){if((typeof e=="undefined")||(e==null)){return d}if(d.indexOf("?")<0){return d+"?"+e}return d+"&"+e};a.closePopupWindow=function(i,f){var g=top.$(".popupBg");var h=top.$(".formDialog");h.removeClass("poup-box-animate");g.removeClass("bg-mask-animate");setTimeout(function(){g.remove();h.remove()},300);var e=top._popupOptions["popup"+i];var d=e.options;if(!hdFai.isNull(d.closeFunc)){if(f){d.closeFunc(f)}else{d.closeFunc(top._popupOptions["popup"+i].closeArgs)}}top._popupOptions["popup"+i]={}};a.getType=function(d){return Object.prototype.toString.call(d).match(/\[object\s(\w+)]/)[1].toLowerCase()};a.imgReady=(function(){var g=[],f=null,e=function(){var h=0;for(;h<g.length;h++){g[h].end?g.splice(h--,1):g[h]()}!g.length&&d()},d=function(){clearInterval(f);f=null};return function(i,n,p,m){var o,j,q,l,h,k=new Image();k.src=i;if(k.complete){n.call(k);p&&p.call(k);return}j=k.width;q=k.height;k.onerror=function(){m&&m.call(k);o.end=true;k=k.onload=k.onerror=null};o=function(){if(!k){return}l=k.width;h=k.height;if(l!==j||h!==q||l*h>2){n.call(k);o.end=true}};o();k.onload=function(){!o.end&&o();p&&p.call(k);k=k.onload=k.onerror=null};if(!o.end){g.push(o);if(f===null){f=setInterval(e,40)}}}})();a.logDog=$.throttle(function(d){if(d.length==1){a.logDogSynch.apply(a,d[0])}else{a.logDogList($.map(d,function(e){var g={id:parseInt(e[0])};var h=parseInt(e[1]);var f=parseInt(e[2]);!isNaN(h)&&(g.src=h);!isNaN(f)&&(g.objId=f);return g}))}},0,true);a.logObjDog=function(f,d,e){a.logDog(f,d,e)};a.logDogList=function(d){$.ajax({type:"post",url:"/ajax/log_h.jsp?cmd=dogList",data:{dogList:$.toJSON(d)},})};a.logDogSynch=function(g,e,f){var d=isNaN(f)?"":"&objId="+hdFai.encodeUrl(f);$.ajax({type:"get",url:"/ajax/log_h.jsp?cmd=dog&dogId="+hdFai.encodeUrl(g)+"&dogSrc="+hdFai.encodeUrl(e)+d,})};a.logBss=function(h,e,d,g){var f={bss:h,content:e,};g&&(f.aid=g);d&&(f.flow=d);$.ajax({type:"post",url:"/ajax/log_h.jsp?cmd=bss",data:f,})};a.getHanziSize=function(j,d){j=j||"";var g=/[^\x00-\xff]/;var h=0,f=0;for(var e=0;e<j.length;e++){var k=j.charAt(e);if(g.test(k)){h+=2}else{f++}if(d&&h+f>d){return j.substr(0,e)}}if(d){return j}return h+f};a.checkMaxTextLength=function(e,j,i,f,h,g,d){return a.checkMaxLen(j.val(),e,j,i,f,h,g,d)};a.checkMaxLen=function(e,q,h,o,l,i,k,j){if(h.length>1){var m=c.slice.call(arguments);var g=true;h.each(function(r){m[2]=$(this);if(!a.checkMaxLen.apply(a,m)){g=false}});return g}e=typeof e=="undefined"?"":e+"";var n=e.replace(/[^\x00-\xff]/g,"**");var d=n.trim().length;var f=l?"":"输入不能为空且";var i=i?i:"";if(o=="noLimitType"||o=="limitNumType"){if(d==0||a.getHanziSize(e)>q){if(o=="noLimitType"){if(d==0&&l){ERR.removeErr(h)}else{ERR.addErr(h,f+"长度不超过"+q/2+"个汉字或"+q+"个英文字母",i,k,j);return false}}else{if(d==0&&l){ERR.removeErr(h)}else{ERR.addErr(h,f+"长度不超过"+q+"个数字",i,k,j);return false}}}else{ERR.removeErr(h)}}if(o=="noLimitTypeAll"){if(d==0||e.trim().length>q){if(d==0&&l){ERR.removeErr(h)}else{ERR.addErr(h,f+"长度不超过"+q+"个汉字或英文字母",i,k,j);return false}}else{ERR.removeErr(h)}}if(o=="limitSizeType"){var p=parseInt(e);if(d==0||(p&&p>q)){if(d==0&&l){ERR.removeErr(h)}else{ERR.addErr(h,f+"大小不超过"+q,i,k,j);return false}}else{ERR.removeErr(h)}}return true};a.checkMaxLenForEditActive=function(e,d,h,l,i,k,j){if(h.length>1){var m=c.slice.call(arguments);var g=true;h.each(function(o){m[2]=$(this);if(!a.checkMaxLen.apply(a,m)){g=false}});return g}var n=e&&e.trim().length;var f=l?"":"输入不能为空且";var i=i?i:"";if(n==0||n>d){if(n==0&&l){ERR.removeErr(h)}else{ERR.addErr(h,f+"长度不超过"+d+"个字",i,k,j);return false}}else{ERR.removeErr(h)}return true};var b=[{sensword:"游戏",adVance:"活动"},{sensword:"红包",adVance:"hong包"},{sensword:"紅包",adVance:"hong包"},{sensword:"分享",adVance:"fen享"},{sensword:"朋友圈",adVance:"peng友圈"},{sensword:"现金",adVance:"xian金"},{sensword:"福利",adVance:"fu利"}];a.checkSensitword=function(g,e){if(typeof g==="object"){if(g.val()){g=g.val().trim()}else{var d=g.clone();d.find(":nth-child(n)").remove();g=d.html()}}var f={sensword:"",replaceWord:""};g&&$.each(b,function(h,j){if(g.indexOf(j.sensword)>-1){f.sensword=("“"+j.sensword+"”");f.replaceWord=("“"+j.adVance+"”");return false}});if(f.sensword){e&&e(f);return f}else{return false}};a.checkTextLength=function(n,f){var k=f.val().replace(/[^\x00-\xff]/g,"**");var e=k.length;if(e<n){return}var j=k.substr(0,n);var h=0;var l="";for(var g=0;g<j.length;g++){var d=j.charAt(g);if(d=="*"){h++}}var m=0;if(h%2==0){m=h/2+(n*1-h);l=f.val().substr(0,m)}else{m=(h-1)/2+(n*1-h);l=f.val().substr(0,m)}f.val(l)};a.pad=function(d,e){d=d+"";while(d.length<e){d="0"+d}return d};a.jointParams=function(e){var d=[];$.each(e,function(f,g){d.push(f+"="+g)});return d.join("&")};a.setUrlArg=function(){if(arguments.length<2){return}var e=Array.prototype.slice.call(arguments),d=a.parseURL(e.shift());$.each(e,function(f,g){if($.type(g)==="array"){d.params[g[0]]=g[1]}});d.obj.search=a.jointUrlArg("",a.jointParams(d.params));return d.obj.href};a.removeUrlArg=function(){var e=Array.prototype.slice.call(arguments);if(e.length<2){return}var d=a.parseURL(e.shift());$.each(e,function(f,g){if(d.params.hasOwnProperty(g)){delete d.params[g]}});d.obj.search=a.jointUrlArg("",a.jointParams(d.params));return d.obj.href};a.jointUrlArg=function(e,d){if(d){return e+(e.indexOf("?")>=0?"&":"?")+d}else{return e}};a.wxCardProgress=(function(){var k=100,l,f,g,h,e,i="正在同步生成微信卡券，请勿关闭！",n=10,m=false;var d={dieTime:500,init:function(p,o,t,s,q){if(top.$("#hdShowMsg").length>0){top.$("#hdShowMsg .close").click()}var r=top.$("body");i=s||"正在同步生成微信卡券，请勿关闭！";if(h){console.warn("wxCardProgress _progress err");return}if(typeof o==="number"){n=(~~(o/400)+1)*10}else{n=10}if(typeof t==="number"){this.dieTime=t}if(typeof q==="boolean"&&q!=undefined){this.noNum=q}l&&l.remove();clearTimeout(g);if(p){l=$('<div id="wxCardProgressMask"><div id="wxCardProgress"><div id="wxCardProgressIcon"><span id="wxCardProgressBar"></span></div><span id="wxCardProgressText">100%</span></div></div>')}else{l=$('<div id="wxCardProgress"><div id="wxCardProgressIcon"><span id="wxCardProgressBar"></span></div><span id="wxCardProgressText">100%</span></div>')}r.append(l);f=0;if(!q){j()}h=true},die:function(o){h=false;clearTimeout(e);if(this.dieTime==0){l.remove();l=null;o&&o();return}g=setTimeout(function(){l.remove();l=null;o&&o()},this.dieTime)},end:function(o){if(!h){o&&o();return}l.find("#wxCardProgressText").text("100%");l.find("#wxCardProgressBar").css("width","100%");this.die(o)},};function j(){f++;l.find("#wxCardProgressText").text((~~f)+"%");l.find("#wxCardProgressBar").css("width",(~~f)+"%");if(f<30){e=setTimeout(arguments.callee,n)}else{if(f<55){e=setTimeout(arguments.callee,n*2)}else{if(f<75){e=setTimeout(arguments.callee,n*4)}else{if(f<90){e=setTimeout(arguments.callee,n*8)}else{if(f<99){e=setTimeout(arguments.callee,n*16)}}}}}}return d})();(function(){var g=function(o,l,q){var n={time:50,enter:null,leave:null,};$.extend(n,q);var p=l=="enter";var j=hdFai.HdList("e1");var k=function(v,w,u,t,r){if(!t){return}t.flag&=~r;if(t.flag){return}if($.type(v)=="function"){v=v($(t.e1),t.e2)}clearTimeout(t.timer);v<0?s(true):(t.timer=setTimeout(s,v));function s(x){d(t.e2,false);n.leave&&n.leave.call(w,u,$(t.e1),t.e2,r==1);f(t.e2,m[2],m[3]);j.not(t.e1)}};var m=[function(u){var s=j.getByName(this);!s&&j.add(s={e1:this,flag:0});if(!p&&j.size()>1){for(var r=0;r<j.size();r++){var v=j.get(r);if(v.e1!=this){v.flag=0;k(-1,s.e1,u,v,1);r--}}}if(!s.e2){d(s.e2=l,true);if(n.enter){var t=n.enter.call(this,u,$(this),l);if(p&&t){d(s.e2=t,true)}}i(s.e2,m[2],m[3])}s.flag|=1;clearTimeout(s.timer)},function(r){k(n.time,this,r,j.getByName(this),1)},function(r){var s=this;j.forEach(function(t){if(!h(t.e2)||t.e2[0]!=s){return}t.flag|=2;clearTimeout(t.timer)})},function(r){var s=this;j.forEach(function(t){if(!h(t.e2)||t.e2[0]!=s){return}k(n.time,s,r,t,2)})}];i(o,m[0],m[1])};var e=function(j){j.off("mouseenter.hp_link").off("mouseleave.hp_link")};$.each(["on","off"],function(k,j){g[j]=function(m,n,l){if($.isArray(m)){h(m[0])&&m[0][j](n,m[1],l)}else{h(m)&&m[j](n,l)}return g}});g.onMouseEvent=i;g.offMouseEvent=f;a.link=g;a.unlink=e;function h(j){return j&&(j instanceof $||j.jquery===$.fn.jquery)}function i(k,l,j){g.on(k,"mouseenter.hp_link",l).on(k,"mouseleave.hp_link",j)}function f(k,l,j){g.off(k,"mouseenter.hp_link",l).off(k,"mouseleave.hp_link",j)}function d(k,j){h(k)&&k.toggle(j)}})();$.each(["set","get","remove"],function(d,e){a[e+"LocalStorage"]=function(f,g){if(!localStorage){console.warn("不支持localStorage");return}return localStorage[e+"Item"](f,g)}});a.parseURL=function(e){var d=document.createElement("a");d.href=e;return{obj:d,source:e,protocol:d.protocol.replace(":",""),host:d.hostname,port:d.port,query:d.search,params:(function(){var h={},g=d.search.replace(/^\?/,"").split("&"),f=g.length,j=0,k;for(;j<f;j++){if(!g[j]){continue}k=g[j].split("=");h[k[0]]=k[1]}return h})(),file:(d.pathname.match(/\/([^\/?#]+)$/i)||[,""])[1],hash:d.hash.replace("#",""),path:d.pathname.replace(/^([^\/])/,"/$1"),relative:(d.href.match(/tps?:\/\/[^\/]+(.+)/)||[,""])[1],segments:d.pathname.replace(/^\//,"").split("/")}};a.encodeBase64=function(l){var k,j,g;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var h=0,d=l.length,f="";while(h<d){k=l.charCodeAt(h++)&255;if(h==d){f+=e.charAt(k>>2);f+=e.charAt((k&3)<<4);f+="==";break}j=l.charCodeAt(h++);if(h==d){f+=e.charAt(k>>2);f+=e.charAt(((k&3)<<4)|((j&240)>>4));f+=e.charAt((j&15)<<2);f+="=";break}g=l.charCodeAt(h++);f+=e.charAt(k>>2);f+=e.charAt(((k&3)<<4)|((j&240)>>4));f+=e.charAt(((j&15)<<2)|((g&192)>>6));f+=e.charAt(g&63)}return f};a.decodeBase64=function(m){var h,g,e,d,k=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];var j,l,f;l=m.length;j=0;f="";while(j<l){do{h=k[m.charCodeAt(j++)&255]}while(j<l&&h==-1);if(h==-1){break}do{g=k[m.charCodeAt(j++)&255]}while(j<l&&g==-1);if(g==-1){break}f+=String.fromCharCode((h<<2)|((g&48)>>4));do{e=m.charCodeAt(j++)&255;if(e==61){return f}e=k[e]}while(j<l&&e==-1);if(e==-1){break}f+=String.fromCharCode(((g&15)<<4)|((e&60)>>2));do{d=m.charCodeAt(j++)&255;if(d==61){return f}d=k[d]}while(j<l&&d==-1);if(d==-1){break}f+=String.fromCharCode(((e&3)<<6)|d)}return f};a.urlsafe_encodeBase64=function(d){return a.encodeBase64(d).replace(/\+/g,"_").replace(/\//g,"-").replace(/=/g,"")};a.urlsafe_decodeBase64=function(d){return a.decodeBase64(d.replace(/_/g,"+").replace(/-/g,"/"))};(function(){var e="hd_r";function d(h,g){h&&(this.name=h);g&&(this.cb=g)}function f(){if(!(this instanceof f)){return new f()}var g=new d();g.isRoot=true;g.path="";$.extend(this,{root:g,currentPath:null,defPath:"",confs:{},})}$.extend(f.prototype,{setConf:function(h,g){this.confs[h]=g;return this},setDefPath:function(g){this.defPath=g;return this},bind:function(k,j,i){var g=this,h="";i=i||this.root;k!==null&&$.each(k.split("/"),function(m,n){!i.next&&(i.next={});var l=i.next[h=n];if(l===undefined){i.next[n]=l=new d(n);l.path=i.path+(i.path?"/":"")+n;l.prev=i}i=l});if($.type(j)=="function"){i.cb=j}else{if(j.next){i.cb=j.cb;j=j.next}$.each(j,function(l,m){g.bind(l,m,i)})}return this},go:function(o,j){var l=this,n=o?o.split("/"):[],m=l.currentPath?l.currentPath.split("/"):[],h=this.root,k=this.confs[o]||{},g=[];while(n.length>0){if(m[0]!=n[0]){break}h=h.next[m.shift()];g.push(n.shift())}(function i(s,r){var q=s.cb&&s.cb(j,r);var p=function(u){if(n.length==0){return}var t=s.next[n.shift()];if(!t){t=s.next.newActive}i(t,u)};q&&$.isFunction(q.then)?q.then(p):p(q)})(h);l.setPath(o,k.replace);return this},init:function(){var g=this;window.addEventListener("popstate",function(h){var i=g.getPath();if(i!=g.currentPath){g.go(i)}});g.go(g.getPath());return this},getPath:function(){var g=hdFai.getUrlParam(location.search,e);g=g?a.urlsafe_decodeBase64(g):"";return g||this.defPath},setPath:function(j,i){var g,h=i?"replaceState":"pushState";this.currentPath=j;if(j==this.getPath()){return}if(j==this.defPath){g=a.removeUrlArg(location.href,e)}else{g=a.setUrlArg(location.href,[e,a.urlsafe_encodeBase64(j)])}history[h]&&history[h]({path:j},"",g);return this}});a.Route=new f();a.Route.$new=f}());a.getGiftAmount=function(f,e){var d=a.storeId;var g=a.areaId;if(e){d=0;g=0}$.ajax({type:"post",url:"/ajax/hdgift_h.jsp?cmd=getAssetAmount&storeId="+d+"&areaId="+g,error:function(){a.hdShowMsg("error","服务繁忙，请稍候重试",false)},success:function(h){var i=$.parseJSON(h);f&&f(i)}})};a.getBalance=function(f,e){var d=a.storeId;var g=a.areaId;if(e){d=0;g=0}$.ajax({type:"post",url:"/ajax/hdcash_h.jsp?cmd=getBalance&storeId="+d+"&areaId="+g,error:function(){a.hdShowMsg("error","服务繁忙，请稍候重试",false)},success:function(h){var i=$.parseJSON(h);f&&f(i)}})};a.getMainStoreBalance=function(d){a.getBalance(d,true)};(function(){function i(o,n){var l,k,j;try{l=o.toString().split(".")[1].length}catch(p){l=0}try{k=n.toString().split(".")[1].length}catch(p){k=0}j=Math.pow(10,Math.max(l,k));return(o*j+n*j)/j}function f(p,o){var l,k,j,r;try{l=p.toString().split(".")[1].length}catch(q){l=0}try{k=o.toString().split(".")[1].length}catch(q){k=0}j=Math.pow(10,Math.max(l,k));r=(l>=k)?l:k;return Number(((p*j-o*j)/j).toFixed(r))}function h(n,k){var j=0,o=n.toString(),l=k.toString();try{j+=o.split(".")[1].length}catch(p){}try{j+=l.split(".")[1].length}catch(p){}return Number(o.replace(".",""))*Number(l.replace(".",""))/Math.pow(10,j)}function e(m,l){var o=0,n=0,k,j;try{o=m.toString().split(".")[1].length}catch(p){}try{n=l.toString().split(".")[1].length}catch(p){}k=Number(m.toString().replace(".",""));j=Number(l.toString().replace(".",""));return(k/j)*Math.pow(10,n-o)}function g(n,m){var k=(n+"").split(".");n=parseInt(k[0]);var j=[],l=0;n=(n||0).toString().split("");for(var o=n.length-1;o>=0;o--){l++;j.unshift(n[o]);if(!(l%3)&&o!=0){j.unshift(",")}}var p=j.join("");if(k.length==2){p=p+"."+k[1]}return p}function d(j){return function(l,k){if(isNaN(l)||isNaN(k)){return NaN}return j(l,k)}}a.Num={add:d(i),sub:d(f),mul:d(h),div:d(e),translate:d(g),};$.each(["floor","ceil","round"],function(j,k){a.Num[k]=function(n,m){if($.type(n)=="string"){n=parseFloat(n)}if(!m){return Math[k](n)}var l=Math.pow(10,m);return Math[k](n*=l)/l}})})();a.foreiganNum=function(e){var d=(e+"").split(".");d[0]=d[0].replace(/(?=(?!\b)(\d{3})+$)/g,",");return d.join(".")};a.loading=(function(){var d="hp_loading";return{show:function(g,f,i){g=g||top.$("body");var h=g.data(d);if(h&&h.parent(g).length>0){return h}h=$('<div class="loading-animate"><div class="loadingBg" style="width: 108px; height: 108px; border-radius: 8px; background-color: rgba(0,0,0,.75); left:50%; top: 50%; margin-top: -46px; margin-left: -54px;"></div><div><div class="c1"></div><div class="c2"></div><div class="c3"></div><div class="c4"></div></div><span>'+(i||"加载中")+"...</span></div>");g.append(h).data(d,h);if(!g.is("body")&&!g.is("html")){var e=g.css("position");if(e==="static"){g.css("position","relative");h.data(d+"_position",e)}}if($.type(f)=="string"){h.css("background",f)}else{if(f){h.css("background","none")}}return h},hide:function(f){f=f||top.$("body");var g=f.data(d);if(!g){return}var e=g.data(d+"_position");if(e){f.css("position",e)}g.remove();f.removeData(d)}}})();a.getAsynchPopup=function(d){d=$.extend({resKey:"",popup:null,closeEvent:"poupBox_close",},d);return function(){var f=Array.prototype.slice.call(arguments);f.unshift(e);return d.popup.apply(null,f)};function e(h,f){var g;if(f){g=f.find(".poupContent")}var j=function(){h=g=null};d.closeEvent&&f.on(d.closeEvent,j);var i=top.HdPortal.Res.loadg(d.resKey).done(function(){h&&h()});if(i.state()=="pending"&&g){a.loading.show(g,"#fff");g.addClass("loadingBox");i.always(function(){if(!g){return}g.removeClass("loadingBox");a.loading.hide(g)})}return i.promise({close:j})}};a.showPublishBoxById=function(f,e,d){if(a.isOem&&e.authVer==a.hdVer.FREE){a.hdShowMsg("error","试用版无法发布活动，请先升级版本",false);return}if(a.showPublishBoxById.lock){return}a.showPublishBoxById.lock=true;a.getGameInfo(f,function(g){a.showPublishBoxById.lock=false;if(g.data){var i=a.showPublishBox(g.data,e);d&&d(!!i,i)}else{var h=d&&d(false,g);h!==false&&setTimeout(function(){if(!navigator.onLine){a.hdShowMsg("error","网络无法连接，请检查网络",true)}},4)}})};a.showPublishBox=a.getAsynchPopup({resKey:"publishGame",popup:function(g,e,d){if(!a.isStaff&&e.style==77){if(!hdFai.checkBit(top.HdPortal.$data.profFlag,16384)){a.hdShowMsg("error","该活动涉及支付功能，请先到个人中心开通公众号支付功能",false);return}if(d.realVer<a.hdVer.ZS){a.hdShowMsg("error","该活动需要"+d.zsName+"才能发布",false);return}}var f=a.popup({name:"publishGame",hasBottom:false,title:"确认发布",styles:"width: 800px;",});g(function(){top.HdPortal.showPublishBox.layout(f,e,d)},f);return f}});a.showGuideShare=a.getAsynchPopup({resKey:"guideShare",closeEvent:"",popup:function(g,e,f){var d=a.getEditPoup("guideShare",function(h){g(function(){h.layout(top.HdPortal.showGuideShare.layout())},h.box);return{title:false}}).show();g(function(){top.HdPortal.showGuideShare.init(d.box,e,f)});return d.box}});a.initCallBack=function(f,d){var e=new hdFai.CallBack();f=f||{};$.each(e.getApiKeys(),function(h,g){f[g]=function(){var i=e[g].apply(e,arguments);return i===e?this:i}});if(typeof d!=="undefined"){e.register(d)}return f};a.createInput=function(g,f,e,d){var g=g?g:"";return'<div class="input-row-baseLine"><span class="baseLineFlag">*</span><span class="baseLineTitle">'+f+'</span><input type="text" class="main-Input '+e+'" placeholder="'+g+'" style="'+d+'"></div>'};a.getHoverTipsBox=(function(){function e(f){if(!(this instanceof e)){return new e(f)}this.hoverTips=null;this.isFixed=!!f}e.fn=e.prototype;$.extend(e.fn,{layout:function(p,h,l,x,A){var s={marginRight:0,html:false,outer:false,scroll:true,parent:null,after:null,textClass:"",};var n={top:"",left:"",width:"","max-width":"","min-width":"",height:"","max-height":"",};$.extend(s,x);$.extend(n,x);var m=s.parent;var w;if(l instanceof $&&l.hasClass("hoverTipsBox")){w=l;s.parent=true;w.addClass(h).show()}else{if(this.hoverTips){this.remove()}if(s.outer){s.parent=null}var t=s.outer?top.$:$;w=this.hoverTips=t('<div class="hoverTipsBox '+h+'"><div class="text">'+l+'</div><div class="tipsBoxArrow"></div></div>');if(!s.parent){m=t("body")}else{if($.type(s.parent)=="string"){m=p.closest(s.parent)}else{if($.type(s.parent)=="function"){m=s.parent(p,t)}else{if(s.parent===true){m=p.parent()}}}}m.append(w);if(s.textClass){w.find(".text").addClass(s.textClass)}}var z=s.parent?p.position(w.offsetParent()):p.offset();var k=window;if(s.outer){while(k.parent!==k&&k.frameElement){var v=k.parent.$(k.frameElement).offset();if(z&&v){z.left+=v.left-k.$(k).scrollLeft();z.top+=v.top-k.$(k).scrollTop()}k=k.parent}k=top}w.css({width:n.width,"min-width":n["min-width"],"max-width":n["max-width"]||n.width,height:n.height,"max-height":n["max-height"]||n.height,});var y=w.outerHeight();var j=arrowRight="";var f=$("body").hasClass("version3");if(!x||x.top===undefined){var o=f?12:8;if(w.hasClass("down")){n.top=z.top+p.outerHeight()+o}else{n.top=z.top-y-o}}if(!x||x.left===undefined){var u=f?8:6.365;if(A=="center"){n.left=z.left+p.outerWidth()/2-w.outerWidth()/2;j=w.outerWidth()/2-s.marginRight-u}else{if(A=="right"){n.left=z.left+p.outerWidth()-w.outerWidth()+20;arrowRight=p.width()/2-u+s.marginRight+20}else{n.left=z.left-20;j=20+p.width()/2-u-s.marginRight}}}$.type(n.left)=="number"&&(n.left+=s.marginRight);if(!s.parent&&s.scroll&&n.top!==""){var i=0,g=5;if(h=="down"){i=n.top+y-k.$(k.document).height()+g}else{if(n.top<g){i=g-n.top;n.top=g}}if(i>0){var r=w.find(".text");r.height(r.height()-i).css("overflow-y","scroll")}}w.css({top:n.top,left:n.left,});w.find(".tipsBoxArrow").css({left:j,right:arrowRight});var q=w.outerHeight()-y;if(w.hasClass("up")&&q!=0){w.css("top",n.top-q)}s.after&&s.after(w);return this},showHtml:function(i,h,j,g,f){if(!this.isFixed||!this.hoverTips||arguments.length!=0){this._layout.apply(this,arguments)}this.hoverTips.show();return this.hoverTips},show:function(j,i,k,h,f){var g=c.slice.call(arguments);if(typeof k==="string"&&!(h&&h.html)){g[2]=k.replace(/<(?!\/?br|\/?p)[^<>]*>/ig,"")}return this._showHtml.apply(this,g)},hide:function(f){if(!this.hoverTips){return this}if(f||!this.isFixed){this.remove()}else{this.hoverTips.hide()}return this},remove:function(){if(!this.hoverTips){return this}this.hoverTips.remove();this.hoverTips=null;return this},hover:d(function(g,f){var h=this;a.link.onMouseEvent(g,function(){if(h.isFixed&&h.hoverTips){h.show();return}f[0]=$(this);h.show.apply(h,f)},function(){h.hide()})},"hover"),link:d(function(g,f,h){var i=this;a.link(g,"enter",{enter:function(n,o,m){if(i.isFixed&&i.hoverTips){return i.hoverTips}if(h.enter){var l=h.enter.call(this,n,o,m);if(l===false){return}else{if(l instanceof $){o.addClass("tipsHover");return l}}}var k=f.slice(0);if($.isArray(g)){k[0]=$(this);if(h.target&&$.type(h.target)!="function"){console.warn("HdPortal.hoverTipsBox.link target invalid")}}if(typeof f[0]=="function"){var j=f[0].call(this,n,o,m);if(j===false){return}else{if(j instanceof $){k[0]=j}}}o.addClass("tipsHover");return i.show.apply(i,k)},leave:function(k,l,j){l.removeClass("tipsHover");if(h.leave&&h.leave.call(this,k,l,j)===false){return}if(j==i.hoverTips){i.hide()}},time:h.time,inertia:h.inertia,})},"link"),});$.each(["show","showHtml","layout"],function(h,g){var f=e.fn[g];e.fn["_"+g]=f;e.fn[g]=function(){var j=c.slice.call(arguments);var l=j[0];if(j.length==2&&typeof j[1]=="function"){j=j[1].call(l[0],l);if(j===false){return}}else{for(var k=1,m=j.length;k<m;k++){if(typeof j[k]=="function"){j[k]=j[k].call(l[0],l)}}}return f.apply(this,j)}});return e;function d(f,g){return function(){var h=c.slice.call(arguments);var j=h[0];var k={};if($.isPlainObject(j)){k=j;if(k.agent){h[0]=k.target||k.agent;j=k.agent}}if(g){var i=j;if($.isArray(j)){i=j[0];g+="_"+j[1]}if(i.data("hoverTips_one_"+g)){return}i.data("hoverTips_one_"+g,true)}f.call(this,j,h,k)}}})();a.hoverTipsBox=a.getHoverTipsBox();a.poupUpBox=function(f,h,e,l,i,d,k,g,j){var m={};if(h==1){m.hasTitle=false}else{if(h==2){}else{if(h==3){m.hasBottom=false}else{if(h==4){m.hasTitle=false;m.hasBottom=false}else{if(h==5){m.confirmBtnName="保存"}}}}}m.name=d;m.content=f;m.confirmFun=k;m.title=e;m.styles=l;m.showMask=i;m.contentStyles=j;if(g){m.isComfirmBox=true}if(h==1){m.contentStyles=m.contentStyles?m.contentStyles:"text-align: center;padding-top: 70px"}return a.popup(m)};a.popup=function(l){var i,f;if(top!==window){return top.HdPortal.popup.apply(this,arguments)}var d=$.extend({name:"",content:"",hasTitle:true,title:"",width:0,height:0,showMask:true,confirmFun:null,cancelFun:null,closeFun:null,styles:"",contentStyles:"",hasAnimate:true,mustHideBg:false},l);f=top.$(".bg-mask");i=top.$("#poup_"+d.name);if(d.showMask&&f.length==0){f=$('<div class="bg-mask"></div>');top.$("body").append(f)}if(!i||i.length==0){var h="";if(d.hasTitle){h='<div class="poupTitle">'+d.title+'<div class="closeBtn"></div></div>'}var e=d.width>0?(" width:"+d.width+"px;"):"";var j=d.height>0?(" height:"+d.height+"px;"):"";var k=d.styles+e+j;i=$('<div id="'+("poup_"+d.name)+'" class="poupBox confirmPoupBox '+(d.name)+'" style="'+k+'">'+h+'<div class="poupContent" style="'+d.contentStyles+'">'+d.content+"</div>"+a.getPopupBottom(d)+"</div>");top.$("body").append(i);var g=function(){var m=true;if(!d.mustHideBg&&$(".poupBox:visible").length>1){m=false;console.log("isHideBg1"+m)}a.hoverTipsBox.hide();var n=function(){i.remove();console.log("isHideBg2"+m);if(m){f.hide()}else{$(".poupBox:visible").last().css({"z-index":1000})}};m&&f.removeClass("bg-mask-animate");i.removeClass("poup-box-animate poup-box-noAnimate");if(d.hasAnimate){setTimeout(n,300)}else{n()}d.closeFun&&d.closeFun(i,f)};i.on("click",".confirmBtn",function(){i.trigger("poupBox_confirm");if($(this).hasClass("disabled")){return}if(d.confirmFun){var n;if($.isArray(d.confirmFun)){var m=[];$.each(d.confirmFun,function(o,p){o>0&&m.push(p)});n=d.confirmFun[0].apply(this,m)}else{n=d.confirmFun(i,f)}if(n=="stop"){return}}g()});i.on("click",".cancleBtn,.closeBtn",function(o){i.trigger("poupBox_close");var m;var n=i.data("poupBox_cancle");if(n){m=n(i,f);i.removeData("poupBox_cancle")}else{if(d.cancelFun){m=d.cancelFun(i,f)}}if(m=="stop"){return}g()})}$(".poupBox:visible").not(i).css({"z-index":998});i.add(f).show();f.addClass("bg-mask-animate");i.addClass(d.hasAnimate?"poup-box-animate":"poup-box-noAnimate");return i};a.getPopupBottom=function(d){var f=$.extend({hasBottom:true,confirmBtnName:"确认",cancelBtnName:"取消",isComfirmBox:false,isOneBottomBtn:false},d);var h="";if(f.hasBottom){var g="main-Button";var e="main-Button-white";if($("body").hasClass("version3")){g=e="main-Button-blue"}if(f.isOneBottomBtn){h='<div class="poupBottom"><div class="poupBtn main-Button confirmBtn">'+f.confirmBtnName+"</div></div>"}else{if(f.isComfirmBox){h='<div class="poupBottom"><div class="poupBtn main-Button confirmBtn">'+f.confirmBtnName+'</div><div class="poupBtn '+g+' cancleBtn">'+f.cancelBtnName+"</div></div>"}else{h='<div class="poupBottom"><div class="poupBtn main-Button confirmBtn">'+f.confirmBtnName+'</div><div class="poupBtn '+e+' cancleBtn">'+f.cancelBtnName+"</div></div>"}}}return h};a.syncWidth=function(f,e){e=e||1;var d=0;f.each(function(h,i){var g=$(i).width()+e;g>d&&(d=g)});f.width(d);return d};a.syncOuterWidth=function(e){var d=0;var f=[];e.each(function(h){var g=$(this).outerWidth();g>d&&(d=g);f.push(g)});e.each(function(g){$(this).width($(this).width()+1+d-f[g])});return d};a.searchInputBox=function(d,h,g,f,j,e){var i=$('<div class="searchBoxCont" style="'+f+'"><input type="text" class="input" placeholder="'+d+'"><div class="searchBtn"></div><div class="clearBtn hide"></div></div>');h?h.after(i):$("body").append(i);i.on("input focus","input",function(){i.add($(this)).css("border-color","#ccc")}).on("input propertychange",".input",function(){if(g){if($(this).val().length==0){$(this).siblings(".searchBtn").show();$(this).siblings(".clearBtn").hide()}else{$(this).siblings(".searchBtn").hide();$(this).siblings(".clearBtn").show()}}}).on("keyup",".input",function(){e&&e.keyUp&&e.keyUp($(this).val());g&&j&&j($(this).val().replace(/\s+/g,""))}).on("blur",".input",function(){i.add($(this)).css("border-color","#e7e7e7");$(this).siblings(".searchBtn").css("background-position","-110px -488px")}).on("keydown",function(k){if(k.which===13){i.find(".input").click()}});i.on("click",".clearBtn",function(){$(this).siblings(".input").val("");j&&j($(this).siblings(".input").val().replace(/\s+/g,""));i.find(".searchBtn").show();$(this).hide()});i.on("keydown",function(k){if(k.which===13){i.find(".searchBtn").click()}});i.on("click",".searchBtn",function(){!g&&j&&j($.trim(i.find(".input").val()))});return i};a.createDropDownBox=function(g,e,j){var i,h,f="";var d=[];$.each(g,function(k,l){var m;if($.isArray(l)){m={val:l[0],dataVal:l[1]}}else{if(typeof l==="string"){m={val:l,dataVal:l}}else{if(typeof l==="object"){m=l}}}if(m!=null){d.push(m)}});g=d;i=e.find(".dropDownBox_main");h=e.find(".dropDownBox_sub");if(i.length==0){i=$('<div class="dropDownBox_main"><div class="txt" data-value="'+hdFai.encodeHtml(g[0].dataVal)+'">'+(hdFai.encodeHtml(g[0].val))+'</div><span class="icon dropDownArrow"></span></div>');e.append(i)}if(h.length==0){h=$('<div class="dropDownBox_sub hide"></div>');e.append(h);h.html("");$.each(g,function(k,l){f+='<div class="options'+(l.disabled?" disable":"")+'" data-value="'+hdFai.encodeHtml(l.dataVal)+'">'+hdFai.encodeHtml(l.val)+"</div>"});i.on("click",function(){if($(this).hasClass("checked")){$(this).removeClass("checked");h.hide()}else{$(this).addClass("checked");h.show()}});h.append(f);h.on("click",".options",function(){if($(this).hasClass("disable")){return}h.hide();i.removeClass("checked");i.find(".txt").attr("data-value",$(this).attr("data-value")?$(this).attr("data-value"):drop1.find(".txt").attr("data-value"));i.find(".txt").text($(this).text());j&&j($(this).attr("data-value")?$(this).attr("data-value"):$(this).text())});$("body").off("hideDropDownBox").on("click.hideDropDownBox",function(k){if(e.has(k.target).length==0){h.hide();i.removeClass("checked")}})}};a.parseInt=function(e,d){e=parseInt(e);if(arguments.length>1&&isNaN(e)){return d}return e};a.callOnce=function(e,d){var f=false;return function(){if(f){return}f=true;e.apply(this,$.isArray(d)?d:arguments)}};(function(){var g="_iframeCb";var i="_hasFire";a.onIframe=function(n,m,k){var o=g+"_"+m;if(arguments.length==2){k=m;m=n;o=g+"_"+m;if(window[i+o]){k&&k()}else{$(window).one(o,k)}return}if(d(n,i+o)){k&&k(n[0]);return}var l=n.data(o);if(!l){n.data(o,l=$.Callbacks("unique"));if(m=="load"){n.on("load",function p(){f(n,"ready");n.off("load",p)})}}l.add(k)};$(function(){if(window===parent){return}j(function(){f(parent.$(window.frameElement),"ready")})});function f(m,l){var n=g+"_"+l;var k=m.data(n);if(k){k.fireWith(m[0]);m.removeData(n)}e(m,n,function(o){o[i+n]=true})}a.safeReady=function(m,k,l){a.onIframe(m,"ready",h(k,l))};a.safeLoad=function(m,k,l){if(hdFai.isMozilla()){return setTimeout(call,300)}a.onIframe(m,"load",h(k,l))};function e(m,l,k){j(function(){var n=m[0].contentWindow;n&&n.$&&n.$(n).trigger(l);k&&k(n)})}function d(l,k){return j(function(){return l[0].contentWindow[k]})}function j(k,l){try{return k()}catch(m){if(l){l(m)}else{console.warn(m)}}}function h(k,l){if(l){k=a.callOnce(k);setTimeout(k,l)}return k}})();a.setUserCardData=function(n,h,f){var m=a.resRoot+"/image/noheadimg.jpg";var j=h.info;if(!j){j={}}else{if(typeof j=="string"){j=$.parseJSON(j||"{}")}}var g=j.headImg;var o=h.name;var l=j.sex;var e=h.id;var p=h.gameId;var i=j.ip;var d;var k=h.flag;var f=h.ischeat;if(!j.ipProvince&&!j.ipCity){$.ajax({type:"post",url:a.versionURL+"/ajax/hdportal_h.jsp",data:"cmd=getAreaByIp&ip="+i+"&playerId="+e+"&gameId="+p,error:function(q){n.find(".ip").text(i||"")},success:function(q){d=JSON.parse(q);if(d.provice){if(d.city==undefined||d.city==d.provice||!d.city){d.city=""}i=i+" "+d.provice+d.city}n.find(".ip").text(i||"")}})}else{if(j.ipCity==undefined||!j.ipCity||j.ipCity==j.ipProvince){j.ipCity=""}i=i+" "+j.ipProvince+j.ipCity;n.find(".ip").text(i||"")}if(j.provinceForGPS){if(!j.cityForGPS||j.cityForGPS==undefined||j.provinceForGPS==j.cityForGPS){j.cityForGPS=""}n.find(".gps").text(j.provinceForGPS+j.cityForGPS);n.find(".gps").parent().show()}else{n.find(".gps").parent().hide()}n.find(".headImg").attr("src",g||m);n.find(".nickName").text(o||"");n.find(".playerId").text(e||"");n.find(".sexIcon").removeClass("sexIconM");n.find(".sexIcon").removeClass("sexIconF");n.find(".sexIcon").removeClass("sexIconNone");if(l=="1"){n.find(".sexIcon").addClass("sexIconM")}else{if(l=="2"){n.find(".sexIcon").addClass("sexIconF")}else{n.find(".sexIcon").addClass("sexIconNone")}}if(f){n.find(".cheatHint").show()}else{n.find(".cheatHint").hide();console.log(hdFai.checkBit(k,32));if(hdFai.checkBit(k,32)){n.find(".zlFlushCheat").show()}else{n.find(".zlFlushCheat").hide()}}};a.changeFrameHeight=function(d){try{d.height=d.contentWindow.documentElement.clientHeight}catch(f){console.warn("changeFrameHeight iframe not ready —— "+f)}};a.getGameHost=function(d){return this.$data.gameHost};a.getGameUrl=function(f,e,m,j,g,l,k){var i=this.$data;var h=a.getGameHost(e);var n=top.HdPortal.$data.profFlag;if(top.HdPortal&&n!==undefined){l=hdFai.checkBit(n,8);k=hdFai.checkBit(n,4)}var d=i.httpStr+"://"+h+"/"+i.aid+"/"+g+"/load.html?style="+e;if(h.indexOf("ppp.cc")>=0){d=i.httpStr+"://m.faidev.cc/dev/oem/hd/"+i.aid+"/"+g+"/load.html?style="+e}if(l&&j&&!k){if(m<1481029200000){d+="&isOfficialLianjie=true"}}return d};a.openNew3EditActive=function(d){d="new3/"+d;if(top.location.search.indexOf("openNewTab")!=-1){window.open(d)}else{top.location=d}};a.clearIframe=function(d){if(d){d[0].src="about:blank";try{var g=d[0].contentWindow;g.document.write("");g.document.clear();g.$(g).trigger("hd_clearDocument")}catch(f){}}};a.Res=(function(){var k=/\.css(?:\?|$)/i,e=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/?(\d+).*/i,"$1")<536,j=document,g=j.head||j.getElementsByTagName("head")[0]||j.documentElement,f=function(l,m){console.warn("Res_"+l,m);return $.Deferred().reject(l,m)},i=function(l,m){$.extend(d.conf[l]||(d.conf[l]={}),$.type(m)=="string"?{val:m}:m)},d={conf:{},groups:{},cache:{},config:function(l){$.each(l,i);return this},setGroup:function(l){$.each(l,function(n,o){if($.isArray(o)){d.groups[n]=o}else{if($.isPlainObject(o)){var m=[];$.each(o,function(q,p){i(q,p);m.push(q)});d.groups[n]=m}}});return this},checkLoad:function(n,p,l){var m=n+"_"+p;var o=this.cache[m];if(!o){o=l();if(o.state()!=="rejected"){this.cache[m]=o;o.fail(function(){delete d.cache[m]})}}return o},loadg:function(m){var l=this.groups[m];if(!l){return f("empty","loadg:"+m)}return this.checkLoad("loadg",m,function(){return d.load(l)})},loadUrl:function(n,l){l=l||n;var m=d.conf[n];if(!m||m.val!==l){i(n,l);if(m){delete this.cache["load_"+n];console.warn("这个id已经存在,当前操作将覆盖旧链接,id="+n)}}return this.load(n)},load:function(l){if($.isArray(l)){return $.when.apply($,$.map(l,function(m){return d.load(m)}))}return this.checkLoad("load",l,function(){var p=d.conf[l];if(!p){return f("empty","load:"+l)}if($.type(p.val)=="function"){return p.val()}var q=$.Deferred();var n=1,m=2;if(p.require){d.load(p.require).then(o,function(r,s){console.warn("Res_requireErr_"+p.require,r,s);q.reject(r=="empty"?"empty":"require")})}else{o()}return q.promise();function o(){var r=k.test(p.val);var s=j.createElement(r?"link":"script");h(s,r,function(t,u,v){if(t){q.resolve()}else{$(s).remove();if(++n<=m){o()}else{q.reject(u,v)}}});s[r?"href":"src"]=p.val;if(r){s.rel="stylesheet"}else{s.async=true}g.appendChild(s)}})}};return d;function h(p,l,s){var r="onload" in p,o=30,m;if(l&&(e||!r)){setTimeout(function(){m=new Date().getTime();n(p,0)},1);return}if(r){p.onload=function(){q(true)};p.onerror=function(t){q(false,t)}}else{p.onreadystatechange=function(){if(/loaded|complete/.test(p.readyState)){q(true)}}}function q(t,u){p.onload=p.onerror=p.onreadystatechange=null;p=null;s(t,"load",u)}function n(x,w){var y=m-new Date().getTime();if(y>o*1000){s(false,"timeOut",y);return}var v=x.sheet,t;if(e){if(v){t=true}}else{if(v){try{if(v.cssRules){t=true}}catch(u){if(u.name==="NS_ERROR_DOM_SECURITY_ERR"){t=true}}}}setTimeout(function(){if(t){s(true)}else{n(x,w+1)}},20)}}})();a.asyncCss={load:function(f,d,e){a.Res.loadUrl(f,d).then(e);return this}};a.getGameInfo=function(e,d){$.ajax({type:"post",url:a.versionURL+"/ajax/hdportal_h.jsp",data:"cmd=getGameInfo&gameId="+e,error:function(f){console.log("getGameInfo arguments: ",arguments);d&&d({success:false,msg:f})},success:function(f){d&&d($.parseJSON(f))}})};a.easeInOut=function(f,e,h,g){if((f/=g/2)<1){return h/2*f*f+e}return -h/2*((--f)*(f-2)-1)+e};a.getERR=function(t){var d=$.extend({parentDef:"body",onCheckErr:null,checkBox:"body",setMargin:false,},t);d.parentDef=$(d.parentDef);var g=0;var p=/^\{([\w,-.]+)\}(\||$)(.*)/;var o="_defaultName";var j=null;var q=function(x,y){var u=p.exec(x);var w={match:false,name:"",priority:0,msg:x};if(u){var v=u[1].split(",");w.name=v[0];w.priority=parseInt(v[1]);if(isNaN(w.priority)){w.priority=0}w.msg=u[2]=="|"?u[3]:null;w.match=true;y&&y(w)}return w};var h=function(y,B,w,A,v){var z="";var x=0;A=A||"";w=w||d.parentDef;y=f(y);if(y.length==0){return}q(B,function(C){z=C.name;x=C.priority;B=C.msg});if(/^_/.test(z)){throw'命名空间请不要使用"_"前缀，"_"前缀预留给特殊指令'}if(z.length===0){z=o}var u=0;y.each(function(){var C=$(this);var E=C.data("ERR_errList");!E&&C.data("ERR_errList",E=hdFai.HdList("name"));var D=E.getByName(z);!D&&E.add(D={name:z,_index:g++});if(typeof B==="string"&&B.length>0){if(!D.errMsg){D.errMsg=$('<div class="inputErrMsg ERR_errMsg">'+B+"</div>");var H=true}else{D.errMsg.html(B)}}if(H||x!==D.priority){D.priority=x;s(E)}if(D.errMsg){if(H||w!==D.parents||A!==D.style){var G=A;if(w.length>0&&d.setMargin&&(!G||G.indexOf("margin-left")==-1)){var F=C.offset().left-w.offset().left-parseFloat(w.css("padding-left"));G="margin-left:"+F+"px;"+G}D.errMsg.attr("style",G)}if(typeof v=="function"){if(H||String(v)!==String(D.position)){v.call(C[0],D.errMsg)}}else{if(H||v!==D.position){if(v instanceof $){v.after(D.errMsg)}else{if(v=="$sef"){C.parent().append(D.errMsg)}else{C.parent().after(D.errMsg)}}}}D.parents=w;D.style=A;D.position=v}if(!C.hasClass("ERR_hasErr")){C.addClass("inputErr");C.addClass("ERR_hasErr");u++}});u>0&&i(y)};var e=function(w,v){w=f(w);if(w.length==0){return}if(typeof v!="string"||v.length==0){v=o}var u=0;w.filter(".ERR_hasErr").each(function(){var x=$(this);var y=x.data("ERR_errList");if(y&&y.size()>0){if(v==="_all"){y.forEach(function(A){A.errMsg&&A.errMsg.remove()});y.empty()}else{var z=y.not(v);if(z&&z.errMsg){z.errMsg.remove();s(y)}}if(y.size()===0){u++}}if(!y||y.size()===0){x.removeClass("inputErr").removeClass("ERR_hasErr")}});u>0&&i(w)};var m=function(v,w,u){if(v.length==0){return}v.toggleClass("ERR_lock",w);i(v);if(u){v.toggleClass("ERR_lock_strict",w)}};var n=function(u,v){return r(u,v).length};var r=function(v,w){v=v||$(d.checkBox);var u=v.find(".ERR_hasErr");if(!w){u=u.not(function(x){return $(this).closest(".ERR_lock").length>0})}return u};var l=null;var i=$.throttle({sync:function(v,u){if(v==0){j=[];l=u[0]}else{l=l.add(u[0])}},defer:function(){d.onCheckErr&&d.onCheckErr(k,l);while(j.length>0){j.shift()()}j=l=null}});var s=function(v){if(v.size()===0){return}if(v.size()===1){v.get(0).errMsg&&v.get(0).errMsg.removeClass("hideImp");return}var u=v.filter(function(w){return w.errMsg}).sort(function(x,w){return x.priority===w.priority?(w._index-x._index):(w.priority-x.priority)});u.forEach(function(w,x){if(x===0){w.errMsg.removeClass("hideImp")}else{w.errMsg.addClass("hideImp")}})};var f=function(u){if(typeof u=="string"){u=$(u)}return u};var k={hasErr:n,getErr:r,addErr:h,removeErr:e,lockErr:m,checkErr:i,toggleErr:function(){var u=c.slice.call(arguments);if(u.shift()){this.addErr.apply(this,u)}else{this.removeErr(u[0],q(u[1]).name)}},defer:function(u){if(j){j.push(u)}else{u()}}};return k};a.getEditPoup=(function(){var e={title:".poupTitle .text",tips:".poupTitle .titleTips",topBar:".poupContent .topBar",info:".poupContent .infoBox",bottom:".editBottomBox",};var d={};function h(j,i){if(!(this instanceof h)){return new h(j,i)}if(arguments.length!=0){if(d[j]){return d[j]}this.id=j;this.box=null;i&&(this.initLayoutData=i);this.win().HdPortal.asyncCss.load("editPoupBox",a._cssUrlInfo.editPoupBox);d[j]=this;this.ctrl={};a.initCallBack(this,[["ready",true],])}}var f="editPoup_";h.get=function(i){if(d[i]){return d[i]}return new h()};h.remove=function(i){h.get(i).destroy()};h.fn=h.prototype;$.extend(h.fn,{init:function(){if(this.id===undefined){return this}var i=this;if(i.hasInit){return i}i.hasInit=true;i.$(function(){var j=i.$(".bg-mask");if(j.length==0){j=i.$('<div class="bg-mask hide"></div>');i.$("body").append(j)}var k=i.$("#"+f+i.id);if(k.length>0){k.remove()}i.box=i.$('<div id="'+f+i.id+'" class="editPoupBox poupBox confirmPoupBox edit_common hide"><div class="poupTitle"><span class="text"></span><div class="titleTips"></div><div class="closeBtn"></div></div><div class="poupContent"><div class="topBar"></div><div class="infoBox scrollBox"></div></div><div class="editBottomBox"></div></div>');i.$("body").append(i.box);i.box.find(".closeBtn").click(function(){i.hide()});$(window).on("hd_clearDocument unload",function(l){i.destroy()});i.fireWith("ready",i,[i])});return i},setCtrl:function(i,j){if($.isPlainObject(i)){$.extend(this.ctrl,i);return}this.ctrl[i]=j},show:function(k,l){if(this.id===undefined){return this}var j=this;var i=j.$(".bg-mask");j.box.add(i).show();setTimeout(function(){j.box.addClass("poup-box-animate");i.addClass("bg-mask-animate")},0);if(!k&&j.initLayoutData){k=j.initLayoutData;delete j.initLayoutData}j._layout(k);this.maskClose&&i.off("click.editPoupClose").on("click.editPoupClose",function(m){j.hide()});j.box.trigger("poup_show",[j,l]);return j},hide:function(m,n,l){if(this.id===undefined){return this}var j=this;j.box.trigger("poup_close",[j,l]);var k=j.box.data("editClose");if(k){if(k()===false){return j}j.box.removeData("editClose")}var i=j.$(".bg-mask");i.off("click.editPoupClose");j.box.removeClass("poup-box-animate");i.removeClass("bg-mask-animate");j.box.trigger("poup_hide",[j]);setTimeout(function(){j.box.hide();if(!n){i.hide()}m&&m(j);j.box.trigger("poup_hide_end",[j])},300);return j},layout:function(j){if(this.id===undefined){return this}var i=this;if(typeof j=="function"){j=j(i)}if(!j){return}if(j.cover!==false){j=$.extend({width:"",className:"common",title:"",tips:"",topBar:"",info:"",bottom:"",after:null,maskClose:true,},j)}$.each(e,function(m,k){var n=i.getWarp(m),l=j[m];if(!n||n.length==0||l===undefined){return}if(m=="bottom"&&$.isPlainObject(l)){l=a.getPopupBottom(l)}else{if(typeof l=="function"){n.html("");l=l.call(i,n,i,i.win())}}if(m=="title"&&i.box){i.box.toggleClass("noTitle",l===false)}if(l&&($.type(l)=="string"||l instanceof jQuery||l.nodeType)){n.html(l)}});this.setClass(j.className);j.width!==undefined&&this.box.width(j.width);j.after&&j.after.call(i,i,i.win());j.maskClose!==undefined&&(this.maskClose=j.maskClose);return this},setClass:function(i){if(!i){return this}this.box.attr("class",this.box.attr("class").replace(/\bedit_(\w+?)\b/,"edit_"+i));return this},destroy:function(){if(this.id===undefined){return this}if(this.box){this.box.remove();this.box=null}delete d[this.id];return this},win:g,$:function(i){return this.win().$(i)},getWarp:function(i){return this.box&&this.box.find(e[i])}});$.each(["show","hide","layout"],function(k,j){var l="_"+j;h.fn[l]=h.fn[j];h.fn[j]=function(){var m=arguments,i=this;i.init().$(function(){i[l].apply(i,m)});return i}});return h;function g(){return top}})();a.poll=(function(){var e=d();e.$new=d;return e;function d(){var f={};var g=function(l){l=$.extend({name:"",time:-1,poll:null,delay:-1,},l);g.stop(l.name);var k=0,m,j=false;var i=function(){if(j){return}l.poll(function(n){n=n||l.time;m=n<0?i():setTimeout(i,n)},k++)};var h=function(){clearTimeout(m);j=true;delete f[l.name]};if(l.name){f[l.name]=h}l.delay<0?i():setTimeout(i,l.delay);return h};g.stop=function(h){if(arguments.length==0){$.each(f,function(i,j){j&&j()})}else{if(h&&f[h]){f[h]()}}return g};return g}})();a.checkSwitchBtnShow=function(){$.ajax({type:"post",url:"/ajax/hdstore_h.jsp?cmd=isShowSwitchBtn",error:function(){},success:function(d){d=jQuery.parseJSON(d);if(d.success){if(d.isShow){top.$("#switchStoreBtn").show()}else{top.$("#switchStoreBtn").hide()}}}})};a.checkPosition=function(e,d){if(e==d){return false}switch(e){case 1:return true;case 5:case 3:if(d==2||d==4){return true}return false;case 2:if(d==4){return true}return false;case 4:case 0:return false}return false};a.quickPayMent=(function(){var i,m,g,j,h,k,o,s,p,e,r,n,l,f,d;return function(v){if(top!==window){return top.HdPortal.quickPayMent.apply(this,arguments)}var w={verInfo:1,type:1,payment:"wxpay",unitPrize:300,gameId:0,couponId:0,rmAdvsCount:0,orderId:0,};m=$.extend({},w,v);if(!m.gameId||m.gameId<=0){var t=a.isOem?"http://"+a.OemPortalHost+"/portal.jsp#appId=shop&tab=4":"http://"+a.HdPortalHost+"/jump.jsp?t=42";window.open(t);return}if(!a.buyProductAuth){a.hdShowMsg("error","没有权限",false);return}i=top.$(".bg-mask-quick-pay");if(i.length==0){i=$('<div class="bg-mask-quick-pay"></div>');top.$("body").append(i)}i.css({"z-index":"1000"});var u=top.$(".payContainer");if(u.length==0){u=q()}if($("#editPoup_edit").css("z-index")>=1000){$("#editPoup_edit").css("z-index",998)}d(false);i.show();u.show();if(m.type===2){if(m.verInfo===1){s("",function(y){if(y.length>0){var x=a.isOem?"http://"+a.OemPortalHost+"/portal.jsp#appId=shop&tab=4":"http://"+a.HdPortalHost+"/jump.jsp?t=42";window.open(x);n();return}})}l=[{name:"白银版",className:"verBY"},{name:"铂金版",className:"verBJ"}];k();u.find(".header .tab2").click()}else{if(m.type===1){l=[{name:"付款",className:"payMoney"},{name:"用券",className:"useTicket"}];k();s("useTicket",function(x){m.rmAdvsCount=x.length;u.find(".header .tab2").click();if(m.verInfo===1){h(u,"useTicket")}else{if(m.verInfo===3){s("useTicket",function(y){if(y.length>0){h(u,"useTicket")}})}}})}}setTimeout(function(){i.addClass("bg-mask-animate")},0);f=setInterval(e,5000)};function q(){var u="http://"+a.HdPortalHost+"/portal.jsp#appId=shopCart";var t=$('<div class="payContainer"><div class="header"><div class="tab tab1 nocheck" data-tab=""></div><div class="tab tab2 check" data-tab=""></div></div><div class="tabBody noTicket hide"><div class="prizeBanner"><div class="prize"><span class="iconMoney">￥</span>1198<span class="unitDate"> /年</span></div><div class="tip">升级到铂金版享有2.5折购买去广告券</div></div><div class="clear"></div><div class="privilege"><div class="funcs"><div class="func func_1"><div class="iconGou inlineBlock"></div><div class="inlineBlock"><span class="ft_16 orangeFont">￥200</span>去广告，<span class="ft_16 orangeFont">￥1000</span>十张去广告券</div></div><!--<div class="tip orangeFont ft_12" style="margin-top: 4px;"> 价值￥2,000, 用完券后五折</div>--><div class="func func_2"><div class="iconGou inlineBlock"></div><div class="inlineBlock"> 强制关注功能</diV></div><div class="func func_3"><div class="iconGou inlineBlock"></div><div class="inlineBlock"> 微信红包奖品类型</div></div><div class="func func_4"><div class="iconGou inlineBlock"></div><div class="inlineBlock"> 不限参与人数</div></div></div><div class="splitLine"></div><div class="upLevelBtn payBtn ft_16">升级铂金版</div><div align="center" style="margin-top:10px;text-decoration:underline;"><a class="linkMore orangeFont ft_12" href="http://hd.'+a.HomeHost+'/product.html" target="_blank" style="text-decoration:underline;">更多特权</a></div></div></div><div class="tabBody hasTicket hide"><div class="blueBg"><div class="ticket"><div class="direct">互动去广告券</div><div class="amount">剩余2张</div><div class="function">永久去除一个互动游戏广告</div><div class="validate">有效期：永久有效</div></div><div class="direction">※ 消耗一张互动广告券</div></div><div class="btnBar"><div class="useTicket payBtn">去广告</div></div></div><div class="tabBody hasNotTicket hide"><div class="blueBg"><div class="ticket"><div class="halfDiscount"></div><div class="direct">您的去广告劵剩余<span>0</span>张</div><div class="tip">现在购买互动去广告劵包</div><div class="tipDiscount">更享<span class="ft_16">5折</span>优惠！</div><div class="tipMoney">仅需<span class="orangeFont"> <span class="moneySpan"></span>/10张</span></div></div></div><div class="btnBar"><div class="useTicket payBtn payBtn ft_16">前往购买</div></div></div><div class="tabBody pay hide"><div class="payBg blueBg"><div class="timeExpired"><div class="times baiyin" data="1">一年</div><div class="times baiyin big bjcheck" data="3">2年[送一年]</div><div class="times baiyin" data="5">5年</div><div class="times baiyin" data="10">10年</div></div><div class="payInfo"><div class="prize"><div class="ticket pr hide"><span class="ft_16">￥</span><span class="money">100</span></div><div class="bojin pr hide"><span class="ft_16">￥</span><span class="money">1996</span><span class="ft_16"> / <span class="year">3</span>年</span><div class="cuxiao"></div></div><div class="baiyin pr"><span class="ft_16">￥</span><span class="money">1896</span><span class="ft_16"> / <span class="year">3</span>年</span><div class="cuxiao"></div></div></div><div class="direction">去除此活动广告</div><div class="qrCode"><img width="100%" height="100%" src= ""/></div><div class="payTo wxpayment"><div class="wxIcon"></div>微信扫一扫支付</div><div class="payTo alipayment hide"><div class="aliIcon"></div>支付宝扫一扫</div></div><div style="height: 1px;"></div></div><div class="clear"></div><div class="payBar"><div class="coupon hide"><div class="label inlineBlock">已使用优惠券:</div><div class="couponList inlineBlock"></div></div><div class="payment" align = "center"><div class="wxPay inlineBlock"><input type="radio" id="quickWxpay" checked name="payment" value="1" /><label><div class="wxIcon"></div>微信支付</label></div><div class="aliPay inlineBlock hide"><input type="radio" id="quickAlipay" name="payment" value="2" /><label><div class="aliIcon"></div>支付宝</label></div><div class="otherPay inlineBlock"><span >其他付款方式</span></div></div></div></div></div>');top.$("body").append(t);payContainer=t;payContainer.on("click",".hasTicket .btnBar .useTicket",function(){if(m.rmAdvsCount<1){a.hdShowMsg("error","去广告券数量不足，请选择其他方式去除广告",false);return}$.ajax({url:"/ajax/hdpay_h.jsp?cmd=useRemoveAdvs&gameId="+m.gameId,type:"post",dataType:"json",success:function(x){if(x.success){a.logDog(1000185,1);m.callback&&m.callback();a.hdShowMsg("right","去除广告成功",true);n()}else{a.hdShowMsg("error","去除广告失败",false)}}})});payContainer.on("click",".header .tab",function(){$(this).parent().find(".check").removeClass("check").addClass("nocheck");$(this).addClass("check").removeClass("nocheck");var x=$(this).attr("data-tab");h(payContainer,x)});payContainer.on("click",".timeExpired .times",function(){var z=payContainer.find(".header .check").attr("data-tab");if(z!="verBJ"&&z!="verBY"){return}var y=$(this).attr("data");y=parseInt(y);if(isNaN(y)){return}var x=z==="verBJ"?"bjcheck":"bycheck";$(this).parent().find(".times").removeClass(x);$(this).addClass(x);g(y,z)});payContainer.on("click",".payBar .aliPay, .payBar .wxPay",function(){if($(this).find('input[type = "radio"]').attr("checked")=="checked"){return}$(this).parent(".payment").find('input[type = "radio"]').removeAttr("checked");$(this).find('input[type = "radio"]').attr("checked","checked");if($("#quickWxpay").is(":checked")){payContainer.find(".payInfo .wxpayment").show();payContainer.find(".payInfo .alipayment").hide()}else{payContainer.find(".payInfo .wxpayment").hide();payContainer.find(".payInfo .alipayment").show()}var x=payContainer.find(".header .check").attr("data-tab");o(x)});var w=function v(x,y){n();if(!y){y=m.verInfo!=1?"购买去广告":"升级版本"}a.showRechargeBox(y,function(){if(m.callback){e(function(){a.logDog(1000185,4)});m.callback()}else{e(function(){a.logDog(1000184,6)});window.location.reload()}});window.open(x)};payContainer.on("click",".noTicket .privilege .upLevelBtn",function(){var x="http://"+a.HdPortalHost+"/jump.jsp?t=42";w(x)});payContainer.on("click",".hasNotTicket .btnBar .payBtn",function(){var x="http://"+a.HdPortalHost+"/portal.jsp#anchor=HdNoAdsPackage#appId=shop&tab=3";w(x)});payContainer.on("click",".payBar .payment .otherPay span",function(){var x="http://"+a.HdPortalHost+"/portal.jsp#appId=shopCart&iParams="+hdFai.encodeUrl("orderId="+m.orderId+"&pay=true");w(x,"购买去广告")});top.$(".bg-mask-quick-pay").on("click",function(){n()});g=function(z,y){var x=payContainer.find(".payInfo .prize "+(y==="verBJ"?".bojin":".baiyin")+" .cuxiao");if(z!=3){x.hide()}else{x.show()}payContainer.find(".payInfo .prize .pr .money").text(z!=3?m.unitPrize*z:m.unitPrize*2);if(z==1){payContainer.find(".payInfo .prize .pr .year").text(" ")}else{payContainer.find(".payInfo .prize .pr .year").text(z)}if(y=="verBJ"){payContainer.find(".payInfo .direction").text("赠送"+z*10+"张互动去广告券")}o(y)};k=function(){$.each(payContainer.find(".header .tab"),function(x,y){$(y).attr("data-tab",l[x].className);$(y).text(l[x].name)})};h=function(x,y){x.find(".tabBody").hide();x.find(".payBar .coupon").hide();x.find(".payInfo .prize .pr").hide();if(y==="payMoney"){switch(m.verInfo){case 1:m.unitPrize=400;break;case 2:m.unitPrize=320;break;case 3:m.unitPrize=200;break;case 4:m.unitPrize=150;break}x.find(".payInfo .prize .ticket .money").text(m.unitPrize);x.find(".pay").show();x.find(".payInfo .prize .ticket").show();x.find(".timeExpired").hide();x.find(".payInfo .direction").show();x.find(".payInfo .direction").text("去除此活动广告");o(y)}else{if(y==="useTicket"){x.find(".timeExpired").hide();if(m.rmAdvsCount===0){x.find(".hasNotTicket").show();switch(m.verInfo){case 1:x.find(".hasNotTicket").hide();x.find(".noTicket").show();x.find(".payInfo .direction").hide();break;case 2:x.find(".moneySpan").text("￥1600");break;case 3:x.find(".moneySpan").text("￥1000");break;case 4:x.find(".moneySpan").text("￥750");break}}else{if(m.rmAdvsCount>0){if(m.verInfo===4||m.verInfo===3||m.verInfo===2||m.verInfo===1){x.find(".hasTicket").show();x.find(".hasTicket .amount").text("剩余"+m.rmAdvsCount+"张");x.find(".payInfo .prize .ticket").show();x.find(".payInfo .direction").show();x.find(".payInfo .direction").text("去除此活动广告")}}}}else{if(y==="verBJ"){m.unitPrize=1198;x.find(".pay").show();x.find(".payInfo .prize .bojin").show();x.find(".timeExpired").show();x.find(".timeExpired .times").addClass("bojin").removeClass("baiyin");x.find(".timeExpired .times").removeClass("bjcheck").removeClass("bycheck");x.find(".timeExpired .times").eq(1).addClass("bjcheck").removeClass("bycheck");x.find(".payInfo .direction").show();x.find(".payInfo .direction").text("赠送30张互动去广告券");g(3,"verBJ");r(y)}else{if(y==="verBY"){m.unitPrize=798;x.find(".pay").show();x.find(".payInfo .prize .baiyin").show();x.find(".payInfo .direction").show();x.find(".payInfo .direction").text("");x.find(".timeExpired .times").addClass("baiyin").removeClass("bojin");x.find(".timeExpired .times").removeClass("bjcheck").removeClass("bycheck");x.find(".timeExpired .times").eq(1).addClass("bycheck").removeClass("bjcheck");g(3,"verBY");r(y)}}}}};r=function(x){};s=function(z,y){var x=0;if(z==="payMoney"||z==="useTicket"){x=3}else{if(z==="verBJ"){x=1}else{if(z==="verBY"){x=2}}}$.ajax({url:"/ajax/hdpay_h.jsp?cmd=getCoupons&type="+x,type:"post",success:function(A){A=$.parseJSON(A);if(A.success){y&&y(A.dataList)}}})};e=function(z){var x=payContainer.find(".header .check").attr("data-tab");if(m.orderId<=0||(x!="verBJ"&&x!="verBY"&&x!="payMoney")){return}var y=1;if($("#quickAlipay").is(":checked")){y=2}$.ajax({url:"/ajax/hdpay_h.jsp?cmd=checkOrderStatus&orderId="+m.orderId,type:"post",dataType:"json",success:function(A){if(A.success){if(z){z()}else{if(m.callback){m.callback()}else{var B="";if(x=="verBJ"){if(y==1){a.logDog(1000184,1)}else{if(y==2){a.logDbg(1000184,3)}}B="成功升级到铂金版"}else{if(x=="verBY"){if(y==1){a.logDog(1000184,2)}else{if(y==2){a.logDbg(1000184,4)}}B="成功升级到白银版"}else{if(x=="payMoney"){if(y==1){a.logDog(1000185,2)}else{if(y==2){a.logDbg(1000185,3)}}B="成功为HD"+m.gameId+"去除广告"}}}a.hdShowMsg("right",B,true);setTimeout(function(){window.location.reload()},800)}}clearInterval(f);n()}}})};p=function(){if(m.gameId<=0){a.hdShowMsg("error","游戏编号参数错误，请重新尝试",false);return}$.ajax({url:"/ajax/hdpay_h.jsp?cmd=useRemoveAdvs&gameId="+m.gameId,type:"post",dataType:"json",success:function(x){x=$.parseJSON(x);if(x.success){m.callback&&m.callback()}else{a.hdShowMsg("error",x.msg,false)}}})};o=function(C){var A=payContainer.find(".pay .payInfo .qrCode img");var y=A.attr("src");var B=1;if($("#quickAlipay").is(":checked")){B=2}var x="";if(C==="payMoney"){x="/ajax/hdpay_h.jsp?cmd=getRemoveAdvQrCode&payMent="+B+"&gameId="+m.gameId}else{if(C==="verBJ"){var z=parseInt(payContainer.find(".timeExpired .bjcheck").attr("data"));if(isNaN(z)){return}x="/ajax/hdpay_h.jsp?cmd=getVerPayQrCode&payMent="+B+"&amount="+z+"&upVer=2&couponId="+m.couponId}else{if(C==="verBY"){var z=parseInt(payContainer.find(".timeExpired .bycheck").attr("data"));if(isNaN(z)){return}x="/ajax/hdpay_h.jsp?cmd=getVerPayQrCode&payMent="+B+"&amount="+z+"&upVer=1&couponId="+m.couponId}}}$.ajax({url:x,type:"post",dataType:"json",success:function(D){if(D.success){A.attr("src","");m.orderId=D.orderId;var E="http://"+a.HdPortalHost+"/wxpay_qrcode.jsp?URL="+D.data;A.attr("src",E)}}})};d=function(y){var x=$(".bg-mask").eq(0);var z=$(".editPoupBox");if(x.length==0||z.length==0){return}if(y){if(!z.is(":hidden")&&x.is(":hidden")){x.show()}if(z.css("z-index")<=1000){z.css("z-index",1000)}}else{if(!z.is(":hidden")&&!x.is(":hidden")){x.hide()}}};n=function(){payContainer.hide();d(true);top.$(".bg-mask-quick-pay").hide();clearInterval(f)};return payContainer}})();a.batchCodes=function(i){var h=[];var d='<div class="cavCodesContent"><div class="tip">按示例模板格式填写兑奖码信息，填写完成后上传提交<a target="_blank" href="'+a.resRoot+'/version2/image/批量核销兑奖码模板.xls" class="downMoban pointer underline">下载模板</a></div><div class="uploadBar"><div id="cavCodes_uploadIcon" class="in-bl main-Button-blue main-uploadIcon">上传</div><div class="filename in-bl" style="margin-left: 10px;"></div></div><div class="repeatTip hide">存在重复的兑奖码，已去重处理</div><div class="errList"></div></div>';var f={content:d,name:"cav_code_list",hasTitle:true,hasBottom:true,showMask:true,title:"批量核销",width:660,confirmFun:function(){a.logDog(1000167,4);if(h.length>0){i&&i(h)}}};a.popup(f);$("#poup_cav_code_list .poupBottom .confirmBtn").addClass("disabled");e($("#cavCodes_uploadIcon"));$("#poup_cav_code_list").on("click",function(){$("#poup_cav_code_list .errList .errCodes").hide()});$("#poup_cav_code_list .errList").on("click",".errCodes",function(k){k.stopPropagation()});$("#poup_cav_code_list .errList").on("click",".detail",function(l){l.stopPropagation();var k=$(this).parent().find(".errCodes");if(k.is(":hidden")){$("#poup_cav_code_list .errList .errCodes").hide();k.show()}else{k.hide()}});function e(k){advance_setting={auto:true,fileTypeExts:"*.xls; *.xlsx",fileSizeLimit:10*1024*1024,multi:false,breakPoints:true,saveInfoLocal:false,isPortal:true,buttonText:"",showUploadedPercent:true,showUploadedSize:true,removeTimeout:9999999,getFileSizeUrl:a.versionURL+"/ajax/advanceUpload.jsp?cmd=_getUploadSize",uploader:a.versionURL+"/ajax/advanceUpload.jsp?cmd=uploadCode",onUploadSuccess:function(l,m){a.wxCardProgress.end(function(){var o=jQuery.parseJSON(m);if(o.success){a.logDog(1000167,3);var n={status:"end",id:l.id,title:"上传成功。"};j(n);a.hdShowMsg("right","文件: "+l.name+" 上传成功",true);$("#poup_cav_code_list .filename").html(l.name);g(o.data)}else{var n={status:"end",id:l.id,title:o.msg};j(n);a.hdShowMsg("error",o.msg,false)}})},onUploadStart:function(){a.wxCardProgress.init(false,100,500,"上传文件中");_uTime=new Date().getTime()},onUploadError:function(l,m){a.wxCardProgress.die(function(){$("#progressBody_"+l.id).remove();$("#progressWrap_"+l.id).remove();a.hdShowMsg("网络繁忙，文件:"+l.name+"上传失败，请稍后重试")})}};upload=k.uploadify(advance_setting)}function j(k){if(k.status=="start"){$("#showNewUploadFileContent").removeClass("startToUpload");var l=['<div id="progressBody_'+k.id+'" class="bodyDisable"></div>','<div id="progressWrap_'+k.id+'" class="bodyProgressWrap">','<div class="progressCenter"></div>','<div class="progressIngBody">','<div class="progressIngTitle">'+k.title+"</div>",'<div class="progressIngMission">','<div class="mission"><div id="progress" class="progress"></div></div>','<div id="progressNum" class="progressNum">100%</div>',"</div>",'<div class="progressInfo"><span class="progressFileSize">文件大小:'+hdFai.parseFileSize(k.size)+'</span><a class="progressCancel" href="javascript:uploadCancel(\''+k.id+"');\">取消</a></div>","</div>","</div>"];$("body").append(l.join(""))}else{if(k.status=="ing"){$("#progress").css("width",k.percent+"%");$("#progressNum").html(k.percent+"%")}else{if(k.status=="end"){$("#progressBody_"+k.id).remove();$("#progressWrap_"+k.id).remove()}else{if(k.status=="error"){$("#progress").addClass("progressError")}}}}}function g(k){if(!k){return}var l=[];if(k.noAuthCodes&&k.noAuthCodes.length>0){var m={msg:"部分活动你没有核销权限，请先删除此部分兑奖码",code:k.noAuthCodes,};l.push(m)}if(k.outDates&&k.outDates.length>0){var m={msg:"部分兑奖码已过期，请先删除此部分兑奖码",code:k.outDates,};l.push(m)}if(k.hadTrashs&&k.hadTrashs.length>0){var m={msg:"部分兑奖码已作废，请先删除此部分兑奖码",code:k.hadTrashs,};l.push(m)}if(k.needLessCodes&&k.needLessCodes.length>0){var m={msg:"部分兑奖码无需核销，请先删除此部分兑奖码",code:k.needLessCodes,};l.push(m)}if(k.hadVerifs&&k.hadVerifs.length>0){var m={msg:"部分兑奖码已核销，请先删除此部分兑奖码",code:k.hadVerifs,};l.push(m)}if(k.redPackets&&k.redPackets.length>0){var m={msg:"口令红包不能核销，请先删除口令红包兑奖码",code:k.redPackets,};l.push(m)}if(k.gifts&&k.gifts.length>0){var m={msg:"话费、流量和视频会员不能核销，请先删除此部分兑奖码",code:k.gifts,};l.push(m)}if(k.notFounds&&k.notFounds.length>0){var m={msg:"部分兑奖码查不到，请先删除此部分兑奖码",code:k.notFounds,};l.push(m)}if(k.outLengths&&k.outLengths.length>0){var m={msg:"备注最多输入9个字，请先修改",code:k.outLengths,};l.push(m)}if(k.noStarts&&k.noStarts.length>0){var m={msg:"部分兑奖码未开始兑奖，请先删去此部分兑奖码",code:k.noStarts,};l.push(m)}if(k.wxCards&&k.wxCards.length>0){var m={msg:"暂不支持卡券兑奖码批量核销，请先删去此部分兑奖码",code:k.wxCards,};l.push(m)}if(k.notOnlyCodes&&k.notOnlyCodes.length>0){var m={msg:"部分兑奖码在多个活动中存在，请先单独核销或删除此兑奖码",code:k.notOnlyCodes,};l.push(m)}if(k.isRepeat){$("#poup_cav_code_list .repeatTip").show()}else{$("#poup_cav_code_list .repeatTip").hide()}$("#poup_cav_code_list .errList").html("");$("#poup_cav_code_list .errList").show();$.each(l,function(o,p){var n='<div class="errInfo" style="margin-top: 10px;"><div class="tipIcon"></div><div class="tipInfo in-bl">'+p.msg+'</div><div class="in-bl" style="margin-left: 10px; position: relative;"><div class="errCodes abs hide">'+p.code.join(" ")+'</div><span class="detail pointer" style="color: #74b7e6; text-decoration: underline;">详细</span></div></div>';$("#poup_cav_code_list .errList").append(n)});if(l.length>0){$("#poup_cav_code_list .poupBottom .confirmBtn").addClass("disabled")}else{$("#poup_cav_code_list .poupBottom .confirmBtn").removeClass("disabled");h=k.codeList}}};a.createImageUpload=function(f,g){var d={groupId:0,uploadImg:null,isPortal:false,buttonText:"",limit:10*1024,onSuccess:null,onError:null,onStart:null,onUploadStart:null,onSelect:null,onUploadComplete:null,index:0,};$.extend(d,g);var e={auto:true,fileTypeExts:"*.jpg;*.png;*.gif;*.jpeg",fileSizeLimit:5000*1024*1024,multi:false,breakPoints:true,saveInfoLocal:false,isPortal:true,buttonText:"",showUploadedPercent:false,showUploadedSize:true,removeTimeout:9999999,getFileSizeUrl:a.versionURL+"/ajax/advanceUpload.jsp?cmd=_getUploadSize",uploader:a.versionURL+"/ajax/advanceUpload.jsp?cmd=_upload&gameId="+d.gameId+"&maxWidth=10000&maxHeight=10000",onUploadSuccess:function(i,k){var j=$.parseJSON(k);d.onSuccess&&d.onSuccess(i,k);if(j.success&&d.uploadImg){d.uploadImg.attr("src",j.path);d.uploadImg.attr("_path",j.path)}},onUploadError:function(i,j){d.onError&&d.onError(i,j)},onUploadStart:d.onUploadStart,onSelect:d.onSelect,onUploadComplete:d.onUploadComplete};var h=$.fn.uploadify.call(f,e);f.data("uploadify",h)};a.getDate=function(f,e){if(!f){return}var d=new Date();d.setTime(f.getTime());d.setHours(0,0,0,0);var g=d.getTime()+e*24*60*60*1000;d.setTime(g);return d};a.parse=(function(){function d(e,g){if(typeof g!=="object"){var h=new Date();h.setTime(g);g=h}var i={"M+":g.getMonth()+1,"d+":g.getDate(),"h+":g.getHours(),"m+":g.getMinutes(),"s+":g.getSeconds(),"q+":Math.floor((g.getMonth()+3)/3),S:g.getMilliseconds()};if(/(y+)/.test(e)){e=e.replace(RegExp.$1,(g.getFullYear()+"").substr(4-RegExp.$1.length))}for(var f in i){if(new RegExp("("+f+")").test(e)){e=e.replace(RegExp.$1,(RegExp.$1.length==1)?(i[f]):(("00"+i[f]).substr((""+i[f]).length)))}}return e}return{time:d}})();a.copyText=(function(){var f=".copyBtnEven",i=function(j){return $.extend({btn:null,input:null,hasMore:false,complete:null,mouseOver:null,},j)},h=function(j,k){if(typeof j=="function"){return j.call(k)}else{if(j instanceof $){return j.val()}}return""},g;if(window.clipboardData){g=function(j){j=i(j);g.remove(j.btn);j.btn.on("click"+f,function(){var k=h(j.input,this);window.clipboardData.setData("text",k);if(j.complete&&j.complete(k)===false){return}a.hdShowMsg("right","复制成功",true)})};g.remove=function(j){return j.off("click"+f)};return g}var e={isInit:false,};var d=function(){if(e.isInit){return}ZeroClipboard.setDefaults({moviePath:a._cssUrlInfo.js_ZeroClipboard,trustedDomains:[window.location.host],});e.flash=new ZeroClipboard();e.flash.on("mouseover",function(j,k){e._opts._crrText=h(e._opts.input,e._crrBtn);e.flash.setText(e._opts._crrText);e._opts.mouseOver&&e._opts.mouseOver.call(this)});e.flash.on("mouseout",function(j,k){e._opts.mouseout&&e._opts.mouseout.call(this)});e.flash.on("complete",function(j,k){if(e._opts.complete&&e._opts.complete(e._opts._crrText)===false){return}a.hdShowMsg("right","复制成功",true)});e.isInit=true};g=function(j){if(typeof ZeroClipboard=="undefined"){return}j=i(j);d(j);g.remove(j.btn);e.flash.glue(j.btn);j.btn.on("mouseover"+f,function(){$(e.flash.htmlBridge).css($(this).offset());e._opts=j;e._crrBtn=this})};g.remove=function(j){j.off("mouseover"+f);e.flash&&e.flash.unglue(j);if(e._crrBtn&&j.is(e._crrBtn)){e._opts=e._crrBtn=null}};return g})();a.compareHdVer=function(e,d){return e>=d};$.ajaxPrefilter(function(d,h,e){var g,f;if(h.errorHandle){g=h.resolve;f=h.reject;e.then(function(i){i=$.parseJSON(i);if(i.rt||!i.success){if(i.msg||i.msg==="系统错误"){i.msg="系统繁忙，请稍后重试"}a.hdShowMsg("error",i.msg);f&&f(i);f=void 0}else{g&&g(i);g=void 0}},function(k,j,i){setTimeout(function(){var l="系统繁忙，请稍后重试";if(j==="timeout"){l="请求超时"}else{if(j==="parsererror"){l="返回格式解析错误"}else{if(!navigator.onLine){l="网络无法连接，请检查网络"}}}a.hdShowMsg("error",l)},4)})}});(function(){var d={};$.ajaxPrefilter(function(e,h,g){if(!g.isStop&&e.hd_stopOnRetry){var f=$.type(e.hd_stopOnRetry)=="string"?("k_"+e.hd_stopOnRetry):e.url;if(d[f]){g.stop()}else{d[f]=g;g.always(function(){delete d[f]})}}})})();window.hp=a}(HdPortal));